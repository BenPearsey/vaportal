import{K as F,m as L,r as f,j as e,L as A,$ as I,t as o,S as P}from"./app-DUSEAaDk.js";import{A as q}from"./app-layout-agent-jUzQTb5-.js";import{C as m,a as x,b as h,c as p}from"./card-DLziDOQe.js";import{T as B,a as R,b as T,c as l,d as $,e as r}from"./table-DFxtelq1.js";import{I as i}from"./index-CsbLVuVn.js";import{B as _}from"./app-logo-icon-niQwcySJ.js";import{E as H}from"./eye-Dzot2m_d.js";import"./use-mobile-navigation-xAdiOegP.js";import"./index-DDuQ3gsv.js";import"./sonner-BAI07Ub3.js";import"./briefcase-business-D4N79Uzy.js";import"./user-C2oc2Una.js";function se(){const{client:t,sales:U}=F().props,D={trust:"Trust",precious_metals:"Precious Metals",term_life:"Term Life",iul:"IUL",whole_life:"Whole Life",annuity:"Annuity",final_expense:"Final Expense","10_term":"10 Term","20_term":"20 Term","30_term":"30 Term"},b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),{data:n,setData:d,put:w,processing:g,errors:a,reset:E}=L({email:t.email,phone:t.phone||"",address:t.address||"",city:t.city||"",state:t.state||"",zipcode:t.zipcode||""}),k=s=>{s.preventDefault(),w(route("agent.clients.update",t.client_id),{onSuccess:()=>{o.success("Update request sent. Pending admin approval."),E("address","city","state","zipcode","phone","email")},onError:()=>{o.error("Failed to send update request.")}})},[j,v]=f.useState(null),[y,u]=f.useState(""),[C,N]=f.useState(!1),z=()=>{if(!j)return;const s=new FormData;s.append("file",j),s.append("title",y),N(!0),P.post(route("agent.clients.documents.upload",t.client_id),s,{onSuccess:()=>{o.success("Document uploaded and admin notified."),v(null),u("")},onError:()=>{o.error("Upload failed.")},onFinish:()=>N(!1)})};return e.jsxs(q,{breadcrumbs:[{title:"Clients",href:route("agent.clients")},{title:"Overview",href:""}],children:[e.jsx(A,{title:`Client: ${t.firstname} ${t.lastname}`}),e.jsxs(m,{className:"mb-6",children:[e.jsx(x,{children:e.jsx(h,{children:"Client Details"})}),e.jsxs(p,{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",t.firstname," ",t.lastname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",t.phone||"—"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",t.address||"—"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",t.city||"—"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"State:"})," ",t.state||"—"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip:"})," ",t.zipcode||"—"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"DOB:"})," ",t.dob||"—"]})]})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(x,{children:e.jsx(h,{children:"Request Info Update"})}),e.jsx(p,{children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Email"}),e.jsx(i,{type:"email",value:n.email,onChange:s=>d("email",s.target.value)}),a.email&&e.jsx("p",{className:"text-red-500 text-sm",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Phone"}),e.jsx(i,{type:"tel",value:n.phone,onChange:s=>d("phone",s.target.value)}),a.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Address"}),e.jsx(i,{value:n.address,onChange:s=>d("address",s.target.value)}),a.address&&e.jsx("p",{className:"text-red-500 text-sm",children:a.address})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"City"}),e.jsx(i,{value:n.city,onChange:s=>d("city",s.target.value)}),a.city&&e.jsx("p",{className:"text-red-500 text-sm",children:a.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"State"}),e.jsx(i,{value:n.state,onChange:s=>d("state",s.target.value)}),a.state&&e.jsx("p",{className:"text-red-500 text-sm",children:a.state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Zip Code"}),e.jsx(i,{value:n.zipcode,onChange:s=>d("zipcode",s.target.value)}),a.zipcode&&e.jsx("p",{className:"text-red-500 text-sm",children:a.zipcode})]})]}),e.jsx(_,{type:"submit",disabled:g,children:g?"Sending...":"Submit Update Request"})]})})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(x,{children:e.jsx(h,{children:"Upload Document"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(i,{type:"file",onChange:s=>{var S;const c=(S=s.target.files)==null?void 0:S[0];c&&(v(c),u(c.name))}})}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Title (optional)"}),e.jsx(i,{value:y,onChange:s=>u(s.target.value),placeholder:"Document Title"})]}),e.jsx(_,{onClick:z,disabled:!j||C,children:C?"Uploading…":"Upload & Notify Admin"})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(h,{children:["Sales for ",t.firstname]})}),e.jsx(p,{children:e.jsxs(B,{children:[e.jsx(R,{children:e.jsxs(T,{children:[e.jsx(l,{children:"Sale #"}),e.jsx(l,{children:"Product"}),e.jsx(l,{children:"Carrier"}),e.jsx(l,{children:"Total"}),e.jsx(l,{children:"Commission"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"View"})]})}),e.jsx($,{children:U.map(s=>{var c;return e.jsxs(T,{children:[e.jsx(r,{children:s.sale_id}),e.jsx(r,{children:D[s.product]||s.product}),e.jsx(r,{children:((c=s.carrier_info)==null?void 0:c.name)||"—"}),e.jsx(r,{children:b.format(s.total_sale_amount)}),e.jsx(r,{children:b.format(s.commission)}),e.jsx(r,{children:s.status}),e.jsx(r,{children:s.sale_date}),e.jsx(r,{children:e.jsx(I,{href:route("agent.sales.show",s.sale_id),children:e.jsx(H,{className:"h-5 w-5 text-gray-500"})})})]},s.sale_id)})})]})})]})]})}export{se as default};
