import{K as m,j as e,L as h,S as d,t as c}from"./app-DUSEAaDk.js";import{A as j}from"./app-layout-admin-bPDzceOK.js";import{C as x,a as u,b as C,c as b}from"./card-DLziDOQe.js";import{T as f,a as R,b as n,c as i,d as g,e as a}from"./table-DFxtelq1.js";import{B as o}from"./app-logo-icon-niQwcySJ.js";import"./use-mobile-navigation-xAdiOegP.js";import"./index-CsbLVuVn.js";import"./index-DDuQ3gsv.js";import"./sonner-BAI07Ub3.js";import"./briefcase-business-D4N79Uzy.js";import"./users-Dz1g4iLP.js";import"./user-plus-BCs7l9Mm.js";function $(){const{updateRequests:r=[]}=m().props,l=(s,t)=>{d.post(route(`admin.client_update_requests.${t}`,{updateRequest:s}),{},{onSuccess:()=>{c.success(`Request ${t}d.`),d.reload({only:["updateRequests"]})},onError:()=>{c.error(`Failed to ${t} request.`)}})};return e.jsxs(j,{breadcrumbs:[{title:"Home",href:"/admin/dashboard"},{title:"Client Update Requests",href:"/admin/client-update-requests"}],children:[e.jsx(h,{title:"Client Update Requests"}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs(x,{children:[e.jsx(u,{children:e.jsx(C,{children:"Pending Update Requests"})}),e.jsx(b,{children:e.jsxs(f,{children:[e.jsx(R,{children:e.jsxs(n,{children:[e.jsx(i,{children:"Client"}),e.jsx(i,{children:"Agent"}),e.jsx(i,{children:"Changes"}),e.jsx(i,{children:"Requested At"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(g,{children:r.length?r.map(s=>e.jsxs(n,{children:[e.jsxs(a,{children:[s.client.firstname," ",s.client.lastname]}),e.jsxs(a,{children:[s.agent.firstname," ",s.agent.lastname]}),e.jsx(a,{children:e.jsx("ul",{className:"list-disc list-inside space-y-1",children:Object.entries(s.payload).map(([t,p])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-medium",children:[t,":"]})," ",String(p)]},t))})}),e.jsx(a,{children:new Date(s.created_at).toLocaleString()}),e.jsxs(a,{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>l(s.id,"approve"),children:"Approve"}),e.jsx(o,{variant:"destructive",size:"sm",onClick:()=>l(s.id,"reject"),children:"Reject"})]})]},s.id)):e.jsx(n,{children:e.jsx(a,{colSpan:5,className:"text-center",children:"No pending requests."})})})]})})]})})]})}export{$ as default};
