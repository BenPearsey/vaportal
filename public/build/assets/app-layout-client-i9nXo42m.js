import{K as j,j as e,$ as o,S as d}from"./app-DUSEAaDk.js";import{w as g,x as N,y as w,z as v,B as y,E as C,G as A,N as S,F as M,H as k,J as L,K as D,L as F,D as h,a as u,b as p,c as t,M as H,Q as $,U as B,W as I,Y as T,Z as z,_ as E}from"./use-mobile-navigation-xAdiOegP.js";import{H as K,B as m,T as R}from"./sonner-BAI07Ub3.js";function U(){const{unreadCount:a}=j().props,r=[{title:"Home",url:"/client/dashboard",icon:K},{title:"Forms & Resources",url:"/client/forms-resources",icon:M},{title:`Notifications${a?` (${a})`:""}`,url:"/client/notifications",icon:m}];return e.jsxs(g,{collapsible:"icon",variant:"inset",children:[e.jsx(N,{children:e.jsx(w,{children:e.jsx(v,{children:e.jsx(y,{size:"lg",asChild:!0,children:e.jsx(o,{href:"/client/dashboard",prefetch:!0,children:e.jsx(C,{})})})})})}),e.jsx(A,{children:e.jsx(S,{items:r})})]})}function G({breadcrumbs:a=[]}){const{notifications:r,unreadCount:i,auth:b}=j().props,x=b.roles??[],{user:c,firstName:n,lastName:l}=k(),f=L();return e.jsxs("header",{className:"border-sidebar-border/50 flex h-16 shrink-0 items-center gap-2 border-b px-6 md:px-4",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[e.jsx(D,{className:"-ml-1"}),e.jsx(F,{breadcrumbs:a})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsxs("button",{className:"relative p-2",children:[e.jsx(m,{className:"h-6 w-6"}),i>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full bg-red-600 text-xs text-white",children:i})]})}),e.jsxs(p,{align:"end",className:"w-80",children:[e.jsxs(t,{className:"flex justify-between px-4 py-2",children:[e.jsx("span",{className:"font-semibold",children:"Notifications"}),e.jsx("button",{onClick:()=>d.post(route("notifications.readAll")),className:"text-sm text-primary hover:underline",children:"Mark all read"})]}),r.length?r.map(s=>e.jsxs(t,{className:"flex items-start justify-between px-4 py-2 hover:bg-gray-100",children:[e.jsxs(o,{href:s.data.url??"#",className:"flex-1 text-sm text-gray-800 hover:text-primary",children:[e.jsx("div",{children:s.data.message}),e.jsx("div",{className:"text-xs text-gray-500",children:s.created})]}),e.jsx("button",{onClick:()=>d.post(route("notifications.read",s.id)),className:"ml-2 text-gray-400 hover:text-gray-600",children:"Ã—"})]},s.id)):e.jsx(t,{className:"px-4 py-2 text-center text-gray-500",children:"No new notifications"})]})]}),e.jsxs(h,{children:[e.jsx(u,{asChild:!0,children:e.jsxs(H,{className:"cursor-pointer",children:[e.jsx($,{src:c==null?void 0:c.avatar,alt:`${n} ${l}`}),e.jsxs(B,{children:[n==null?void 0:n.charAt(0),l==null?void 0:l.charAt(0)]})]})}),e.jsxs(p,{align:"end",children:[x.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(t,{disabled:!0,className:"opacity-70",children:"Switch role"}),x.map(s=>e.jsx(t,{onClick:()=>d.post(route("role.switch"),{role:s.toLowerCase().trim()},{withCredentials:!0,onFinish:()=>window.location.href="/"}),children:s.charAt(0).toUpperCase()+s.slice(1)},s)),e.jsx(I,{})]}),e.jsx(t,{asChild:!0,children:e.jsx(o,{href:"/client/settings/profile",children:"Profile"})}),e.jsx(t,{asChild:!0,children:e.jsxs(o,{className:"block w-full",method:"post",href:route("logout"),as:"button",onClick:f,children:[e.jsx(T,{className:"mr-2"}),"Log out"]})})]})]})]})}function J({children:a,breadcrumbs:r=[]}){return e.jsxs(z,{variant:"sidebar",children:[e.jsx(U,{}),e.jsxs(E,{variant:"sidebar",children:[e.jsx(G,{breadcrumbs:r}),a]})]})}const W=({children:a,breadcrumbs:r,...i})=>e.jsxs(J,{breadcrumbs:r,...i,children:[a,e.jsx(R,{})]});export{W as A};
