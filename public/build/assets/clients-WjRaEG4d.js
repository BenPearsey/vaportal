import{K as v,r as x,j as e,L as b,$ as j,S as o,t as c}from"./app-DUSEAaDk.js";import{A as T}from"./app-layout-admin-bPDzceOK.js";import{C as y,a as A,b as D,c as N}from"./card-DLziDOQe.js";import{B as r}from"./app-logo-icon-niQwcySJ.js";import{I as S}from"./index-CsbLVuVn.js";import{T as k,a as L,b as u,c as l,d as E,e as t}from"./table-DFxtelq1.js";import{D as I,a as F,b as U,c as H}from"./dialog-h4m6KRJP.js";import{D as P,a as _,b as B,c as d}from"./use-mobile-navigation-xAdiOegP.js";import{F as M}from"./filter-DnKLZ143.js";import{C as R}from"./circle-check-big-KXifS_3q.js";import{U as $}from"./user-plus-BCs7l9Mm.js";import{E as z}from"./eye-Dzot2m_d.js";import{T as K}from"./trash-CG0kyJwJ.js";import"./sonner-BAI07Ub3.js";import"./briefcase-business-D4N79Uzy.js";import"./users-Dz1g4iLP.js";import"./index-DDuQ3gsv.js";const O=[{title:"Home",href:"/admin/dashboard"},{title:"Clients",href:"/admin/clients"}];function oe(){const{clients:p}=v().props,[h,a]=x.useState("All"),[n,C]=x.useState(""),[m,i]=x.useState(null),f=p.filter(s=>(h==="All"||s.status===h)&&(s.firstname.toLowerCase().includes(n.toLowerCase())||s.lastname.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase()))),g=s=>{o.post(route("admin.clients.makeUser",s),{},{onSuccess:()=>{c.success("User account created"),o.reload({only:["clients"]})},onError:()=>{c.error("Failed to create user account")}})},w=()=>{m!==null&&(o.delete(route("admin.clients.destroy",m),{},{onSuccess:()=>{c.success("Client deleted"),o.reload({only:["clients"]})},onError:()=>{c.error("Failed to delete client")}}),i(null))};return e.jsxs(T,{breadcrumbs:O,children:[e.jsx(b,{title:"Clients"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx(S,{placeholder:"Search by name or email",className:"w-full md:w-1/3",value:n,onChange:s=>C(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(r,{variant:"outline",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),h]})}),e.jsxs(B,{children:[e.jsx(d,{onClick:()=>a("All"),children:"All"}),e.jsx(d,{onClick:()=>a("Prospect"),children:"Prospect"}),e.jsx(d,{onClick:()=>a("Active"),children:"Active"}),e.jsx(d,{onClick:()=>a("Inactive"),children:"Inactive"})]})]}),e.jsx(j,{href:route("admin.clients.create"),children:e.jsx(r,{children:"Add Client"})})]})]}),e.jsxs(y,{children:[e.jsx(A,{children:e.jsx(D,{children:"Clients"})}),e.jsx(N,{children:e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(u,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Phone"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"User?"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(E,{children:f.map(s=>e.jsxs(u,{children:[e.jsxs(t,{children:[s.firstname," ",s.lastname]}),e.jsx(t,{children:s.email}),e.jsx(t,{children:s.phone||"N/A"}),e.jsx(t,{children:s.status}),e.jsx(t,{children:s.user_id?e.jsx(R,{className:"h-5 w-5 text-green-500"}):e.jsx(r,{size:"icon",variant:"outline",onClick:()=>g(s.client_id),children:e.jsx($,{className:"h-5 w-5"})})}),e.jsxs(t,{className:"flex gap-2",children:[e.jsx(j,{href:route("admin.clients.overview",{client:s.client_id}),children:e.jsx(r,{variant:"ghost",children:e.jsx(z,{className:"h-5 w-5 text-gray-500"})})}),e.jsx(r,{variant:"ghost",onClick:()=>i(s.client_id),children:e.jsx(K,{className:"h-5 w-5 text-red-500"})})]})]},s.client_id))})]})})]})]}),e.jsx(I,{open:m!==null,onOpenChange:()=>i(null),children:e.jsxs(F,{children:[e.jsx(U,{children:e.jsx(H,{children:"Delete Client?"})}),e.jsx("p",{children:"Are you sure you want to permanently delete this client?"}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(r,{variant:"destructive",onClick:w,children:"Yes, delete"}),e.jsx(r,{onClick:()=>i(null),children:"Cancel"})]})]})})]})}export{oe as default};
