import{r as c,j as e,K as ue,L as pe,$ as X,S as _,R as L,t as V}from"./app-DUSEAaDk.js";import{A as xe}from"./app-layout-admin-bPDzceOK.js";import{C as D,a as R,b as U,c as F}from"./card-DLziDOQe.js";import{B as m}from"./app-logo-icon-niQwcySJ.js";import{T as he,a as fe,b as H,c as B}from"./tabs-CdeGy1fN.js";import{D as q,a as z,b as E,c as O,e as W,f as te}from"./dialog-h4m6KRJP.js";import{I as G}from"./index-CsbLVuVn.js";import{S as Q}from"./SaleChecklist-DKrXlDy1.js";import{P as je}from"./progress-BtyeaZGH.js";import{X as se}from"./use-mobile-navigation-xAdiOegP.js";import{U as Z}from"./upload-BGDiebbv.js";import{F as ge}from"./file-text-Lb0kZEB0.js";import{T as ne}from"./trash-CG0kyJwJ.js";import"./sonner-BAI07Ub3.js";import"./briefcase-business-D4N79Uzy.js";import"./users-Dz1g4iLP.js";import"./user-plus-BCs7l9Mm.js";import"./index-DDuQ3gsv.js";import"./Checklist-Df5g09Pz.js";import"./checkbox-Dj6NJVxR.js";import"./index-BxwQjuZr.js";function be({state:s}){const n={todo:{label:"To do",cls:"border"},not_started:{label:"To do",cls:"border"},in_progress:{label:"To do",cls:"border"},uploaded:{label:"Pending review",cls:"bg-amber-500 text-white"},pending_review:{label:"Pending review",cls:"bg-amber-500 text-white"},waiting_on_client:{label:"Waiting on client",cls:"bg-blue-100 text-blue-700"},blocked:{label:"Hidden",cls:"bg-gray-100 text-gray-700"},approved:{label:"Approved",cls:"bg-emerald-600 text-white"},rejected:{label:"Changes requested",cls:"bg-rose-600 text-white"},complete:{label:"Complete",cls:"bg-green-600 text-white"},na:{label:"N/A",cls:"bg-gray-200 text-gray-700"}},o=n[s]??n.todo;return e.jsx("span",{className:`text-xs px-2 py-1 rounded ${o.cls}`,children:o.label})}function ve(s){var n;return((n=document.cookie.split(";").map(o=>o.trim()).find(o=>o.startsWith(s+"=")))==null?void 0:n.split("=")[1])??""}function ee(){var o;const s=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.content;if(s)return{header:"X-CSRF-TOKEN",token:s};const n=ve("XSRF-TOKEN");return n?{header:"X-XSRF-TOKEN",token:decodeURIComponent(n)}:null}function we(s){const n=s.task;if((n.action_type||"").toLowerCase()==="upload")return!0;const i=`${n.key} ${n.label}`.toLowerCase();return!!(/(upload|uploaded|uploading)/.test(i)||n.requires_review&&/(id|ids|document|intake|certificate|photo|passport|driver)/.test(i))}function ye({state:s,onOpenChange:n}){return e.jsx(q,{open:s.open,onOpenChange:n,children:e.jsxs(z,{className:"sm:max-w-[480px]",children:[e.jsx("button",{className:"absolute right-3 top-3 opacity-60 hover:opacity-100",onClick:()=>n(!1),children:e.jsx(se,{className:"h-4 w-4"})}),e.jsxs(E,{children:[e.jsx(O,{children:s.title}),e.jsx(W,{children:s.description})]}),e.jsxs(te,{className:"gap-2 sm:gap-2",children:[e.jsx(m,{variant:s.tone==="destructive"?"destructive":"default",onClick:()=>{s.onConfirm(),n(!1)},children:s.confirmLabel}),e.jsx(m,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})})}function Ne({state:s,onOpenChange:n}){const[o,i]=c.useState("");return c.useEffect(()=>{s.open&&i("")},[s.open]),e.jsx(q,{open:s.open,onOpenChange:n,children:e.jsxs(z,{className:"sm:max-w-[560px]",children:[e.jsx("button",{className:"absolute right-3 top-3 opacity-60 hover:opacity-100",onClick:()=>n(!1),children:e.jsx(se,{className:"h-4 w-4"})}),e.jsxs(E,{children:[e.jsx(O,{children:s.title}),s.description&&e.jsx(W,{children:s.description})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Message to client (optional)"}),e.jsx("textarea",{className:"mt-1 w-full min-h-[96px] rounded border bg-background p-2 text-sm",value:o,onChange:x=>i(x.target.value),placeholder:"Briefly explain what needs to be changed…"})]}),e.jsxs(te,{className:"gap-2 sm:gap-2",children:[e.jsx(m,{variant:"destructive",onClick:()=>{s.onSubmit(o.trim()),n(!1)},children:"Send request"}),e.jsx(m,{variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})})}function ke({saleId:s,role:n="admin"}){const o=n==="admin"?`/admin/sales/${s}`:`/${n}/sales/${s}`,[i,x]=c.useState(null),[v,h]=c.useState(new Set),[w,N]=c.useState(!1),[k,p]=c.useState(new Set),[j,f]=c.useState(null),[P,g]=c.useState(null),M=c.useRef({}),T=c.useCallback(async(a,r={})=>{const t=ee(),d={Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};t&&(d[t.header]=t.token);const u=await fetch(a,{method:"POST",headers:d,credentials:"same-origin",body:JSON.stringify(r)});if(!u.ok)throw new Error(await u.text().catch(()=>u.statusText))},[]),K=c.useCallback(async(a,r)=>{const t=ee(),d={Accept:"application/json","X-Requested-With":"XMLHttpRequest"};t&&(d[t.header]=t.token);const u=await fetch(a,{method:"POST",headers:d,credentials:"same-origin",body:r});if(!u.ok)throw new Error(await u.text().catch(()=>u.statusText))},[]),b=c.useCallback(async()=>{const a=await fetch(`${o}/checklist`,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!a.ok)throw new Error("Failed to fetch checklist");x(await a.json())},[o]),ae=c.useCallback(async()=>{if(n==="admin"){N(!0);try{await T(`${o}/checklist/recalc`),await b()}finally{N(!1)}}},[n,o,T,b]),Y=c.useCallback(async(a,r)=>{if(n==="admin"){h(t=>new Set(t).add(a));try{const t=r==="todo"?"not_started":r;await T(`${o}/checklist/items/${a}/state`,{state:t}),await b()}finally{h(t=>{const d=new Set(t);return d.delete(a),d})}}},[n,o,T,b]),re=c.useCallback(async(a,r)=>{if(!(n==="admin"||r.length===0)){h(t=>new Set(t).add(a));try{for(const t of r){const d=new FormData;d.append("file",t),d.append("title",t.name),await K(`${o}/checklist/items/${a}/upload`,d)}await b()}finally{h(t=>{const d=new Set(t);return d.delete(a),d})}}},[n,o,K,b]),$=c.useCallback(async(a,r,t,d)=>{if(n==="admin"){h(u=>new Set(u).add(a));try{await T(`${o}/checklist/items/${a}/review`,{link_id:r,decision:t,note:d??null}),await b()}finally{h(u=>{const C=new Set(u);return C.delete(a),C})}}},[n,o,T,b]),ie=c.useCallback(async a=>{const r=a.links.filter(t=>t.review_state==="pending");r.length!==0&&f({open:!0,title:"Approve all pending files?",description:`This will approve ${r.length} document(s) for “${a.task.label}”.`,confirmLabel:"Yes, approve all",onConfirm:async()=>{for(const t of r)await $(a.id,t.id,"approved")}})},[$]),le=c.useCallback(async a=>{const r=a.links.filter(t=>t.review_state==="pending");r.length!==0&&g({open:!0,title:`Request changes (${r.length} files)`,description:`Send a single message that applies to all pending document(s) for “${a.task.label}”.`,onSubmit:async t=>{for(const d of r)await $(a.id,d.id,"rejected",t||void 0)}})},[$]),oe=c.useMemo(()=>i!=null&&i.stages?[...i.stages].sort((a,r)=>a.order-r.order):[],[i==null?void 0:i.stages]),ce=c.useMemo(()=>{var r;const a={};if(!(i!=null&&i.items))return a;for(const t of i.items)t.parent_item_id||(a[r=t.task.stage.id]??(a[r]=[])).push(t);return a},[i==null?void 0:i.items]),J=c.useMemo(()=>{if(!i)return 0;if(n==="admin")return i.progress;const a=new Set(["complete","approved","na"]),r=i.stages.length||1;let t=0;for(const d of i.stages){const u=i.items.filter(y=>y.task.stage.id===d.id&&!y.parent_item_id);u.length>0&&u.every(y=>a.has(y.state))&&t++}return Math.round(t/r*100)},[i,n]);if(c.useEffect(()=>{(async()=>(await fetch(`${o}/checklist/ensure`,{headers:{Accept:"application/json"},credentials:"same-origin"}),await b()))()},[o,b]),!i)return null;const de=a=>p(r=>{const t=new Set(r);return t.has(a)?t.delete(a):t.add(a),t});return e.jsxs(D,{children:[e.jsxs(R,{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(U,{children:"Trust Checklist"}),n==="admin"&&e.jsx(m,{size:"sm",variant:"outline",onClick:ae,disabled:w,children:w?"Recalc…":"Recalc"})]}),e.jsxs("div",{className:"w-48",children:[e.jsx(je,{value:J,className:"dark:bg-white/20 dark:[&>div]:bg-white"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[J,"%"]})]})]}),e.jsx(F,{className:"space-y-5",children:oe.map(a=>{const r=ce[a.id]??[];return r.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-2",children:a.label}),e.jsx("ul",{className:"space-y-2",children:r.map(t=>{const d=t.state==="approved"||t.state==="complete"?"var(--primary)":t.state==="pending_review"||t.state==="uploaded"?"orange":t.state==="rejected"?"crimson":"#aaa",u=v.has(t.id),C=n==="admin",y=we(t),S=t.links.reduce((l,A)=>(l.total++,l[A.review_state]++,l),{total:0,approved:0,pending:0,rejected:0});return e.jsxs("li",{className:"text-sm border rounded px-3 py-2","aria-busy":u,children:[e.jsxs("div",{className:"grid grid-cols-[auto_minmax(0,1fr)_auto] items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",title:C?"Toggle complete":"",className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:d,cursor:C?"pointer":"default",opacity:u?.6:1},disabled:!C||u,onClick:()=>{if(!C||u)return;const l=t.state==="complete"?"not_started":"complete";f({open:!0,title:l==="complete"?"Mark step complete?":"Re-open step?",description:l==="complete"?`Are you sure you want to mark “${t.task.label}” complete?`:`Are you sure you want to mark “${t.task.label}” not started?`,confirmLabel:l==="complete"?"Yes, mark complete":"Yes, re-open",onConfirm:()=>Y(t.id,l)})}}),e.jsx("span",{className:"font-medium",children:t.task.label}),t.task.requires_review&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(review)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{state:t.state}),n==="admin"&&y&&S.total>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs text-muted-foreground mr-1",children:["Uploads: ",S.total]}),S.approved>0&&e.jsxs("span",{className:"text-[10px] px-1 py-0.5 rounded bg-emerald-600 text-white",children:[S.approved," approved"]}),S.pending>0&&e.jsxs("span",{className:"text-[10px] px-1 py-0.5 rounded bg-amber-500 text-white",children:[S.pending," pending"]}),S.rejected>0&&e.jsxs("span",{className:"text-[10px] px-1 py-0.5 rounded bg-rose-600 text-white",children:[S.rejected," changes"]})]})]}),e.jsxs("div",{className:"justify-self-end flex items-center gap-2",children:[n==="admin"&&y&&e.jsx(m,{size:"sm",variant:k.has(t.id)?"default":"outline",onClick:()=>de(t.id),children:k.has(t.id)?"Hide":"Manage"}),n==="admin"&&e.jsx(m,{size:"sm",variant:"outline",disabled:u,onClick:()=>f({open:!0,title:"Mark as N/A?",description:`Are you sure you want to mark “${t.task.label}” as Not Applicable?`,confirmLabel:"Yes, mark N/A",tone:"destructive",onConfirm:()=>Y(t.id,"na")}),children:"Mark N/A"}),n!=="admin"&&y&&(t.state==="waiting_on_client"||t.state==="rejected")&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",multiple:!0,className:"hidden",ref:l=>M.current[t.id]=l,onChange:l=>{const A=Array.from(l.target.files??[]);A.length&&re(t.id,A),M.current[t.id]&&(M.current[t.id].value="")}}),e.jsx(m,{size:"sm",disabled:u,onClick:()=>{var l;return(l=M.current[t.id])==null?void 0:l.click()},children:t.state==="rejected"?"Upload new file(s)":"Upload file(s)"})]})]})]}),n==="admin"&&y&&k.has(t.id)&&e.jsxs("div",{className:"mt-2 rounded border bg-muted/10 p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{size:"sm",variant:"outline",onClick:()=>ie(t),disabled:t.links.every(l=>l.review_state!=="pending"),children:"Approve all pending"}),e.jsx(m,{size:"sm",variant:"destructive",onClick:()=>le(t),disabled:t.links.every(l=>l.review_state!=="pending"),children:"Request changes (all pending)"})]}),e.jsxs("div",{className:"space-y-1",children:[t.links.map(l=>{const A=l.review_state==="approved"?"bg-emerald-600 text-white":l.review_state==="rejected"?"bg-rose-600 text-white":"bg-amber-500 text-white",I=l.document_title||(typeof l.document_id=="number"?`Document #${l.document_id}`:"Document");return e.jsxs("div",{className:"flex items-center justify-between rounded border bg-white/50 dark:bg-zinc-900/40 px-2 py-1",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"truncate max-w-[22rem]",title:I,children:I}),e.jsx("span",{className:`text-[10px] px-1 py-0.5 rounded ${A}`,children:l.review_state}),l.review_note&&e.jsxs("span",{className:"text-[11px] text-muted-foreground italic truncate max-w-[16rem]",title:l.review_note,children:["“",l.review_note,"”"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[typeof l.document_id=="number"&&e.jsx(m,{size:"sm",variant:"outline",onClick:()=>window.open(`/admin/sales/${s}/documents/${l.document_id}/view`,"_blank"),children:"View"}),l.review_state!=="approved"&&e.jsx(m,{size:"sm",onClick:()=>$(t.id,l.id,"approved"),children:"Approve"}),l.review_state!=="rejected"&&e.jsx(m,{size:"sm",variant:"destructive",onClick:()=>g({open:!0,title:"Request changes",description:`Send a message for “${I}”.`,onSubmit:me=>$(t.id,l.id,"rejected",me||void 0)}),children:"Request changes"})]})]},l.id)}),t.links.length===0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"No documents uploaded yet."})]})]}),n!=="admin"&&(t.state==="blocked"||t.state==="todo"||t.state==="not_started"||t.state==="in_progress")&&e.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Waiting for admin…"}),n!=="admin"&&(t.state==="pending_review"||t.state==="uploaded")&&e.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Waiting for admin review…"})]},t.id)})})]},a.id)})}),j&&e.jsx(ye,{state:j,onOpenChange:a=>f(r=>r&&{...r,open:a})}),P&&e.jsx(Ne,{state:P,onOpenChange:a=>g(r=>r&&{...r,open:a})})]})}function Ce({saleId:s,notes:n}){const[o,i]=L.useState(!1),[x,v]=L.useState(!1),[h,w]=L.useState(null),[N,k]=L.useState(""),[p,j]=L.useState(!1),f=()=>{j(!0),_.post(route("admin.sales.notes.store",s),{content:N},{onSuccess:()=>{k(""),i(!1),_.reload({only:["notes"]})},onFinish:()=>j(!1)})},P=()=>{h!=null&&_.delete(route("admin.sales.notes.destroy",[s,h]),{onSuccess:()=>_.reload({only:["notes"]}),onFinish:()=>{v(!1),w(null)}})};return e.jsxs(D,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between",children:[e.jsx(U,{children:"Notes"}),e.jsx(m,{onClick:()=>i(!0),children:"Add Note"})]}),e.jsxs(F,{children:[n.length===0&&e.jsx("p",{children:"No notes yet."}),n.map(g=>e.jsxs("div",{className:"border rounded p-3 my-2 flex justify-between bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("p",{children:g.content}),e.jsxs("p",{className:"text-xs text-gray-500",children:[g.created_by," – ",new Date(g.created_at).toLocaleString()]})]}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>{w(g.id),v(!0)},children:e.jsx(ne,{className:"h-4 w-4 text-red-600"})})]},g.id)),e.jsx(q,{open:o,onOpenChange:i,children:e.jsxs(z,{children:[e.jsx(E,{children:e.jsx(O,{children:"Add Note"})}),e.jsx("textarea",{className:"w-full border rounded p-2 h-28",value:N,onChange:g=>k(g.target.value)}),e.jsx(m,{disabled:p||!N.trim(),onClick:f,children:p?"Saving…":"Save"})]})}),e.jsx(q,{open:x,onOpenChange:v,children:e.jsxs(z,{children:[e.jsx(E,{children:e.jsx(O,{children:"Delete note?"})}),e.jsx("p",{children:"This can’t be undone."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(m,{variant:"destructive",onClick:P,children:"Delete"}),e.jsx(m,{onClick:()=>v(!1),children:"Cancel"})]})]})})]})]})}const Se=[{title:"Home",href:route("admin.dashboard")},{title:"Sales",href:route("admin.sales")}];function Je({sale:s}){var i,x;const{documents:n=[],notes:o=[]}=ue().props;return e.jsxs(xe,{breadcrumbs:[...Se,{title:`Sale #${s.sale_id}`,href:""}],children:[e.jsx(pe,{title:`Sale #${s.sale_id}`}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Sale #",s.sale_id]}),e.jsx(X,{href:route("admin.sales.edit",s.sale_id),children:e.jsx(m,{children:"Edit Sale"})})]}),e.jsxs(he,{defaultValue:"overview",children:[e.jsxs(fe,{className:"mb-4",children:[e.jsx(H,{value:"overview",children:"Overview"}),e.jsx(H,{value:"documents",children:"Documents"}),e.jsx(H,{value:"notes",children:"Notes"})]}),e.jsxs(B,{value:"overview",children:[e.jsxs(D,{children:[e.jsx(R,{children:e.jsx(U,{children:"Details"})}),e.jsxs(F,{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Agent:"})," ",e.jsxs(X,{href:route("admin.agents.overview",s.agent.id),className:"text-blue-600 hover:underline",children:[s.agent.firstname," ",s.agent.lastname]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Client:"})," ",e.jsxs(X,{href:route("admin.clients.overview",s.client.id),className:"text-blue-600 hover:underline",children:[s.client.firstname," ",s.client.lastname]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s.client.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s.client.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Carrier:"})," ",((i=s.carrier_info)==null?void 0:i.name)??"—"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",s.product]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Sale Amount:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s.total_sale_amount)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Commission:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s.commission)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sale Date:"})," ",new Date(s.sale_date).toLocaleDateString()]})]})]}),e.jsxs(D,{className:"mt-6",children:[e.jsx(R,{children:e.jsx(U,{children:"Checklist"})}),e.jsx(F,{children:e.jsx(Q,{saleId:s.sale_id,checklist:s.checklist??[]})})]}),e.jsx(D,{className:"mt-6",children:e.jsxs(D,{className:"mt-6",children:[e.jsx(R,{children:e.jsx(U,{children:"Checklist"})}),e.jsx(F,{children:(x=s.product)!=null&&x.toLowerCase().includes("trust")?e.jsx(ke,{saleId:s.sale_id,role:"admin"}):e.jsx(Q,{saleId:s.sale_id,checklist:s.checklist??[]})})]})})]}),e.jsx(B,{value:"documents",children:e.jsx(_e,{saleId:s.sale_id,docs:n})}),e.jsx(B,{value:"notes",children:e.jsx(Ce,{saleId:s.sale_id,notes:o})})]})]})}function _e({saleId:s,docs:n}){const[o,i]=c.useState(!1),[x,v]=c.useState(null),[h,w]=c.useState(""),N=()=>{if(!x)return;const p=new FormData;p.append("file",x),p.append("title",h),_.post(route("admin.sales.documents.upload",s),p,{onSuccess:()=>{V("Document uploaded!"),i(!1),v(null),w(""),_.reload({only:["documents"]})},onError:()=>V.error("Upload failed")})},k=p=>_.delete(route("admin.sales.documents.destroy",[s,p]),{onSuccess:()=>_.reload({only:["documents"]})});return e.jsxs(D,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between",children:[e.jsx(U,{children:"Documents"}),e.jsxs(m,{onClick:()=>i(!0),children:[e.jsx(Z,{className:"mr-2 h-4 w-4"})," Upload"]})]}),e.jsxs(F,{children:[n.length===0&&e.jsx("p",{children:"No documents uploaded yet."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map(p=>{var f;const j=((f=p.title)==null?void 0:f.trim())||p.path.split("/").pop()||"Untitled";return e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(ge,{className:"h-8 w-8 mb-1"}),e.jsx("span",{className:"text-sm truncate max-w-[100px]",children:j}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>window.open(route("admin.sales.documents.view",[s,p.id]),"_blank"),children:e.jsx(Z,{className:"h-4 w-4 rotate-180"})}),e.jsx(m,{size:"icon",variant:"ghost",onClick:()=>k(p.id),children:e.jsx(ne,{className:"h-4 w-4 text-red-600"})})]})]},p.id)})})]}),e.jsx(q,{open:o,onOpenChange:i,children:e.jsxs(z,{className:"max-h-[80vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(O,{children:"Upload Document"}),e.jsx(W,{children:"Select the file and (optionally) give it a title."})]}),e.jsx(G,{type:"file",onChange:p=>{var f;const j=(f=p.target.files)==null?void 0:f[0];j&&(v(j),w(j.name))}}),e.jsx(G,{placeholder:"Title (optional)",value:h,onChange:p=>w(p.target.value)}),e.jsx(m,{disabled:!x,onClick:N,children:"Upload"})]})})]})}export{Je as default};
