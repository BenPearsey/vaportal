import{K as v,r as h,j as e,L as k,$ as j,S as o,t as d}from"./app-DUSEAaDk.js";import{A as y}from"./app-layout-admin-bPDzceOK.js";import{C as N,a as T,b as L,c as S}from"./card-DLziDOQe.js";import{B as r}from"./app-logo-icon-niQwcySJ.js";import{I as _}from"./index-CsbLVuVn.js";import{T as E,a as I,b as u,c as n,d as U,e as l}from"./table-DFxtelq1.js";import{D as p,a as g,b as f,c as C}from"./dialog-h4m6KRJP.js";import{D as H,a as B,b as F,c as M}from"./use-mobile-navigation-xAdiOegP.js";import{A as P}from"./AgentChecklist-BMl7pJnH.js";import{F as $}from"./filter-DnKLZ143.js";import{C as O}from"./circle-check-big-KXifS_3q.js";import{U as R}from"./user-plus-BCs7l9Mm.js";import{E as z}from"./eye-Dzot2m_d.js";import{C as K}from"./clipboard-list-Dg4pp0_3.js";import{T as V}from"./trash-CG0kyJwJ.js";import"./sonner-BAI07Ub3.js";import"./briefcase-business-D4N79Uzy.js";import"./users-Dz1g4iLP.js";import"./index-DDuQ3gsv.js";import"./Checklist-Df5g09Pz.js";import"./checkbox-Dj6NJVxR.js";import"./index-BxwQjuZr.js";const Y=[{title:"Home",href:"/admin/dashboard"},{title:"Agents",href:"/admin/agents"}];function ue(){const{agents:w}=v().props,[a,m]=h.useState(""),[c,i]=h.useState(null),[t,x]=h.useState(null),A=w.filter(s=>s.firstname.toLowerCase().includes(a.toLowerCase())||s.lastname.toLowerCase().includes(a.toLowerCase())||s.email&&s.email.toLowerCase().includes(a.toLowerCase())),b=s=>{o.post(route("admin.agents.makeUser",s),{},{onSuccess:()=>{d.success("Portal user created"),o.reload({only:["agents"]})},onError:()=>d.error("Failed to create user")})},D=()=>{c!==null&&(o.delete(route("admin.agents.destroy",c),{},{onSuccess:()=>{d.success("Agent deleted"),o.reload({only:["agents"]})},onError:()=>d.error("Failed to delete agent")}),i(null))};return e.jsxs(y,{breadcrumbs:Y,children:[e.jsx(k,{title:"Agents"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx(_,{placeholder:"Search by name or email",className:"w-full md:w-1/3",value:a,onChange:s=>m(s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(r,{variant:"outline",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"All"]})}),e.jsx(F,{children:e.jsx(M,{onClick:()=>m(""),children:"All"})})]}),e.jsx(j,{href:route("admin.agents.create"),children:e.jsx(r,{children:"Add Agent"})})]})]}),e.jsxs(N,{children:[e.jsx(T,{children:e.jsx(L,{children:"Agents"})}),e.jsx(S,{children:e.jsxs(E,{children:[e.jsx(I,{children:e.jsxs(u,{children:[e.jsx(n,{children:"ID"}),e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Phone"}),e.jsx(n,{children:"User?"}),e.jsx(n,{children:"Upline"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(U,{children:A.map(s=>e.jsxs(u,{children:[e.jsx(l,{children:s.agent_id}),e.jsxs(l,{children:[s.firstname," ",s.lastname]}),e.jsx(l,{children:s.email}),e.jsx(l,{children:s.phone??"N/A"}),e.jsx(l,{children:s.user_id?e.jsx(O,{className:"h-5 w-5 text-green-500"}):e.jsx(r,{size:"icon",variant:"outline",title:"Create user",onClick:()=>b(s.agent_id),children:e.jsx(R,{className:"h-5 w-5"})})}),e.jsx(l,{children:s.upline?`${s.upline.firstname} ${s.upline.lastname}`:"Direct"}),e.jsxs(l,{className:"flex gap-2",children:[e.jsx(j,{href:route("admin.agents.overview",{agent:s.agent_id}),children:e.jsx(r,{variant:"ghost",title:"View",children:e.jsx(z,{className:"h-5 w-5 text-gray-500"})})}),e.jsx(r,{variant:"ghost",title:"Checklist",onClick:()=>x(s),children:e.jsx(K,{className:"h-5 w-5 text-gray-500"})}),e.jsx(r,{variant:"ghost",title:"Delete",onClick:()=>i(s.agent_id),children:e.jsx(V,{className:"h-5 w-5 text-red-500"})})]})]},s.agent_id))})]})})]})]}),e.jsx(p,{open:c!==null,onOpenChange:()=>i(null),children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(C,{children:"Delete Agent?"})}),e.jsx("p",{children:"Are you sure you want to permanently delete this agent?"}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(r,{variant:"destructive",onClick:D,children:"Yes, delete"}),e.jsx(r,{onClick:()=>i(null),children:"Cancel"})]})]})}),e.jsx(p,{open:!!t,onOpenChange:()=>x(null),children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(C,{children:["Checklist — Agent #",t==null?void 0:t.agent_id]})}),t&&e.jsx(P,{agentId:t.agent_id,checklist:t.checklist??[]})]})})]})}export{ue as default};
