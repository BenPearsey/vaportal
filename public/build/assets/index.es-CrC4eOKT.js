import{g as qt,d as jr,r as I,e as Pa,R as Y}from"./app-DUSEAaDk.js";/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function nn(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ae(r){var e,t;return nn(r)===!1?!1:(e=r.constructor,e===void 0?!0:(t=e.prototype,!(nn(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}var Iu=Symbol.for("immer-nothing"),un=Symbol.for("immer-draftable"),Pe=Symbol.for("immer-state");function Me(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var gr=Object.getPrototypeOf;function sr(r){return!!r&&!!r[Pe]}function ir(r){var e;return r?ku(r)||Array.isArray(r)||!!r[un]||!!((e=r.constructor)!=null&&e[un])||_r(r)||et(r):!1}var Sa=Object.prototype.constructor.toString();function ku(r){if(!r||typeof r!="object")return!1;const e=gr(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===Sa}function Kr(r,e){Qr(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,n)=>e(n,t,r))}function Qr(r){const e=r[Pe];return e?e.type_:Array.isArray(r)?1:_r(r)?2:et(r)?3:0}function xt(r,e){return Qr(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function Lu(r,e,t){const n=Qr(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function Ta(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function _r(r){return r instanceof Map}function et(r){return r instanceof Set}function er(r){return r.copy_||r.base_}function Pt(r,e){if(_r(r))return new Map(r);if(et(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=ku(r);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(r);delete n[Pe];let u=Reflect.ownKeys(n);for(let a=0;a<u.length;a++){const s=u[a],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:r[s]})}return Object.create(gr(r),n)}else{const n=gr(r);if(n!==null&&t)return{...r};const u=Object.create(n);return Object.assign(u,r)}}function Ht(r,e=!1){return rt(r)||sr(r)||!ir(r)||(Qr(r)>1&&(r.set=r.add=r.clear=r.delete=Ra),Object.freeze(r),e&&Object.entries(r).forEach(([t,n])=>Ht(n,!0))),r}function Ra(){Me(2)}function rt(r){return Object.isFrozen(r)}var ja={};function or(r){const e=ja[r];return e||Me(0,r),e}var wr;function zu(){return wr}function Na(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function an(r,e){e&&(or("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function St(r){Tt(r),r.drafts_.forEach(Ma),r.drafts_=null}function Tt(r){r===wr&&(wr=r.parent_)}function sn(r){return wr=Na(wr,r)}function Ma(r){const e=r[Pe];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function on(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[Pe].modified_&&(St(e),Me(4)),ir(r)&&(r=Ur(e,r),e.parent_||Gr(e,r)),e.patches_&&or("Patches").generateReplacementPatches_(t[Pe].base_,r,e.patches_,e.inversePatches_)):r=Ur(e,t,[]),St(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==Iu?r:void 0}function Ur(r,e,t){if(rt(e))return e;const n=e[Pe];if(!n)return Kr(e,(u,a)=>ln(r,n,e,u,a,t)),e;if(n.scope_!==r)return e;if(!n.modified_)return Gr(r,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const u=n.copy_;let a=u,s=!1;n.type_===3&&(a=new Set(u),u.clear(),s=!0),Kr(a,(l,c)=>ln(r,n,u,l,c,t,s)),Gr(r,u,!1),t&&r.patches_&&or("Patches").generatePatches_(n,t,r.patches_,r.inversePatches_)}return n.copy_}function ln(r,e,t,n,u,a,s){if(sr(u)){const l=a&&e&&e.type_!==3&&!xt(e.assigned_,n)?a.concat(n):void 0,c=Ur(r,u,l);if(Lu(t,n,c),sr(c))r.canAutoFreeze_=!1;else return}else s&&t.add(u);if(ir(u)&&!rt(u)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;Ur(r,u),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&Gr(r,u)}}function Gr(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&Ht(e,t)}function Ia(r,e){const t=Array.isArray(r),n={type_:t?1:0,scope_:e?e.scope_:zu(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=n,a=Vt;t&&(u=[n],a=Or);const{revoke:s,proxy:l}=Proxy.revocable(u,a);return n.draft_=l,n.revoke_=s,l}var Vt={get(r,e){if(e===Pe)return r;const t=er(r);if(!xt(t,e))return ka(r,t,e);const n=t[e];return r.finalized_||!ir(n)?n:n===ut(r.base_,e)?(at(r),r.copy_[e]=jt(n,r)):n},has(r,e){return e in er(r)},ownKeys(r){return Reflect.ownKeys(er(r))},set(r,e,t){const n=$u(er(r),e);if(n!=null&&n.set)return n.set.call(r.draft_,t),!0;if(!r.modified_){const u=ut(er(r),e),a=u==null?void 0:u[Pe];if(a&&a.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(Ta(t,u)&&(t!==void 0||xt(r.base_,e)))return!0;at(r),Rt(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return ut(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,at(r),Rt(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=er(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){Me(11)},getPrototypeOf(r){return gr(r.base_)},setPrototypeOf(){Me(12)}},Or={};Kr(Vt,(r,e)=>{Or[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Or.deleteProperty=function(r,e){return Or.set.call(this,r,e,void 0)};Or.set=function(r,e,t){return Vt.set.call(this,r[0],e,t,r[0])};function ut(r,e){const t=r[Pe];return(t?er(t):r)[e]}function ka(r,e,t){var u;const n=$u(e,t);return n?"value"in n?n.value:(u=n.get)==null?void 0:u.call(r.draft_):void 0}function $u(r,e){if(!(e in r))return;let t=gr(r);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=gr(t)}}function Rt(r){r.modified_||(r.modified_=!0,r.parent_&&Rt(r.parent_))}function at(r){r.copy_||(r.copy_=Pt(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var La=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const s=this;return function(c=a,...f){return s.produce(c,v=>t.call(this,v,...f))}}typeof t!="function"&&Me(6),n!==void 0&&typeof n!="function"&&Me(7);let u;if(ir(e)){const a=sn(this),s=jt(e,void 0);let l=!0;try{u=t(s),l=!1}finally{l?St(a):Tt(a)}return an(a,n),on(u,a)}else if(!e||typeof e!="object"){if(u=t(e),u===void 0&&(u=e),u===Iu&&(u=void 0),this.autoFreeze_&&Ht(u,!0),n){const a=[],s=[];or("Patches").generateReplacementPatches_(e,u,a,s),n(a,s)}return u}else Me(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let n,u;return[this.produce(e,t,(s,l)=>{n=s,u=l}),n,u]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){ir(r)||Me(8),sr(r)&&(r=za(r));const e=sn(this),t=jt(r,void 0);return t[Pe].isManual_=!0,Tt(e),t}finishDraft(r,e){const t=r&&r[Pe];(!t||!t.isManual_)&&Me(9);const{scope_:n}=t;return an(n,e),on(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const u=e[t];if(u.path.length===0&&u.op==="replace"){r=u.value;break}}t>-1&&(e=e.slice(t+1));const n=or("Patches").applyPatches_;return sr(r)?n(r,e):this.produce(r,u=>n(u,e))}};function jt(r,e){const t=_r(r)?or("MapSet").proxyMap_(r,e):et(r)?or("MapSet").proxySet_(r,e):Ia(r,e);return(e?e.scope_:zu()).drafts_.push(t),t}function za(r){return sr(r)||Me(10,r),Wu(r)}function Wu(r){if(!ir(r)||rt(r))return r;const e=r[Pe];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Pt(r,e.scope_.immer_.useStrictShallowCopy_)}else t=Pt(r,!0);return Kr(t,(n,u)=>{Lu(t,n,Wu(u))}),e&&(e.finalized_=!1),t}var Se=new La,Kt=Se.produce;Se.produceWithPatches.bind(Se);Se.setAutoFreeze.bind(Se);Se.setUseStrictShallowCopy.bind(Se);Se.applyPatches.bind(Se);var fn=Se.createDraft.bind(Se),cn=Se.finishDraft.bind(Se),$a={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var u=D.transform(t,e,{affinity:n});r.current=u,u==null&&r.unref()}}},Wa={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var u=te.transform(t,e,{affinity:n});r.current=u,u==null&&r.unref()}}},qa={transform(r,e){var{current:t,affinity:n}=r;if(t!=null){var u=B.transform(t,e,{affinity:n});r.current=u,u==null&&r.unref()}}},Yr=new WeakMap,Xr=new WeakMap,Er=new WeakMap,qu=new WeakMap,vn=new WeakMap,dn=new WeakMap,Dn=new WeakMap,D={ancestors(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=D.levels(r,e);return t?n=n.slice(1):n=n.slice(0,-1),n},common(r,e){for(var t=[],n=0;n<r.length&&n<e.length;n++){var u=r[n],a=e[n];if(u!==a)break;t.push(u)}return t},compare(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++){if(r[n]<e[n])return-1;if(r[n]>e[n])return 1}return 0},endsAfter(r,e){var t=r.length-1,n=r.slice(0,t),u=e.slice(0,t),a=r[t],s=e[t];return D.equals(n,u)&&a>s},endsAt(r,e){var t=r.length,n=r.slice(0,t),u=e.slice(0,t);return D.equals(n,u)},endsBefore(r,e){var t=r.length-1,n=r.slice(0,t),u=e.slice(0,t),a=r[t],s=e[t];return D.equals(n,u)&&a<s},equals(r,e){return r.length===e.length&&r.every((t,n)=>t===e[n])},hasPrevious(r){return r[r.length-1]>0},isAfter(r,e){return D.compare(r,e)===1},isAncestor(r,e){return r.length<e.length&&D.compare(r,e)===0},isBefore(r,e){return D.compare(r,e)===-1},isChild(r,e){return r.length===e.length+1&&D.compare(r,e)===0},isCommon(r,e){return r.length<=e.length&&D.compare(r,e)===0},isDescendant(r,e){return r.length>e.length&&D.compare(r,e)===0},isParent(r,e){return r.length+1===e.length&&D.compare(r,e)===0},isPath(r){return Array.isArray(r)&&(r.length===0||typeof r[0]=="number")},isSibling(r,e){if(r.length!==e.length)return!1;var t=r.slice(0,-1),n=e.slice(0,-1),u=r[r.length-1],a=e[e.length-1];return u!==a&&D.equals(t,n)},levels(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,n=[],u=0;u<=r.length;u++)n.push(r.slice(0,u));return t&&n.reverse(),n},next(r){if(r.length===0)throw new Error("Cannot get the next path of a root path [".concat(r,"], because it has no next index."));var e=r[r.length-1];return r.slice(0,-1).concat(e+1)},operationCanTransformPath(r){switch(r.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(r){if(r.length===0)throw new Error("Cannot get the parent path of the root path [".concat(r,"]."));return r.slice(0,-1)},previous(r){if(r.length===0)throw new Error("Cannot get the previous path of a root path [".concat(r,"], because it has no previous index."));var e=r[r.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(r,"] because it would result in a negative index."));return r.slice(0,-1).concat(e-1)},relative(r,e){if(!D.isAncestor(e,r)&&!D.equals(r,e))throw new Error("Cannot get the relative path of [".concat(r,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return r.slice(e.length)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!r)return null;var n=[...r],{affinity:u="forward"}=t;if(r.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(D.equals(a,n)||D.endsBefore(a,n)||D.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(D.equals(s,n)||D.isAncestor(s,n))return null;D.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:l,position:c}=e;D.equals(l,n)||D.endsBefore(l,n)?n[l.length-1]-=1:D.isAncestor(l,n)&&(n[l.length-1]-=1,n[l.length]+=c);break}case"split_node":{var{path:f,position:v}=e;if(D.equals(f,n)){if(u==="forward")n[n.length-1]+=1;else if(u!=="backward")return null}else D.endsBefore(f,n)?n[f.length-1]+=1:D.isAncestor(f,n)&&r[f.length]>=v&&(n[f.length-1]+=1,n[f.length]-=v);break}case"move_node":{var{path:g,newPath:d}=e;if(D.equals(g,d))return n;if(D.isAncestor(g,n)||D.equals(g,n)){var C=d.slice();return D.endsBefore(g,d)&&g.length<d.length&&(C[g.length-1]-=1),C.concat(n.slice(g.length))}else D.isSibling(g,d)&&(D.isAncestor(d,n)||D.equals(d,n))?D.endsBefore(g,n)?n[g.length-1]-=1:n[g.length-1]+=1:D.endsBefore(d,n)||D.equals(d,n)||D.isAncestor(d,n)?(D.endsBefore(g,n)&&(n[g.length-1]-=1),n[d.length-1]+=1):D.endsBefore(g,n)&&(D.equals(d,n)&&(n[d.length-1]+=1),n[g.length-1]-=1);break}}return n}};function yr(r){"@babel/helpers - typeof";return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(r)}function Ha(r,e){if(yr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(yr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Va(r){var e=Ha(r,"string");return yr(e)==="symbol"?e:String(e)}function Oe(r,e,t){return e=Va(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function gn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function pr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ka=(r,e,t)=>{switch(t.type){case"insert_node":{var{path:n,node:u}=t,a=T.parent(r,n),s=n[n.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(s,0,u),e)for(var[l,c]of B.points(e))e[c]=te.transform(l,t);break}case"insert_text":{var{path:f,offset:v,text:g}=t;if(g.length===0)break;var d=T.leaf(r,f),C=d.text.slice(0,v),p=d.text.slice(v);if(d.text=C+g+p,e)for(var[h,i]of B.points(e))e[i]=te.transform(h,t);break}case"merge_node":{var{path:A}=t,E=T.get(r,A),F=D.previous(A),y=T.get(r,F),S=T.parent(r,A),V=A[A.length-1];if(q.isText(E)&&q.isText(y))y.text+=E.text;else if(!q.isText(E)&&!q.isText(y))y.children.push(...E.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(pe.stringify(E)," ").concat(pe.stringify(y)));if(S.children.splice(V,1),e)for(var[k,$]of B.points(e))e[$]=te.transform(k,t);break}case"move_node":{var{path:K,newPath:z}=t;if(D.isAncestor(K,z))throw new Error("Cannot move a path [".concat(K,"] to new path [").concat(z,"] because the destination is inside itself."));var M=T.get(r,K),b=T.parent(r,K),O=K[K.length-1];b.children.splice(O,1);var P=D.transform(K,t),R=T.get(r,D.parent(P)),_=P[P.length-1];if(R.children.splice(_,0,M),e)for(var[W,ue]of B.points(e))e[ue]=te.transform(W,t);break}case"remove_node":{var{path:ee}=t,ne=ee[ee.length-1],ie=T.parent(r,ee);if(ie.children.splice(ne,1),e)for(var[ae,re]of B.points(e)){var Be=te.transform(ae,t);if(e!=null&&Be!=null)e[re]=Be;else{var X=void 0,m=void 0;for(var[L,x]of T.texts(r))if(D.compare(x,ee)===-1)X=[L,x];else{m=[L,x];break}var j=!1;X&&m&&(D.equals(m[1],ee)?j=!D.hasPrevious(m[1]):j=D.common(X[1],ee).length<D.common(m[1],ee).length),X&&!j?(ae.path=X[1],ae.offset=X[0].text.length):m?(ae.path=m[1],ae.offset=0):e=null}}break}case"remove_text":{var{path:Q,offset:U,text:oe}=t;if(oe.length===0)break;var se=T.leaf(r,Q),J=se.text.slice(0,U),fe=se.text.slice(U+oe.length);if(se.text=J+fe,e)for(var[de,me]of B.points(e))e[me]=te.transform(de,t);break}case"set_node":{var{path:ce,properties:Ee,newProperties:Fe}=t;if(ce.length===0)throw new Error("Cannot set properties on the root node!");var ke=T.get(r,ce);for(var ve in Fe){if(ve==="children"||ve==="text")throw new Error('Cannot set the "'.concat(ve,'" property of nodes!'));var Re=Fe[ve];Re==null?delete ke[ve]:ke[ve]=Re}for(var je in Ee)Fe.hasOwnProperty(je)||delete ke[je];break}case"set_selection":{var{newProperties:le}=t;if(le==null)e=le;else{if(e==null){if(!B.isRange(le))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(pe.stringify(le)," when there is no current selection."));e=pr({},le)}for(var De in le){var Ue=le[De];if(Ue==null){if(De==="anchor"||De==="focus")throw new Error('Cannot remove the "'.concat(De,'" selection property'));delete e[De]}else e[De]=Ue}}break}case"split_node":{var{path:ye,position:Le,properties:_e}=t;if(ye.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ye,"] because the root node cannot be split."));var ze=T.get(r,ye),nt=T.parent(r,ye),mr=ye[ye.length-1],lr;if(q.isText(ze)){var Fa=ze.text.slice(0,Le),ba=ze.text.slice(Le);ze.text=Fa,lr=pr(pr({},_e),{},{text:ba})}else{var wa=ze.children.slice(0,Le),Oa=ze.children.slice(Le);ze.children=wa,lr=pr(pr({},_e),{},{children:Oa})}if(nt.children.splice(mr+1,0,lr),e)for(var[ya,xa]of B.points(e))e[xa]=te.transform(ya,t);break}}return e},Ua={transform(r,e){r.children=fn(r.children);var t=r.selection&&fn(r.selection);try{t=Ka(r,t,e)}finally{r.children=cn(r.children),t?r.selection=sr(t)?cn(t):t:r.selection=null}}},Ga={insertNodes(r,e,t){r.insertNodes(e,t)},liftNodes(r,e){r.liftNodes(e)},mergeNodes(r,e){r.mergeNodes(e)},moveNodes(r,e){r.moveNodes(e)},removeNodes(r,e){r.removeNodes(e)},setNodes(r,e,t){r.setNodes(e,t)},splitNodes(r,e){r.splitNodes(e)},unsetNodes(r,e,t){r.unsetNodes(e,t)},unwrapNodes(r,e){r.unwrapNodes(e)},wrapNodes(r,e,t){r.wrapNodes(e,t)}},Ya={collapse(r,e){r.collapse(e)},deselect(r){r.deselect()},move(r,e){r.move(e)},select(r,e){r.select(e)},setPoint(r,e,t){r.setPoint(e,t)},setSelection(r,e){r.setSelection(e)}},Hu=(r,e)=>{for(var t in r){var n=r[t],u=e[t];if(Ae(n)&&Ae(u)){if(!Hu(n,u))return!1}else if(Array.isArray(n)&&Array.isArray(u)){if(n.length!==u.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==u[a])return!1}else if(n!==u)return!1}for(var s in e)if(r[s]===void 0&&e[s]!==void 0)return!1;return!0};function Xa(r,e){if(r==null)return{};var t={},n=Object.keys(r),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Ke(r,e){if(r==null)return{};var t=Xa(r,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var Ja=["anchor","focus"];function hn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Za(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var B={edges(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=e,{anchor:n,focus:u}=r;return B.isBackward(r)===t?[n,u]:[u,n]},end(r){var[,e]=B.edges(r);return e},equals(r,e){return te.equals(r.anchor,e.anchor)&&te.equals(r.focus,e.focus)},surrounds(r,e){var t=B.intersection(r,e);return t?B.equals(t,e):!1},includes(r,e){if(B.isRange(e)){if(B.includes(r,e.anchor)||B.includes(r,e.focus))return!0;var[t,n]=B.edges(r),[u,a]=B.edges(e);return te.isBefore(t,u)&&te.isAfter(n,a)}var[s,l]=B.edges(r),c=!1,f=!1;return te.isPoint(e)?(c=te.compare(e,s)>=0,f=te.compare(e,l)<=0):(c=D.compare(e,s.path)>=0,f=D.compare(e,l.path)<=0),c&&f},intersection(r,e){var t=Ke(r,Ja),[n,u]=B.edges(r),[a,s]=B.edges(e),l=te.isBefore(n,a)?a:n,c=te.isBefore(u,s)?u:s;return te.isBefore(c,l)?null:Za({anchor:l,focus:c},t)},isBackward(r){var{anchor:e,focus:t}=r;return te.isAfter(e,t)},isCollapsed(r){var{anchor:e,focus:t}=r;return te.equals(e,t)},isExpanded(r){return!B.isCollapsed(r)},isForward(r){return!B.isBackward(r)},isRange(r){return Ae(r)&&te.isPoint(r.anchor)&&te.isPoint(r.focus)},*points(r){yield[r.anchor,"anchor"],yield[r.focus,"focus"]},start(r){var[e]=B.edges(r);return e},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Kt(r,n=>{if(n===null)return null;var{affinity:u="inward"}=t,a,s;if(u==="inward"){var l=B.isCollapsed(n);B.isForward(n)?(a="forward",s=l?a:"backward"):(a="backward",s=l?a:"forward")}else u==="outward"?B.isForward(n)?(a="backward",s="forward"):(a="forward",s="backward"):(a=u,s=u);var c=te.transform(n.anchor,e,{affinity:a}),f=te.transform(n.focus,e,{affinity:s});if(!c||!f)return null;n.anchor=c,n.focus=f})}},Cn=r=>Ae(r)&&T.isNodeList(r.children)&&!o.isEditor(r),H={isAncestor(r){return Ae(r)&&T.isNodeList(r.children)},isElement:Cn,isElementList(r){return Array.isArray(r)&&r.every(e=>H.isElement(e))},isElementProps(r){return r.children!==void 0},isElementType:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Cn(e)&&e[n]===t},matches(r,e){for(var t in e)if(t!=="children"&&r[t]!==e[t])return!1;return!0}},Qa=["children"],_a=["text"],mn=new WeakMap,T={ancestor(r,e){var t=T.get(r,e);if(q.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(pe.stringify(t)));return t},ancestors(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of D.ancestors(e,t)){var u=T.ancestor(r,n),a=[u,n];yield a}}()},child(r,e){if(q.isText(r))throw new Error("Cannot get the child of a text node: ".concat(pe.stringify(r)));var t=r.children[e];if(t==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(pe.stringify(r)));return t},children(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:n=!1}=t,u=T.ancestor(r,e),{children:a}=u,s=n?a.length-1:0;n?s>=0:s<a.length;){var l=T.child(u,s),c=e.concat(s);yield[l,c],s=n?s-1:s+1}}()},common(r,e,t){var n=D.common(e,t),u=T.get(r,n);return[u,n]},descendant(r,e){var t=T.get(r,e);if(o.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(pe.stringify(t)));return t},descendants(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of T.nodes(r,e))n.length!==0&&(yield[t,n])}()},elements(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of T.nodes(r,e))H.isElement(t)&&(yield[t,n])}()},extractProps(r){if(H.isAncestor(r)){var e=Ke(r,Qa);return e}else{var e=Ke(r,_a);return e}},first(r,e){for(var t=e.slice(),n=T.get(r,t);n&&!(q.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(r,e){if(q.isText(r))throw new Error("Cannot get a fragment starting from a root text node: ".concat(pe.stringify(r)));var t=Kt({children:r.children},n=>{var[u,a]=B.edges(e),s=T.nodes(n,{reverse:!0,pass:d=>{var[,C]=d;return!B.includes(e,C)}});for(var[,l]of s){if(!B.includes(e,l)){var c=T.parent(n,l),f=l[l.length-1];c.children.splice(f,1)}if(D.equals(l,a.path)){var v=T.leaf(n,l);v.text=v.text.slice(0,a.offset)}if(D.equals(l,u.path)){var g=T.leaf(n,l);g.text=g.text.slice(u.offset)}}o.isEditor(n)&&(n.selection=null)});return t.children},get(r,e){var t=T.getIf(r,e);if(t===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(pe.stringify(r)));return t},getIf(r,e){for(var t=r,n=0;n<e.length;n++){var u=e[n];if(q.isText(t)||!t.children[u])return;t=t.children[u]}return t},has(r,e){for(var t=r,n=0;n<e.length;n++){var u=e[n];if(q.isText(t)||!t.children[u])return!1;t=t.children[u]}return!0},isNode(r){return q.isText(r)||H.isElement(r)||o.isEditor(r)},isNodeList(r){if(!Array.isArray(r))return!1;var e=mn.get(r);if(e!==void 0)return e;var t=r.every(n=>T.isNode(n));return mn.set(r,t),t},last(r,e){for(var t=e.slice(),n=T.get(r,t);n&&!(q.isText(n)||n.children.length===0);){var u=n.children.length-1;n=n.children[u],t.push(u)}return[n,t]},leaf(r,e){var t=T.get(r,e);if(!q.isText(t))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(pe.stringify(t)));return t},levels(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var n of D.levels(e,t)){var u=T.get(r,n);yield[u,n]}}()},matches(r,e){return H.isElement(r)&&H.isElementProps(e)&&H.matches(r,e)||q.isText(r)&&q.isTextProps(e)&&q.matches(r,e)},nodes(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:t,reverse:n=!1}=e,{from:u=[],to:a}=e,s=new Set,l=[],c=r;!(a&&(n?D.isBefore(l,a):D.isAfter(l,a)));){if(s.has(c)||(yield[c,l]),!s.has(c)&&!q.isText(c)&&c.children.length!==0&&(t==null||t([c,l])===!1)){s.add(c);var f=n?c.children.length-1:0;D.isAncestor(l,u)&&(f=u[l.length]),l=l.concat(f),c=T.get(r,l);continue}if(l.length===0)break;if(!n){var v=D.next(l);if(T.has(r,v)){l=v,c=T.get(r,l);continue}}if(n&&l[l.length-1]!==0){var g=D.previous(l);l=g,c=T.get(r,l);continue}l=D.parent(l),c=T.get(r,l),s.add(c)}}()},parent(r,e){var t=D.parent(e),n=T.get(r,t);if(q.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(r){return q.isText(r)?r.text:r.children.map(T.string).join("")},texts(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[t,n]of T.nodes(r,e))q.isText(t)&&(yield[t,n])}()}};function pn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function ge(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Br={isNodeOperation(r){return Br.isOperation(r)&&r.type.endsWith("_node")},isOperation(r){if(!Ae(r))return!1;switch(r.type){case"insert_node":return D.isPath(r.path)&&T.isNode(r.node);case"insert_text":return typeof r.offset=="number"&&typeof r.text=="string"&&D.isPath(r.path);case"merge_node":return typeof r.position=="number"&&D.isPath(r.path)&&Ae(r.properties);case"move_node":return D.isPath(r.path)&&D.isPath(r.newPath);case"remove_node":return D.isPath(r.path)&&T.isNode(r.node);case"remove_text":return typeof r.offset=="number"&&typeof r.text=="string"&&D.isPath(r.path);case"set_node":return D.isPath(r.path)&&Ae(r.properties)&&Ae(r.newProperties);case"set_selection":return r.properties===null&&B.isRange(r.newProperties)||r.newProperties===null&&B.isRange(r.properties)||Ae(r.properties)&&Ae(r.newProperties);case"split_node":return D.isPath(r.path)&&typeof r.position=="number"&&Ae(r.properties);default:return!1}},isOperationList(r){return Array.isArray(r)&&r.every(e=>Br.isOperation(e))},isSelectionOperation(r){return Br.isOperation(r)&&r.type.endsWith("_selection")},isTextOperation(r){return Br.isOperation(r)&&r.type.endsWith("_text")},inverse(r){switch(r.type){case"insert_node":return ge(ge({},r),{},{type:"remove_node"});case"insert_text":return ge(ge({},r),{},{type:"remove_text"});case"merge_node":return ge(ge({},r),{},{type:"split_node",path:D.previous(r.path)});case"move_node":{var{newPath:e,path:t}=r;if(D.equals(e,t))return r;if(D.isSibling(t,e))return ge(ge({},r),{},{path:e,newPath:t});var n=D.transform(t,r),u=D.transform(D.next(t),r);return ge(ge({},r),{},{path:n,newPath:u})}case"remove_node":return ge(ge({},r),{},{type:"insert_node"});case"remove_text":return ge(ge({},r),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=r;return ge(ge({},r),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:l,newProperties:c}=r;return l==null?ge(ge({},r),{},{properties:c,newProperties:null}):c==null?ge(ge({},r),{},{properties:null,newProperties:l}):ge(ge({},r),{},{properties:c,newProperties:l})}case"split_node":return ge(ge({},r),{},{type:"merge_node",path:D.next(r.path)})}}},Bn=new WeakMap,es=r=>{var e=Bn.get(r);if(e!==void 0)return e;if(!Ae(r))return!1;var t=typeof r.addMark=="function"&&typeof r.apply=="function"&&typeof r.deleteFragment=="function"&&typeof r.insertBreak=="function"&&typeof r.insertSoftBreak=="function"&&typeof r.insertFragment=="function"&&typeof r.insertNode=="function"&&typeof r.insertText=="function"&&typeof r.isElementReadOnly=="function"&&typeof r.isInline=="function"&&typeof r.isSelectable=="function"&&typeof r.isVoid=="function"&&typeof r.normalizeNode=="function"&&typeof r.onChange=="function"&&typeof r.removeMark=="function"&&typeof r.getDirtyPaths=="function"&&(r.marks===null||Ae(r.marks))&&(r.selection===null||B.isRange(r.selection))&&T.isNodeList(r.children)&&Br.isOperationList(r.operations);return Bn.set(r,t),t},o={above(r,e){return r.above(e)},addMark(r,e,t){r.addMark(e,t)},after(r,e,t){return r.after(e,t)},before(r,e,t){return r.before(e,t)},deleteBackward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteBackward(t)},deleteForward(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=e;r.deleteForward(t)},deleteFragment(r,e){r.deleteFragment(e)},edges(r,e){return r.edges(e)},elementReadOnly(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.elementReadOnly(e)},end(r,e){return r.end(e)},first(r,e){return r.first(e)},fragment(r,e){return r.fragment(e)},hasBlocks(r,e){return r.hasBlocks(e)},hasInlines(r,e){return r.hasInlines(e)},hasPath(r,e){return r.hasPath(e)},hasTexts(r,e){return r.hasTexts(e)},insertBreak(r){r.insertBreak()},insertFragment(r,e,t){r.insertFragment(e,t)},insertNode(r,e){r.insertNode(e)},insertSoftBreak(r){r.insertSoftBreak()},insertText(r,e){r.insertText(e)},isBlock(r,e){return r.isBlock(e)},isEdge(r,e,t){return r.isEdge(e,t)},isEditor(r){return es(r)},isElementReadOnly(r,e){return r.isElementReadOnly(e)},isEmpty(r,e){return r.isEmpty(e)},isEnd(r,e,t){return r.isEnd(e,t)},isInline(r,e){return r.isInline(e)},isNormalizing(r){return r.isNormalizing()},isSelectable(r,e){return r.isSelectable(e)},isStart(r,e,t){return r.isStart(e,t)},isVoid(r,e){return r.isVoid(e)},last(r,e){return r.last(e)},leaf(r,e,t){return r.leaf(e,t)},levels(r,e){return r.levels(e)},marks(r){return r.getMarks()},next(r,e){return r.next(e)},node(r,e,t){return r.node(e,t)},nodes(r,e){return r.nodes(e)},normalize(r,e){r.normalize(e)},parent(r,e,t){return r.parent(e,t)},path(r,e,t){return r.path(e,t)},pathRef(r,e,t){return r.pathRef(e,t)},pathRefs(r){return r.pathRefs()},point(r,e,t){return r.point(e,t)},pointRef(r,e,t){return r.pointRef(e,t)},pointRefs(r){return r.pointRefs()},positions(r,e){return r.positions(e)},previous(r,e){return r.previous(e)},range(r,e,t){return r.range(e,t)},rangeRef(r,e,t){return r.rangeRef(e,t)},rangeRefs(r){return r.rangeRefs()},removeMark(r,e){r.removeMark(e)},setNormalizing(r,e){r.setNormalizing(e)},start(r,e){return r.start(e)},string(r,e,t){return r.string(e,t)},unhangRange(r,e,t){return r.unhangRange(e,t)},void(r,e){return r.void(e)},withoutNormalizing(r,e){r.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(r,e,t)=>r.shouldMergeNodesRemovePrevNode(e,t)},rs={isSpan(r){return Array.isArray(r)&&r.length===2&&r.every(D.isPath)}};function En(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function An(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?En(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):En(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var te={compare(r,e){var t=D.compare(r.path,e.path);return t===0?r.offset<e.offset?-1:r.offset>e.offset?1:0:t},isAfter(r,e){return te.compare(r,e)===1},isBefore(r,e){return te.compare(r,e)===-1},equals(r,e){return r.offset===e.offset&&D.equals(r.path,e.path)},isPoint(r){return Ae(r)&&typeof r.offset=="number"&&D.isPath(r.path)},transform(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Kt(r,n=>{if(n===null)return null;var{affinity:u="forward"}=t,{path:a,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=D.transform(a,e,t);break}case"insert_text":{D.equals(e.path,a)&&(e.offset<s||e.offset===s&&u==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{D.equals(e.path,a)&&(n.offset+=e.position),n.path=D.transform(a,e,t);break}case"remove_text":{D.equals(e.path,a)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(D.equals(e.path,a)||D.isAncestor(e.path,a))return null;n.path=D.transform(a,e,t);break}case"split_node":{if(D.equals(e.path,a)){if(e.position===s&&u==null)return null;(e.position<s||e.position===s&&u==="forward")&&(n.offset-=e.position,n.path=D.transform(a,e,An(An({},t),{},{affinity:"forward"})))}else n.path=D.transform(a,e,t);break}}})}},Fn=void 0,pe={setScrubber(r){Fn=r},stringify(r){return JSON.stringify(r,Fn)}},ts=["text"],ns=["anchor","focus","merge"];function bn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function He(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var q={equals(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function u(a){var s=Ke(a,ts);return s}return Hu(n?u(r):r,n?u(e):e)},isText(r){return Ae(r)&&typeof r.text=="string"},isTextList(r){return Array.isArray(r)&&r.every(e=>q.isText(e))},isTextProps(r){return r.text!==void 0},matches(r,e){for(var t in e)if(t!=="text"&&(!r.hasOwnProperty(t)||r[t]!==e[t]))return!1;return!0},decorations(r,e){var t=[He({},r)];for(var n of e){var{anchor:u,focus:a,merge:s}=n,l=Ke(n,ns),[c,f]=B.edges(n),v=[],g=0,d=c.offset,C=f.offset,p=s??Object.assign;for(var h of t){var{length:i}=h.text,A=g;if(g+=i,d<=A&&g<=C){p(h,l),v.push(h);continue}if(d!==C&&(d===g||C===A)||d>g||C<A||C===A&&A!==0){v.push(h);continue}var E=h,F=void 0,y=void 0;if(C<g){var S=C-A;y=He(He({},E),{},{text:E.text.slice(S)}),E=He(He({},E),{},{text:E.text.slice(0,S)})}if(d>A){var V=d-A;F=He(He({},E),{},{text:E.text.slice(0,V)}),E=He(He({},E),{},{text:E.text.slice(V)})}p(E,l),F&&v.push(F),v.push(E),y&&v.push(y)}t=v}return t}},Ut=r=>r.selection?r.selection:r.children.length>0?o.end(r,[]):[0],Cr=(r,e)=>{var[t]=o.node(r,e);return n=>n===t},Gt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!t,u=t?ls(e):e,a=G.None,s=G.None,l=0,c=null,f=null;for(var v of u){var g=v.codePointAt(0);if(!g)break;var d=Es(v,g);if([a,s]=n?[s,d]:[d,a],cr(a,G.ZWJ)&&cr(s,G.ExtPict)&&(n?c=wn(e.substring(0,l)):c=wn(e.substring(0,e.length-l)),!c)||cr(a,G.RI)&&cr(s,G.RI)&&(f!==null?f=!f:n?f=!0:f=Os(e.substring(0,e.length-l)),!f)||a!==G.None&&s!==G.None&&Fs(a,s))break;l+=v.length}return l||1},us=/\s/,as=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ss=/['\u2018\u2019]/,is=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,u=!1;e.length>0;){var a=Gt(e,t),[s,l]=Yt(e,a,t);if(os(s,l,t))u=!0,n+=a;else if(!u)n+=a;else break;e=l}return n},Yt=(r,e,t)=>{if(t){var n=r.length-e;return[r.slice(n,r.length),r.slice(0,n)]}return[r.slice(0,e),r.slice(e)]},os=function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(us.test(e))return!1;if(ss.test(e)){var u=Gt(t,n),[a,s]=Yt(t,u,n);if(r(a,s,n))return!0}return!as.test(e)},ls=function*(e){for(var t=e.length-1,n=0;n<e.length;n++){var u=e.charAt(t-n);if(cs(u.charCodeAt(0))){var a=e.charAt(t-n-1);if(fs(a.charCodeAt(0))){yield a+u,n++;continue}}yield u}},fs=r=>r>=55296&&r<=56319,cs=r=>r>=56320&&r<=57343,G;(function(r){r[r.None=0]="None",r[r.Extend=1]="Extend",r[r.ZWJ=2]="ZWJ",r[r.RI=4]="RI",r[r.Prepend=8]="Prepend",r[r.SpacingMark=16]="SpacingMark",r[r.L=32]="L",r[r.V=64]="V",r[r.T=128]="T",r[r.LV=256]="LV",r[r.LVT=512]="LVT",r[r.ExtPict=1024]="ExtPict",r[r.Any=2048]="Any"})(G||(G={}));var vs=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,ds=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Ds=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,gs=/^[\u1100-\u115F\uA960-\uA97C]$/,hs=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Cs=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,ms=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,ps=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Bs=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Es=(r,e)=>{var t=G.Any;return r.search(vs)!==-1&&(t|=G.Extend),e===8205&&(t|=G.ZWJ),e>=127462&&e<=127487&&(t|=G.RI),r.search(ds)!==-1&&(t|=G.Prepend),r.search(Ds)!==-1&&(t|=G.SpacingMark),r.search(gs)!==-1&&(t|=G.L),r.search(hs)!==-1&&(t|=G.V),r.search(Cs)!==-1&&(t|=G.T),r.search(ms)!==-1&&(t|=G.LV),r.search(ps)!==-1&&(t|=G.LVT),r.search(Bs)!==-1&&(t|=G.ExtPict),t};function cr(r,e){return(r&e)!==0}var As=[[G.L,G.L|G.V|G.LV|G.LVT],[G.LV|G.V,G.V|G.T],[G.LVT|G.T,G.T],[G.Any,G.Extend|G.ZWJ],[G.Any,G.SpacingMark],[G.Prepend,G.Any],[G.ZWJ,G.ExtPict],[G.RI,G.RI]];function Fs(r,e){return As.findIndex(t=>cr(r,t[0])&&cr(e,t[1]))===-1}var bs=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,wn=r=>r.search(bs)!==-1,ws=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Os=r=>{var e=r.match(ws);if(e===null)return!1;var t=e[0].length/2;return t%2===1},ys={delete(r,e){r.delete(e)},insertFragment(r,e,t){r.insertFragment(e,t)},insertText(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(r,()=>{var{voids:n=!1}=t,{at:u=Ut(r)}=t;if(D.isPath(u)&&(u=o.range(r,u)),B.isRange(u))if(B.isCollapsed(u))u=u.anchor;else{var a=B.end(u);if(!n&&o.void(r,{at:a}))return;var s=B.start(u),l=o.pointRef(r,s),c=o.pointRef(r,a);w.delete(r,{at:u,voids:n});var f=l.unref(),v=c.unref();u=f||v,w.setSelection(r,{anchor:u,focus:u})}if(!(!n&&o.void(r,{at:u})||o.elementReadOnly(r,{at:u}))){var{path:g,offset:d}=u;e.length>0&&r.apply({type:"insert_text",path:g,offset:d,text:e})}})}};function On(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Nr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?On(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):On(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var w=Nr(Nr(Nr(Nr({},Ua),Ga),Ya),ys),Wr=new WeakMap,xs=r=>Wr.get(r)||!1,Ps=(r,e,t)=>{var n=Wr.get(r)||!1;Wr.set(r,!0);try{e(),t()}finally{Wr.set(r,n)}};function Vu(r,e,t){var n=Yr.get(r)||[],u=Xr.get(r)||new Set,a,s,l=g=>{if(g){var d=g.join(",");s.has(d)||(s.add(d),a.push(g))}};if(t){a=[],s=new Set;for(var c of n){var f=t(c);l(f)}}else a=n,s=u;for(var v of e)l(v);Yr.set(r,a),Xr.set(r,s)}var Ss=(r,e)=>{for(var t of o.pathRefs(r))$a.transform(t,e);for(var n of o.pointRefs(r))Wa.transform(n,e);for(var u of o.rangeRefs(r))qa.transform(u,e);if(!xs(r)){var a=D.operationCanTransformPath(e)?s=>D.transform(s,e):void 0;Vu(r,r.getDirtyPaths(e),a)}w.transform(r,e),r.operations.push(e),o.normalize(r,{operation:e}),e.type==="set_selection"&&(r.marks=null),Er.get(r)||(Er.set(r,!0),Promise.resolve().then(()=>{Er.set(r,!1),r.onChange({operation:e}),r.operations=[]}))},Ts=(r,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=e;return D.levels(t)}case"insert_node":{var{node:n,path:u}=e,a=D.levels(u),s=q.isText(n)?[]:Array.from(T.nodes(n),z=>{var[,M]=z;return u.concat(M)});return[...a,...s]}case"merge_node":{var{path:l}=e,c=D.ancestors(l),f=D.previous(l);return[...c,f]}case"move_node":{var{path:v,newPath:g}=e;if(D.equals(v,g))return[];var d=[],C=[];for(var p of D.ancestors(v)){var h=D.transform(p,e);d.push(h)}for(var i of D.ancestors(g)){var A=D.transform(i,e);C.push(A)}var E=C[C.length-1],F=g[g.length-1],y=E.concat(F);return[...d,...C,y]}case"remove_node":{var{path:S}=e,V=D.ancestors(S);return[...V]}case"split_node":{var{path:k}=e,$=D.levels(k),K=D.next(k);return[...$,K]}default:return[]}},Rs=r=>{var{selection:e}=r;return e?T.fragment(r,e):[]},js=(r,e)=>{var[t,n]=e;if(!q.isText(t)){if(H.isElement(t)&&t.children.length===0){var u={text:""};w.insertNodes(r,u,{at:n.concat(0),voids:!0});return}for(var a=o.isEditor(t)?!1:H.isElement(t)&&(r.isInline(t)||t.children.length===0||q.isText(t.children[0])||r.isInline(t.children[0])),s=0,l=0;l<t.children.length;l++,s++){var c=T.get(r,n);if(!q.isText(c)){var f=c.children[s],v=c.children[s-1],g=l===t.children.length-1,d=q.isText(f)||H.isElement(f)&&r.isInline(f);if(d!==a)d?w.removeNodes(r,{at:n.concat(s),voids:!0}):w.unwrapNodes(r,{at:n.concat(s),voids:!0}),s--;else if(H.isElement(f)){if(r.isInline(f)){if(v==null||!q.isText(v)){var C={text:""};w.insertNodes(r,C,{at:n.concat(s),voids:!0}),s++}else if(g){var p={text:""};w.insertNodes(r,p,{at:n.concat(s+1),voids:!0}),s++}}}else{if(!q.isText(f)&&!("children"in f)){var h=f;h.children=[]}v!=null&&q.isText(v)&&(q.equals(f,v,{loose:!0})?(w.mergeNodes(r,{at:n.concat(s),voids:!0}),s--):v.text===""?(w.removeNodes(r,{at:n.concat(s-1),voids:!0}),s--):f.text===""&&(w.removeNodes(r,{at:n.concat(s),voids:!0}),s--))}}}}},Ns=(r,e)=>{var{iteration:t,initialDirtyPathsLength:n}=e,u=n*42;if(t>u)throw new Error("Could not completely normalize the editor after ".concat(u," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Ms=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:u="lowest",at:a=e.selection,match:s}=t;if(a){var l=o.path(e,a),c=u==="lowest";for(var[f,v]of o.levels(e,{at:l,voids:n,match:s,reverse:c}))if(!q.isText(f)){if(B.isRange(a)){if(D.isAncestor(v,a.anchor.path)&&D.isAncestor(v,a.focus.path))return[f,v]}else if(!D.equals(l,v))return[f,v]}}};function yn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function xn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Is=(r,e,t)=>{var{selection:n}=r;if(n){var u=(g,d)=>{if(!q.isText(g))return!1;var[C,p]=o.parent(r,d);return!r.isVoid(C)||r.markableVoid(C)},a=B.isExpanded(n),s=!1;if(!a){var[l,c]=o.node(r,n);if(l&&u(l,c)){var[f]=o.parent(r,c);s=f&&r.markableVoid(f)}}if(a||s)w.setNodes(r,{[e]:t},{match:u,split:!0,voids:!0});else{var v=xn(xn({},o.marks(r)||{}),{},{[e]:t});r.marks=v,Er.get(r)||r.onChange()}}};function Pn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Sn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ks=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.point(e,t,{edge:"end"}),a=o.end(e,[]),s={anchor:u,focus:a},{distance:l=1}=n,c=0,f;for(var v of o.positions(e,Sn(Sn({},n),{},{at:s}))){if(c>l)break;c!==0&&(f=v),c++}return f};function Tn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Rn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ls=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.start(e,[]),a=o.point(e,t,{edge:"start"}),s={anchor:u,focus:a},{distance:l=1}=n,c=0,f;for(var v of o.positions(e,Rn(Rn({},n),{},{at:s,reverse:!0}))){if(c>l)break;c!==0&&(f=v),c++}return f},zs=(r,e)=>{var{selection:t}=r;t&&B.isCollapsed(t)&&w.delete(r,{unit:e,reverse:!0})},$s=(r,e)=>{var{selection:t}=r;t&&B.isCollapsed(t)&&w.delete(r,{unit:e})},Ws=function(e){var{direction:t="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&B.isExpanded(n)&&w.delete(e,{reverse:t==="backward"})},qs=(r,e)=>[o.start(r,e),o.end(r,e)];function jn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Nn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Hs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,Nn(Nn({},t),{},{match:n=>H.isElement(n)&&o.isElementReadOnly(e,n)}))},Vs=(r,e)=>o.point(r,e,{edge:"end"}),Ks=(r,e)=>{var t=o.path(r,e,{edge:"start"});return o.node(r,t)},Us=(r,e)=>{var t=o.range(r,e);return T.fragment(r,t)};function Mn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function In(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Gs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,In(In({},t),{},{match:n=>H.isElement(n)&&o.isVoid(e,n)}))},Ys=(r,e)=>e.children.some(t=>H.isElement(t)&&o.isBlock(r,t)),Xs=(r,e)=>e.children.some(t=>q.isText(t)||o.isInline(r,t)),Js=(r,e)=>T.has(r,e),Zs=(r,e)=>e.children.every(t=>q.isText(t)),Qs=r=>{w.splitNodes(r,{always:!0})},_s=(r,e,t)=>{w.insertNodes(r,e,t)},ei=r=>{w.splitNodes(r,{always:!0})};function kn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function ri(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ti=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u,marks:a}=e;if(u){if(a){var s=ri({text:t},a);w.insertNodes(e,s,{at:n.at,voids:n.voids})}else w.insertText(e,t,n);e.marks=null}},ni=(r,e)=>!r.isInline(e),ui=(r,e,t)=>o.isStart(r,e,t)||o.isEnd(r,e,t),ai=(r,e)=>{var{children:t}=e,[n]=t;return t.length===0||t.length===1&&q.isText(n)&&n.text===""&&!r.isVoid(e)},si=(r,e,t)=>{var n=o.end(r,t);return te.equals(e,n)},ii=r=>{var e=qu.get(r);return e===void 0?!0:e},oi=(r,e,t)=>{if(e.offset!==0)return!1;var n=o.start(r,t);return te.equals(e,n)},li=(r,e)=>{var t=o.path(r,e,{edge:"end"});return o.node(r,t)},fi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,t,n),a=T.leaf(e,u);return[a,u]};function ci(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,reverse:n=!1,voids:u=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!t){var s=[],l=o.path(r,t);for(var[c,f]of T.levels(r,l))if(a(c,f)&&(s.push([c,f]),!u&&H.isElement(c)&&o.isVoid(r,c)))break;n&&s.reverse(),yield*s}}()}var vi=["text"],di=["text"],Di=function(e){var{marks:t,selection:n}=e;if(!n)return null;var{anchor:u,focus:a}=n;if(t)return t;if(B.isExpanded(n)){var s=B.isBackward(n);s&&([a,u]=[u,a]);var l=o.isEnd(e,u,u.path);if(l){var c=o.after(e,u);c&&(u=c)}var[f]=o.nodes(e,{match:q.isText,at:{anchor:u,focus:a}});if(f){var[v]=f,g=Ke(v,vi);return g}else return{}}var{path:d}=u,[C]=o.leaf(e,d);if(u.offset===0){var p=o.previous(e,{at:d,match:q.isText}),h=o.above(e,{match:S=>H.isElement(S)&&o.isVoid(e,S)&&e.markableVoid(S)});if(!h){var i=o.above(e,{match:S=>H.isElement(S)&&o.isBlock(e,S)});if(p&&i){var[A,E]=p,[,F]=i;D.isAncestor(F,E)&&(C=A)}}}var y=Ke(C,di);return y},gi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:u=!1}=t,{match:a,at:s=e.selection}=t;if(s){var l=o.after(e,s,{voids:u});if(l){var[,c]=o.last(e,[]),f=[l.path,c];if(D.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(D.isPath(s)){var[v]=o.parent(e,s);a=d=>v.children.includes(d)}else a=()=>!0;var[g]=o.nodes(e,{at:f,match:a,mode:n,voids:u});return g}}},hi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,t,n),a=T.get(e,u);return[a,u]};function Ci(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,mode:n="all",universal:u=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:l=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!t){var f,v;if(rs.isSpan(t))f=t[0],v=t[1];else{var g=o.path(r,t,{edge:"start"}),d=o.path(r,t,{edge:"end"});f=a?d:g,v=a?g:d}var C=T.nodes(r,{reverse:a,from:f,to:v,pass:y=>{var[S]=y;return H.isElement(S)?!!(!s&&(o.isVoid(r,S)||o.isElementReadOnly(r,S))||l&&!o.isSelectable(r,S)):!1}}),p=[],h;for(var[i,A]of C)if(!(l&&H.isElement(i)&&!o.isSelectable(r,i))){var E=h&&D.compare(A,h[1])===0;if(!(n==="highest"&&E)){if(!c(i,A)){if(u&&!E&&q.isText(i))return;continue}if(n==="lowest"&&E){h=[i,A];continue}var F=n==="lowest"?h:[i,A];F&&(u?p.push(F):yield F),h=[i,A]}}n==="lowest"&&h&&(u?p.push(h):yield h),u&&(yield*p)}}()}var mi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:u}=t,a=v=>Yr.get(v)||[],s=v=>Xr.get(v)||new Set,l=v=>{var g=a(v).pop(),d=g.join(",");return s(v).delete(d),g};if(o.isNormalizing(e)){if(n){var c=Array.from(T.nodes(e),v=>{var[,g]=v;return g}),f=new Set(c.map(v=>v.join(",")));Yr.set(e,c),Xr.set(e,f)}a(e).length!==0&&o.withoutNormalizing(e,()=>{for(var v of a(e))if(T.has(e,v)){var g=o.node(e,v),[d,C]=g;H.isElement(d)&&d.children.length===0&&e.normalizeNode(g,{operation:u})}for(var p=a(e),h=p.length,i=0;p.length!==0;){if(!e.shouldNormalize({dirtyPaths:p,iteration:i,initialDirtyPathsLength:h,operation:u}))return;var A=l(e);if(T.has(e,A)){var E=o.node(e,A);e.normalizeNode(E,{operation:u})}i++,p=a(e)}})}},pi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,t,n),a=D.parent(u),s=o.node(e,a);return s},Bi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:t,affinity:u,unref(){var{current:l}=a,c=o.pathRefs(e);return c.delete(a),a.current=null,l}},s=o.pathRefs(e);return s.add(a),a},Ei=r=>{var e=vn.get(r);return e||(e=new Set,vn.set(r,e)),e},Ai=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:u,edge:a}=n;if(D.isPath(t)){if(a==="start"){var[,s]=T.first(e,t);t=s}else if(a==="end"){var[,l]=T.last(e,t);t=l}}return B.isRange(t)&&(a==="start"?t=B.start(t):a==="end"?t=B.end(t):t=D.common(t.anchor.path,t.focus.path)),te.isPoint(t)&&(t=t.path),u!=null&&(t=t.slice(0,u)),t},Fi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:t,affinity:u,unref(){var{current:l}=a,c=o.pointRefs(e);return c.delete(a),a.current=null,l}},s=o.pointRefs(e);return s.add(a),a},bi=r=>{var e=dn.get(r);return e||(e=new Set,dn.set(r,e)),e},wi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:u="start"}=n;if(D.isPath(t)){var a;if(u==="end"){var[,s]=T.last(e,t);a=s}else{var[,l]=T.first(e,t);a=l}var c=T.get(e,a);if(!q.isText(c))throw new Error("Cannot get the ".concat(u," point in the node at path [").concat(t,"] because it has no ").concat(u," text node."));return{path:a,offset:u==="end"?c.text.length:0}}if(B.isRange(t)){var[f,v]=B.edges(t);return u==="start"?f:v}return t};function Oi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:t=r.selection,unit:n="offset",reverse:u=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!t)return;var l=o.range(r,t),[c,f]=B.edges(l),v=u?f:c,g=!1,d="",C=0,p=0,h=0;for(var[i,A]of o.nodes(r,{at:t,reverse:u,voids:a,ignoreNonSelectable:s})){if(H.isElement(i)){if(!a&&(r.isVoid(i)||r.isElementReadOnly(i))){yield o.start(r,A);continue}if(r.isInline(i))continue;if(o.hasInlines(r,i)){var E=D.isAncestor(A,f.path)?f:o.end(r,A),F=D.isAncestor(A,c.path)?c:o.start(r,A);d=o.string(r,{anchor:F,focus:E},{voids:a}),g=!0}}if(q.isText(i)){var y=D.equals(A,v.path);for(y?(p=u?v.offset:i.text.length-v.offset,h=v.offset):(p=i.text.length,h=u?p:0),(y||g||n==="offset")&&(yield{path:A,offset:h},g=!1);;){if(C===0){if(d==="")break;C=S(d,n,u),d=Yt(d,C,u)[1]}if(h=u?h-C:h+C,p=p-C,p<0){C=-p;break}C=0,yield{path:A,offset:h}}}}function S(V,k,$){return k==="character"?Gt(V,$):k==="word"?is(V,$):k==="line"||k==="block"?V.length:1}}()}var yi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:u=!1}=t,{match:a,at:s=e.selection}=t;if(s){var l=o.before(e,s,{voids:u});if(l){var[,c]=o.first(e,[]),f=[l.path,c];if(D.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(D.isPath(s)){var[v]=o.parent(e,s);a=d=>v.children.includes(d)}else a=()=>!0;var[g]=o.nodes(e,{reverse:!0,at:f,match:a,mode:n,voids:u});return g}}},xi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=n,a={current:t,affinity:u,unref(){var{current:l}=a,c=o.rangeRefs(e);return c.delete(a),a.current=null,l}},s=o.rangeRefs(e);return s.add(a),a},Pi=r=>{var e=Dn.get(r);return e||(e=new Set,Dn.set(r,e)),e},Si=(r,e,t)=>{if(B.isRange(e)&&!t)return e;var n=o.start(r,e),u=o.end(r,t||e);return{anchor:n,focus:u}};function Ln(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Ti(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ln(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ri=(r,e)=>{var{selection:t}=r;if(t){var n=(v,g)=>{if(!q.isText(v))return!1;var[d,C]=o.parent(r,g);return!r.isVoid(d)||r.markableVoid(d)},u=B.isExpanded(t),a=!1;if(!u){var[s,l]=o.node(r,t);if(s&&n(s,l)){var[c]=o.parent(r,l);a=c&&r.markableVoid(c)}}if(u||a)w.unsetNodes(r,e,{match:n,split:!0,voids:!0});else{var f=Ti({},o.marks(r)||{});delete f[e],r.marks=f,Er.get(r)||r.onChange()}}},ji=(r,e)=>{qu.set(r,e)},Ni=(r,e)=>o.point(r,e,{edge:"start"}),Mi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=n,a=o.range(e,t),[s,l]=B.edges(a),c="";for(var[f,v]of o.nodes(e,{at:a,match:q.isText,voids:u})){var g=f.text;D.equals(v,l.path)&&(g=g.slice(0,l.offset)),D.equals(v,s.path)&&(g=g.slice(s.offset)),c+=g}return c},Ii=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=n,[a,s]=B.edges(t);if(a.offset!==0||s.offset!==0||B.isCollapsed(t)||D.hasPrevious(s.path))return t;var l=o.above(e,{at:s,match:p=>H.isElement(p)&&o.isBlock(e,p),voids:u}),c=l?l[1]:[],f=o.start(e,a),v={anchor:f,focus:s},g=!0;for(var[d,C]of o.nodes(e,{at:v,match:q.isText,reverse:!0,voids:u})){if(g){g=!1;continue}if(d.text!==""||D.isBefore(C,c)){s={path:C,offset:d.text.length};break}}return{anchor:a,focus:s}},ki=(r,e)=>{var t=o.isNormalizing(r);o.setNormalizing(r,!1);try{e()}finally{o.setNormalizing(r,t)}o.normalize(r)},Li=(r,e,t)=>{var[n,u]=e;return H.isElement(n)&&o.isEmpty(r,n)||q.isText(n)&&n.text===""&&u[u.length-1]!==0},zi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var n,u,{reverse:a=!1,unit:s="character",distance:l=1,voids:c=!1}=t,{at:f=e.selection,hanging:v=!1}=t;if(f){var g=!1;if(B.isRange(f)&&B.isCollapsed(f)&&(g=!0,f=f.anchor),te.isPoint(f)){var d=o.void(e,{at:f,mode:"highest"});if(!c&&d){var[,C]=d;f=C}else{var p={unit:s,distance:l},h=a?o.before(e,f,p)||o.start(e,[]):o.after(e,f,p)||o.end(e,[]);f={anchor:f,focus:h},v=!0}}if(D.isPath(f)){w.removeNodes(e,{at:f,voids:c});return}if(!B.isCollapsed(f)){if(!v){var[,i]=B.edges(f),A=o.end(e,[]);te.equals(i,A)||(f=o.unhangRange(e,f,{voids:c}))}var[E,F]=B.edges(f),y=o.above(e,{match:J=>H.isElement(J)&&o.isBlock(e,J),at:E,voids:c}),S=o.above(e,{match:J=>H.isElement(J)&&o.isBlock(e,J),at:F,voids:c}),V=y&&S&&!D.equals(y[1],S[1]),k=D.equals(E.path,F.path),$=c?null:(n=o.void(e,{at:E,mode:"highest"}))!==null&&n!==void 0?n:o.elementReadOnly(e,{at:E,mode:"highest"}),K=c?null:(u=o.void(e,{at:F,mode:"highest"}))!==null&&u!==void 0?u:o.elementReadOnly(e,{at:F,mode:"highest"});if($){var z=o.before(e,E);z&&y&&D.isAncestor(y[1],z.path)&&(E=z)}if(K){var M=o.after(e,F);M&&S&&D.isAncestor(S[1],M.path)&&(F=M)}var b=[],O;for(var P of o.nodes(e,{at:f,voids:c})){var[R,_]=P;O&&D.compare(_,O)===0||(!c&&H.isElement(R)&&(o.isVoid(e,R)||o.isElementReadOnly(e,R))||!D.isCommon(_,E.path)&&!D.isCommon(_,F.path))&&(b.push(P),O=_)}var W=Array.from(b,J=>{var[,fe]=J;return o.pathRef(e,fe)}),ue=o.pointRef(e,E),ee=o.pointRef(e,F),ne="";if(!k&&!$){var ie=ue.current,[ae]=o.leaf(e,ie),{path:re}=ie,{offset:Be}=E,X=ae.text.slice(Be);X.length>0&&(e.apply({type:"remove_text",path:re,offset:Be,text:X}),ne=X)}if(W.reverse().map(J=>J.unref()).filter(J=>J!==null).forEach(J=>w.removeNodes(e,{at:J,voids:c})),!K){var m=ee.current,[L]=o.leaf(e,m),{path:x}=m,j=k?E.offset:0,Q=L.text.slice(j,F.offset);Q.length>0&&(e.apply({type:"remove_text",path:x,offset:j,text:Q}),ne=Q)}!k&&V&&ee.current&&ue.current&&w.mergeNodes(e,{at:ee.current,hanging:!0,voids:c}),g&&a&&s==="character"&&ne.length>1&&ne.match(/[\u0E00-\u0E7F]+/)&&w.insertText(e,ne.slice(0,ne.length-l));var U=ue.unref(),oe=ee.unref(),se=a?U||oe:oe||U;t.at==null&&se&&w.select(e,se)}}})},$i=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1}=n,{at:s=Ut(e),batchDirty:l=!0}=n;if(t.length){if(B.isRange(s))if(u||(s=o.unhangRange(e,s,{voids:a})),B.isCollapsed(s))s=s.anchor;else{var[,c]=B.edges(s);if(!a&&o.void(e,{at:c}))return;var f=o.pointRef(e,c);w.delete(e,{at:s}),s=f.unref()}else D.isPath(s)&&(s=o.start(e,s));if(!(!a&&o.void(e,{at:s}))){var v=o.above(e,{at:s,match:X=>H.isElement(X)&&o.isInline(e,X),mode:"highest",voids:a});if(v){var[,g]=v;if(o.isEnd(e,s,g)){var d=o.after(e,g);s=d}else if(o.isStart(e,s,g)){var C=o.before(e,g);s=C}}var p=o.above(e,{match:X=>H.isElement(X)&&o.isBlock(e,X),at:s,voids:a}),[,h]=p,i=o.isStart(e,s,h),A=o.isEnd(e,s,h),E=i&&A,F=!i||i&&A,y=!A,[,S]=T.first({children:t},[]),[,V]=T.last({children:t},[]),k=[],$=X=>{var[m,L]=X,x=L.length===0;return x?!1:E?!0:!(F&&D.isAncestor(L,S)&&H.isElement(m)&&!e.isVoid(m)&&!e.isInline(m)||y&&D.isAncestor(L,V)&&H.isElement(m)&&!e.isVoid(m)&&!e.isInline(m))};for(var K of T.nodes({children:t},{pass:$}))$(K)&&k.push(K);var z=[],M=[],b=[],O=!0,P=!1;for(var[R]of k)H.isElement(R)&&!e.isInline(R)?(O=!1,P=!0,M.push(R)):O?z.push(R):b.push(R);var[_]=o.nodes(e,{at:s,match:X=>q.isText(X)||o.isInline(e,X),mode:"highest",voids:a}),[,W]=_,ue=o.isStart(e,s,W),ee=o.isEnd(e,s,W),ne=o.pathRef(e,A&&!b.length?D.next(h):h),ie=o.pathRef(e,ee?D.next(W):W);w.splitNodes(e,{at:s,match:X=>P?H.isElement(X)&&o.isBlock(e,X):q.isText(X)||o.isInline(e,X),mode:P?"lowest":"highest",always:P&&(!i||z.length>0)&&(!A||b.length>0),voids:a});var ae=o.pathRef(e,!ue||ue&&ee?D.next(W):W);if(w.insertNodes(e,z,{at:ae.current,match:X=>q.isText(X)||o.isInline(e,X),mode:"highest",voids:a,batchDirty:l}),E&&!z.length&&M.length&&!b.length&&w.delete(e,{at:h,voids:a}),w.insertNodes(e,M,{at:ne.current,match:X=>H.isElement(X)&&o.isBlock(e,X),mode:"lowest",voids:a,batchDirty:l}),w.insertNodes(e,b,{at:ie.current,match:X=>q.isText(X)||o.isInline(e,X),mode:"highest",voids:a,batchDirty:l}),!n.at){var re;if(b.length>0&&ie.current?re=D.previous(ie.current):M.length>0&&ne.current?re=D.previous(ne.current):ae.current&&(re=D.previous(ae.current)),re){var Be=o.end(e,re);w.select(e,Be)}}ae.unref(),ne.unref(),ie.unref()}}})},Wi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=t,{selection:u}=e;if(u){if(n==="anchor")w.select(e,u.anchor);else if(n==="focus")w.select(e,u.focus);else if(n==="start"){var[a]=B.edges(u);w.select(e,a)}else if(n==="end"){var[,s]=B.edges(u);w.select(e,s)}}else return},qi=r=>{var{selection:e}=r;e&&r.apply({type:"set_selection",properties:e,newProperties:null})},Hi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:u=1,unit:a="character",reverse:s=!1}=t,{edge:l=null}=t;if(n){l==="start"&&(l=B.isBackward(n)?"focus":"anchor"),l==="end"&&(l=B.isBackward(n)?"anchor":"focus");var{anchor:c,focus:f}=n,v={distance:u,unit:a,ignoreNonSelectable:!0},g={};if(l==null||l==="anchor"){var d=s?o.before(e,c,v):o.after(e,c,v);d&&(g.anchor=d)}if(l==null||l==="focus"){var C=s?o.before(e,f,v):o.after(e,f,v);C&&(g.focus=C)}w.setSelection(e,g)}},Vi=(r,e)=>{var{selection:t}=r;if(e=o.range(r,e),t){w.setSelection(r,e);return}if(!B.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(pe.stringify(e)));r.apply({type:"set_selection",properties:t,newProperties:e})};function zn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function $n(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ki=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u}=e,{edge:a="both"}=n;if(u){a==="start"&&(a=B.isBackward(u)?"focus":"anchor"),a==="end"&&(a=B.isBackward(u)?"anchor":"focus");var{anchor:s,focus:l}=u,c=a==="anchor"?s:l;w.setSelection(e,{[a==="anchor"?"anchor":"focus"]:$n($n({},c),t)})}},Ui=(r,e)=>{var{selection:t}=r,n={},u={};if(t){for(var a in e)(a==="anchor"&&e.anchor!=null&&!te.equals(e.anchor,t.anchor)||a==="focus"&&e.focus!=null&&!te.equals(e.focus,t.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==t[a])&&(n[a]=t[a],u[a]=e[a]);Object.keys(n).length>0&&r.apply({type:"set_selection",properties:n,newProperties:u})}},Gi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:a=!1,mode:s="lowest",batchDirty:l=!0}=n,{at:c,match:f,select:v}=n;if(T.isNode(t)&&(t=[t]),t.length!==0){var[g]=t;if(c||(c=Ut(e),v!==!1&&(v=!0)),v==null&&(v=!1),B.isRange(c))if(u||(c=o.unhangRange(e,c,{voids:a})),B.isCollapsed(c))c=c.anchor;else{var[,d]=B.edges(c),C=o.pointRef(e,d);w.delete(e,{at:c}),c=C.unref()}if(te.isPoint(c)){f==null&&(q.isText(g)?f=z=>q.isText(z):e.isInline(g)?f=z=>q.isText(z)||o.isInline(e,z):f=z=>H.isElement(z)&&o.isBlock(e,z));var[p]=o.nodes(e,{at:c.path,match:f,mode:s,voids:a});if(p){var[,h]=p,i=o.pathRef(e,h),A=o.isEnd(e,c,h);w.splitNodes(e,{at:c,match:f,mode:s,voids:a});var E=i.unref();c=A?D.next(E):E}else return}var F=D.parent(c),y=c[c.length-1];if(!(!a&&o.void(e,{at:F}))){if(l){var S=[],V=D.levels(F);Ps(e,()=>{var z=function(){var O=F.concat(y);y++;var P={type:"insert_node",path:O,node:M};e.apply(P),c=D.next(c),S.push(P),q.isText?V.push(...Array.from(T.nodes(M),R=>{var[,_]=R;return O.concat(_)})):V.push(O)};for(var M of t)z()},()=>{Vu(e,V,z=>{var M=z;for(var b of S)if(D.operationCanTransformPath(b)&&(M=D.transform(M,b),!M))return null;return M})})}else for(var k of t){var $=F.concat(y);y++,e.apply({type:"insert_node",path:$,node:k}),c=D.next(c)}if(c=D.previous(c),v){var K=o.end(e,c);K&&w.select(e,K)}}}})},Yi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:u="lowest",voids:a=!1}=t,{match:s}=t;if(s==null&&(s=D.isPath(n)?Cr(e,n):y=>H.isElement(y)&&o.isBlock(e,y)),!!n){var l=o.nodes(e,{at:n,match:s,mode:u,voids:a}),c=Array.from(l,y=>{var[,S]=y;return o.pathRef(e,S)});for(var f of c){var v=f.unref();if(v.length<2)throw new Error("Cannot lift node at a path [".concat(v,"] because it has a depth of less than `2`."));var g=o.node(e,D.parent(v)),[d,C]=g,p=v[v.length-1],{length:h}=d.children;if(h===1){var i=D.next(C);w.moveNodes(e,{at:v,to:i,voids:a}),w.removeNodes(e,{at:C,voids:a})}else if(p===0)w.moveNodes(e,{at:v,to:C,voids:a});else if(p===h-1){var A=D.next(C);w.moveNodes(e,{at:v,to:A,voids:a})}else{var E=D.next(v),F=D.next(C);w.splitNodes(e,{at:E,voids:a}),w.moveNodes(e,{at:v,to:F,voids:a})}}}})},Xi=["text"],Ji=["children"],Ku=(r,e)=>{if(H.isElement(e)){var t=e;return o.isVoid(r,e)?!0:t.children.length===1?Ku(r,t.children[0]):!1}else return!o.isEditor(e)},Zi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{match:n,at:u=e.selection}=t,{hanging:a=!1,voids:s=!1,mode:l="lowest"}=t;if(u){if(n==null)if(D.isPath(u)){var[c]=o.parent(e,u);n=z=>c.children.includes(z)}else n=z=>H.isElement(z)&&o.isBlock(e,z);if(!a&&B.isRange(u)&&(u=o.unhangRange(e,u,{voids:s})),B.isRange(u))if(B.isCollapsed(u))u=u.anchor;else{var[,f]=B.edges(u),v=o.pointRef(e,f);w.delete(e,{at:u}),u=v.unref(),t.at==null&&w.select(e,u)}var[g]=o.nodes(e,{at:u,match:n,voids:s,mode:l}),d=o.previous(e,{at:u,match:n,voids:s,mode:l});if(!(!g||!d)){var[C,p]=g,[h,i]=d;if(!(p.length===0||i.length===0)){var A=D.next(i),E=D.common(p,i),F=D.isSibling(p,i),y=Array.from(o.levels(e,{at:p}),z=>{var[M]=z;return M}).slice(E.length).slice(0,-1),S=o.above(e,{at:p,mode:"highest",match:z=>y.includes(z)&&Ku(e,z)}),V=S&&o.pathRef(e,S[1]),k,$;if(q.isText(C)&&q.isText(h)){var K=Ke(C,Xi);$=h.text.length,k=K}else if(H.isElement(C)&&H.isElement(h)){var K=Ke(C,Ji);$=h.children.length,k=K}else throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(pe.stringify(C)," ").concat(pe.stringify(h)));F||w.moveNodes(e,{at:p,to:A,voids:s}),V&&w.removeNodes(e,{at:V.current,voids:s}),o.shouldMergeNodesRemovePrevNode(e,d,g)?w.removeNodes(e,{at:i,voids:s}):e.apply({type:"merge_node",path:A,position:$,properties:k}),V&&V.unref()}}}})},Qi=(r,e)=>{o.withoutNormalizing(r,()=>{var{to:t,at:n=r.selection,mode:u="lowest",voids:a=!1}=e,{match:s}=e;if(n){s==null&&(s=D.isPath(n)?Cr(r,n):C=>H.isElement(C)&&o.isBlock(r,C));var l=o.pathRef(r,t),c=o.nodes(r,{at:n,match:s,mode:u,voids:a}),f=Array.from(c,C=>{var[,p]=C;return o.pathRef(r,p)});for(var v of f){var g=v.unref(),d=l.current;g.length!==0&&r.apply({type:"move_node",path:g,newPath:d}),l.current&&D.isSibling(d,g)&&D.isAfter(d,g)&&(l.current=D.next(l.current))}l.unref()}})},_i=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:u=!1,mode:a="lowest"}=t,{at:s=e.selection,match:l}=t;if(s){l==null&&(l=D.isPath(s)?Cr(e,s):C=>H.isElement(C)&&o.isBlock(e,C)),!n&&B.isRange(s)&&(s=o.unhangRange(e,s,{voids:u}));var c=o.nodes(e,{at:s,match:l,mode:a,voids:u}),f=Array.from(c,C=>{var[,p]=C;return o.pathRef(e,p)});for(var v of f){var g=v.unref();if(g){var[d]=o.node(e,g);e.apply({type:"remove_node",path:g,node:d})}}}})},eo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{match:u,at:a=e.selection,compare:s,merge:l}=n,{hanging:c=!1,mode:f="lowest",split:v=!1,voids:g=!1}=n;if(a){if(u==null&&(u=D.isPath(a)?Cr(e,a):$=>H.isElement($)&&o.isBlock(e,$)),!c&&B.isRange(a)&&(a=o.unhangRange(e,a,{voids:g})),v&&B.isRange(a)){if(B.isCollapsed(a)&&o.leaf(e,a.anchor)[0].text.length>0)return;var d=o.rangeRef(e,a,{affinity:"inward"}),[C,p]=B.edges(a),h=f==="lowest"?"lowest":"highest",i=o.isEnd(e,p,p.path);w.splitNodes(e,{at:p,match:u,mode:h,voids:g,always:!i});var A=o.isStart(e,C,C.path);w.splitNodes(e,{at:C,match:u,mode:h,voids:g,always:!A}),a=d.unref(),n.at==null&&w.select(e,a)}s||(s=($,K)=>$!==K);for(var[E,F]of o.nodes(e,{at:a,match:u,mode:f,voids:g})){var y={},S={};if(F.length!==0){var V=!1;for(var k in t)k==="children"||k==="text"||s(t[k],E[k])&&(V=!0,E.hasOwnProperty(k)&&(y[k]=E[k]),l?t[k]!=null&&(S[k]=l(E[k],t[k])):t[k]!=null&&(S[k]=t[k]));V&&e.apply({type:"set_node",path:F,properties:y,newProperties:S})}}}})},ro=(r,e)=>{if(B.isCollapsed(e))return e.anchor;var[,t]=B.edges(e),n=o.pointRef(r,t);return w.delete(r,{at:e}),n.unref()},to=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:u=!1}=t,{match:a,at:s=e.selection,height:l=0,always:c=!1}=t;if(a==null&&(a=ee=>H.isElement(ee)&&o.isBlock(e,ee)),B.isRange(s)&&(s=ro(e,s)),D.isPath(s)){var f=s,v=o.point(e,f),[g]=o.parent(e,f);a=ee=>ee===g,l=v.path.length-f.length+1,s=v,c=!0}if(s){var d=o.pointRef(e,s,{affinity:"backward"}),C;try{var[p]=o.nodes(e,{at:s,match:a,mode:n,voids:u});if(!p)return;var h=o.void(e,{at:s,mode:"highest"}),i=0;if(!u&&h){var[A,E]=h;if(H.isElement(A)&&e.isInline(A)){var F=o.after(e,E);if(!F){var y={text:""},S=D.next(E);w.insertNodes(e,y,{at:S,voids:u}),F=o.point(e,S)}s=F,c=!0}var V=s.path.length-E.length;l=V+1,c=!0}C=o.pointRef(e,s);var k=s.path.length-l,[,$]=p,K=s.path.slice(0,k),z=l===0?s.offset:s.path[k]+i;for(var[M,b]of o.levels(e,{at:K,reverse:!0,voids:u})){var O=!1;if(b.length<$.length||b.length===0||!u&&H.isElement(M)&&o.isVoid(e,M))break;var P=d.current,R=o.isEnd(e,P,b);if(c||!d||!o.isEdge(e,P,b)){O=!0;var _=T.extractProps(M);e.apply({type:"split_node",path:b,position:z,properties:_})}z=b[b.length-1]+(O||R?1:0)}if(t.at==null){var W=C.current||o.end(e,[]);w.select(e,W)}}finally{var ue;d.unref(),(ue=C)===null||ue===void 0||ue.unref()}}})},no=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(t)||(t=[t]);var u={};for(var a of t)u[a]=null;w.setNodes(e,u,n)},uo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",split:u=!1,voids:a=!1}=t,{at:s=e.selection,match:l}=t;if(s){l==null&&(l=D.isPath(s)?Cr(e,s):C=>H.isElement(C)&&o.isBlock(e,C)),D.isPath(s)&&(s=o.range(e,s));var c=B.isRange(s)?o.rangeRef(e,s):null,f=o.nodes(e,{at:s,match:l,mode:n,voids:a}),v=Array.from(f,C=>{var[,p]=C;return o.pathRef(e,p)}).reverse(),g=function(){var p=d.unref(),[h]=o.node(e,p),i=o.range(e,p);u&&c&&(i=B.intersection(c.current,i)),w.liftNodes(e,{at:i,match:A=>H.isAncestor(h)&&h.children.includes(A),voids:a})};for(var d of v)g();c&&c.unref()}})};function Wn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function qn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(t),!0).forEach(function(n){Oe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ao=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{mode:u="lowest",split:a=!1,voids:s=!1}=n,{match:l,at:c=e.selection}=n;if(c){if(l==null&&(D.isPath(c)?l=Cr(e,c):e.isInline(t)?l=i=>H.isElement(i)&&o.isInline(e,i)||q.isText(i):l=i=>H.isElement(i)&&o.isBlock(e,i)),a&&B.isRange(c)){var[f,v]=B.edges(c),g=o.rangeRef(e,c,{affinity:"inward"});w.splitNodes(e,{at:v,match:l,voids:s}),w.splitNodes(e,{at:f,match:l,voids:s}),c=g.unref(),n.at==null&&w.select(e,c)}var d=Array.from(o.nodes(e,{at:c,match:e.isInline(t)?i=>H.isElement(i)&&o.isBlock(e,i):i=>o.isEditor(i),mode:"lowest",voids:s})),C=function(){var A=B.isRange(c)?B.intersection(c,o.range(e,h)):c;if(!A)return 0;var E=Array.from(o.nodes(e,{at:A,match:l,mode:u,voids:s}));if(E.length>0){var[F]=E,y=E[E.length-1],[,S]=F,[,V]=y;if(S.length===0&&V.length===0)return 0;var k=D.equals(S,V)?D.parent(S):D.common(S,V),$=o.range(e,S,V),K=o.node(e,k),[z]=K,M=k.length+1,b=D.next(V.slice(0,M)),O=qn(qn({},t),{},{children:[]});w.insertNodes(e,O,{at:b,voids:s}),w.moveNodes(e,{at:$,match:P=>H.isAncestor(z)&&z.children.includes(P),to:b.concat(0),voids:s})}},p;for(var[,h]of d)p=C()}})},yf=()=>{var r={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ss(r,...n)},addMark:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Is(r,...n)},deleteBackward:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return zs(r,...n)},deleteForward:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return $s(r,...n)},deleteFragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ws(r,...n)},getFragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Rs(r,...n)},insertBreak:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Qs(r,...n)},insertSoftBreak:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ei(r,...n)},insertFragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return $i(r,...n)},insertNode:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return _s(r,...n)},insertText:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ti(r,...n)},normalizeNode:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return js(r,...n)},removeMark:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ri(r,...n)},getDirtyPaths:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ts(r,...n)},shouldNormalize:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ns(r,...n)},above:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ms(r,...n)},after:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ks(r,...n)},before:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ls(r,...n)},collapse:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Wi(r,...n)},delete:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return zi(r,...n)},deselect:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return qi(r,...n)},edges:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return qs(r,...n)},elementReadOnly:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Hs(r,...n)},end:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Vs(r,...n)},first:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ks(r,...n)},fragment:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Us(r,...n)},getMarks:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Di(r,...n)},hasBlocks:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ys(r,...n)},hasInlines:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Xs(r,...n)},hasPath:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Js(r,...n)},hasTexts:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Zs(r,...n)},insertNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Gi(r,...n)},isBlock:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ni(r,...n)},isEdge:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ui(r,...n)},isEmpty:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ai(r,...n)},isEnd:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return si(r,...n)},isNormalizing:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ii(r,...n)},isStart:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return oi(r,...n)},last:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return li(r,...n)},leaf:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return fi(r,...n)},levels:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ci(r,...n)},liftNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Yi(r,...n)},mergeNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Zi(r,...n)},move:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Hi(r,...n)},moveNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Qi(r,...n)},next:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return gi(r,...n)},node:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return hi(r,...n)},nodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ci(r,...n)},normalize:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return mi(r,...n)},parent:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return pi(r,...n)},path:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ai(r,...n)},pathRef:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Bi(r,...n)},pathRefs:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ei(r,...n)},point:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return wi(r,...n)},pointRef:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Fi(r,...n)},pointRefs:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return bi(r,...n)},positions:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Oi(r,...n)},previous:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return yi(r,...n)},range:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Si(r,...n)},rangeRef:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return xi(r,...n)},rangeRefs:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Pi(r,...n)},removeNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return _i(r,...n)},select:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Vi(r,...n)},setNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return eo(r,...n)},setNormalizing:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ji(r,...n)},setPoint:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ki(r,...n)},setSelection:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ui(r,...n)},splitNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return to(r,...n)},start:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ni(r,...n)},string:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Mi(r,...n)},unhangRange:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Ii(r,...n)},unsetNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return no(r,...n)},unwrapNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return uo(r,...n)},void:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Gs(r,...n)},withoutNormalizing:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ki(r,...n)},wrapNodes:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return ao(r,...n)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return Li(r,...n)}};return r},st,Hn;function so(){if(Hn)return st;Hn=1,st=u;var r="---",e="A-Za-z--------",t=new RegExp("^[^"+e+"]*["+r+"]"),n=new RegExp("^[^"+r+"]*["+e+"]");function u(a){return a=String(a||""),t.test(a)?"rtl":n.test(a)?"ltr":"neutral"}return st}var io=so();const Uu=qt(io);var it,Vn;function Xt(){if(Vn)return it;Vn=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return it=r,it}var ot,Kn;function oo(){if(Kn)return ot;Kn=1;var r=typeof jr=="object"&&jr&&jr.Object===Object&&jr;return ot=r,ot}var lt,Un;function Gu(){if(Un)return lt;Un=1;var r=oo(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return lt=t,lt}var ft,Gn;function lo(){if(Gn)return ft;Gn=1;var r=Gu(),e=function(){return r.Date.now()};return ft=e,ft}var ct,Yn;function fo(){if(Yn)return ct;Yn=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return ct=e,ct}var vt,Xn;function co(){if(Xn)return vt;Xn=1;var r=fo(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return vt=t,vt}var dt,Jn;function Yu(){if(Jn)return dt;Jn=1;var r=Gu(),e=r.Symbol;return dt=e,dt}var Dt,Zn;function vo(){if(Zn)return Dt;Zn=1;var r=Yu(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,u=r?r.toStringTag:void 0;function a(s){var l=t.call(s,u),c=s[u];try{s[u]=void 0;var f=!0}catch{}var v=n.call(s);return f&&(l?s[u]=c:delete s[u]),v}return Dt=a,Dt}var gt,Qn;function Do(){if(Qn)return gt;Qn=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return gt=t,gt}var ht,_n;function go(){if(_n)return ht;_n=1;var r=Yu(),e=vo(),t=Do(),n="[object Null]",u="[object Undefined]",a=r?r.toStringTag:void 0;function s(l){return l==null?l===void 0?u:n:a&&a in Object(l)?e(l):t(l)}return ht=s,ht}var Ct,eu;function ho(){if(eu)return Ct;eu=1;function r(e){return e!=null&&typeof e=="object"}return Ct=r,Ct}var mt,ru;function Co(){if(ru)return mt;ru=1;var r=go(),e=ho(),t="[object Symbol]";function n(u){return typeof u=="symbol"||e(u)&&r(u)==t}return mt=n,mt}var pt,tu;function mo(){if(tu)return pt;tu=1;var r=co(),e=Xt(),t=Co(),n=NaN,u=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function c(f){if(typeof f=="number")return f;if(t(f))return n;if(e(f)){var v=typeof f.valueOf=="function"?f.valueOf():f;f=e(v)?v+"":v}if(typeof f!="string")return f===0?f:+f;f=r(f);var g=a.test(f);return g||s.test(f)?l(f.slice(2),g?2:8):u.test(f)?n:+f}return pt=c,pt}var Bt,nu;function Xu(){if(nu)return Bt;nu=1;var r=Xt(),e=lo(),t=mo(),n="Expected a function",u=Math.max,a=Math.min;function s(l,c,f){var v,g,d,C,p,h,i=0,A=!1,E=!1,F=!0;if(typeof l!="function")throw new TypeError(n);c=t(c)||0,r(f)&&(A=!!f.leading,E="maxWait"in f,d=E?u(t(f.maxWait)||0,c):d,F="trailing"in f?!!f.trailing:F);function y(O){var P=v,R=g;return v=g=void 0,i=O,C=l.apply(R,P),C}function S(O){return i=O,p=setTimeout($,c),A?y(O):C}function V(O){var P=O-h,R=O-i,_=c-P;return E?a(_,d-R):_}function k(O){var P=O-h,R=O-i;return h===void 0||P>=c||P<0||E&&R>=d}function $(){var O=e();if(k(O))return K(O);p=setTimeout($,V(O))}function K(O){return p=void 0,F&&v?y(O):(v=g=void 0,C)}function z(){p!==void 0&&clearTimeout(p),i=0,v=h=g=p=void 0}function M(){return p===void 0?C:K(e())}function b(){var O=e(),P=k(O);if(v=arguments,g=this,h=O,P){if(p===void 0)return S(h);if(E)return clearTimeout(p),p=setTimeout($,c),y(h)}return p===void 0&&(p=setTimeout($,c)),C}return b.cancel=z,b.flush=M,b}return Bt=s,Bt}var po=Xu();const Bo=qt(po);var Et,uu;function Eo(){if(uu)return Et;uu=1;var r=Xu(),e=Xt(),t="Expected a function";function n(u,a,s){var l=!0,c=!0;if(typeof u!="function")throw new TypeError(t);return e(s)&&(l="leading"in s?!!s.leading:l,c="trailing"in s?!!s.trailing:c),r(u,a,{leading:l,maxWait:a,trailing:c})}return Et=n,Et}var Ao=Eo();const Fo=qt(Ao),au=r=>typeof r=="object"&&r!=null&&r.nodeType===1,su=(r,e)=>(!e||r!=="hidden")&&r!=="visible"&&r!=="clip",Mr=(r,e)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){const t=getComputedStyle(r,null);return su(t.overflowY,e)||su(t.overflowX,e)||(n=>{const u=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!u&&(u.clientHeight<n.scrollHeight||u.clientWidth<n.scrollWidth)})(r)}return!1},Ir=(r,e,t,n,u,a,s,l)=>a<r&&s>e||a>r&&s<e?0:a<=r&&l<=t||s>=e&&l>=t?a-r-n:s>e&&l<t||a<r&&l>t?s-e+u:0,bo=r=>{const e=r.parentElement;return e??(r.getRootNode().host||null)},iu=(r,e)=>{var t,n,u,a;if(typeof document>"u")return[];const{scrollMode:s,block:l,inline:c,boundary:f,skipOverflowHiddenElements:v}=e,g=typeof f=="function"?f:_=>_!==f;if(!au(r))throw new TypeError("Invalid target");const d=document.scrollingElement||document.documentElement,C=[];let p=r;for(;au(p)&&g(p);){if(p=bo(p),p===d){C.push(p);break}p!=null&&p===document.body&&Mr(p)&&!Mr(document.documentElement)||p!=null&&Mr(p,v)&&C.push(p)}const h=(n=(t=window.visualViewport)==null?void 0:t.width)!=null?n:innerWidth,i=(a=(u=window.visualViewport)==null?void 0:u.height)!=null?a:innerHeight,{scrollX:A,scrollY:E}=window,{height:F,width:y,top:S,right:V,bottom:k,left:$}=r.getBoundingClientRect(),{top:K,right:z,bottom:M,left:b}=(_=>{const W=window.getComputedStyle(_);return{top:parseFloat(W.scrollMarginTop)||0,right:parseFloat(W.scrollMarginRight)||0,bottom:parseFloat(W.scrollMarginBottom)||0,left:parseFloat(W.scrollMarginLeft)||0}})(r);let O=l==="start"||l==="nearest"?S-K:l==="end"?k+M:S+F/2-K+M,P=c==="center"?$+y/2-b+z:c==="end"?V+z:$-b;const R=[];for(let _=0;_<C.length;_++){const W=C[_],{height:ue,width:ee,top:ne,right:ie,bottom:ae,left:re}=W.getBoundingClientRect();if(s==="if-needed"&&S>=0&&$>=0&&k<=i&&V<=h&&(W===d&&!Mr(W)||S>=ne&&k<=ae&&$>=re&&V<=ie))return R;const Be=getComputedStyle(W),X=parseInt(Be.borderLeftWidth,10),m=parseInt(Be.borderTopWidth,10),L=parseInt(Be.borderRightWidth,10),x=parseInt(Be.borderBottomWidth,10);let j=0,Q=0;const U="offsetWidth"in W?W.offsetWidth-W.clientWidth-X-L:0,oe="offsetHeight"in W?W.offsetHeight-W.clientHeight-m-x:0,se="offsetWidth"in W?W.offsetWidth===0?0:ee/W.offsetWidth:0,J="offsetHeight"in W?W.offsetHeight===0?0:ue/W.offsetHeight:0;if(d===W)j=l==="start"?O:l==="end"?O-i:l==="nearest"?Ir(E,E+i,i,m,x,E+O,E+O+F,F):O-i/2,Q=c==="start"?P:c==="center"?P-h/2:c==="end"?P-h:Ir(A,A+h,h,X,L,A+P,A+P+y,y),j=Math.max(0,j+E),Q=Math.max(0,Q+A);else{j=l==="start"?O-ne-m:l==="end"?O-ae+x+oe:l==="nearest"?Ir(ne,ae,ue,m,x+oe,O,O+F,F):O-(ne+ue/2)+oe/2,Q=c==="start"?P-re-X:c==="center"?P-(re+ee/2)+U/2:c==="end"?P-ie+L+U:Ir(re,ie,ee,X,L+U,P,P+y,y);const{scrollLeft:fe,scrollTop:de}=W;j=J===0?0:Math.max(0,Math.min(de+j/J,W.scrollHeight-ue/J+oe)),Q=se===0?0:Math.max(0,Math.min(fe+Q/se,W.scrollWidth-ee/se+U)),O+=de-j,P+=fe-Q}R.push({el:W,top:j,left:Q})}return R},wo=r=>r===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(r)?r:{block:"start",inline:"nearest"};function Oo(r,e){if(!r.isConnected||!(u=>{let a=u;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(r))return;const t=(u=>{const a=window.getComputedStyle(u);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(r);if((u=>typeof u=="object"&&typeof u.behavior=="function")(e))return e.behavior(iu(r,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:u,top:a,left:s}of iu(r,wo(e))){const l=a-t.top+t.bottom,c=s-t.left+t.right;u.scroll({top:l,left:c,behavior:n})}}var Ne={},ou;function yo(){if(ou)return Ne;ou=1,Object.defineProperty(Ne,"__esModule",{value:!0});for(var r=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),e={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},t={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},n={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},u=1;u<20;u++)n["f"+u]=111+u;function a(d,C,p){C&&!("byKey"in C)&&(p=C,C=null),Array.isArray(d)||(d=[d]);var h=d.map(function(E){return c(E,C)}),i=function(F){return h.some(function(y){return f(y,F)})},A=p==null?i:i(p);return A}function s(d,C){return a(d,C)}function l(d,C){return a(d,{byKey:!0},C)}function c(d,C){var p=C&&C.byKey,h={};d=d.replace("++","+add");var i=d.split("+"),A=i.length;for(var E in e)h[e[E]]=!1;var F=!0,y=!1,S=void 0;try{for(var V=i[Symbol.iterator](),k;!(F=(k=V.next()).done);F=!0){var $=k.value,K=$.endsWith("?")&&$.length>1;K&&($=$.slice(0,-1));var z=g($),M=e[z];if($.length>1&&!M&&!t[$]&&!n[z])throw new TypeError('Unknown modifier: "'+$+'"');(A===1||!M)&&(p?h.key=z:h.which=v($)),M&&(h[M]=K?null:!0)}}catch(b){y=!0,S=b}finally{try{!F&&V.return&&V.return()}finally{if(y)throw S}}return h}function f(d,C){for(var p in d){var h=d[p],i=void 0;if(h!=null&&(p==="key"&&C.key!=null?i=C.key.toLowerCase():p==="which"?i=h===91&&C.which===93?91:C.which:i=C[p],!(i==null&&h===!1)&&i!==h))return!1}return!0}function v(d){d=g(d);var C=n[d]||d.toUpperCase().charCodeAt(0);return C}function g(d){return d=d.toLowerCase(),d=t[d]||d,d}return Ne.default=a,Ne.isHotkey=a,Ne.isCodeHotkey=s,Ne.isKeyHotkey=l,Ne.parseHotkey=c,Ne.compareHotkey=f,Ne.toKeyCode=v,Ne.toKeyName=g,Ne}var At=yo(),Ju=globalThis.Node,xo=globalThis.Text,Jt=r=>r&&r.ownerDocument&&r.ownerDocument.defaultView||null,Po=r=>Ze(r)&&r.nodeType===8,Te=r=>Ze(r)&&r.nodeType===1,Ze=r=>{var e=Jt(r);return!!e&&r instanceof e.Node},Nt=r=>{var e=r&&r.anchorNode&&Jt(r.anchorNode);return!!e&&r instanceof e.Selection},Zu=r=>Ze(r)&&r.nodeType===3,So=r=>r.clipboardData&&r.clipboardData.getData("text/plain")!==""&&r.clipboardData.types.length===1,To=r=>{var[e,t]=r;if(Te(e)&&e.childNodes.length){var n=t===e.childNodes.length,u=n?t-1:t;for([e,u]=Qu(e,u,n?"backward":"forward"),n=u<t;Te(e)&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=jo(e,a,n?"backward":"forward")}t=n&&e.textContent!=null?e.textContent.length:0}return[e,t]},Ro=r=>{for(var e=r&&r.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Qu=(r,e,t)=>{for(var{childNodes:n}=r,u=n[e],a=e,s=!1,l=!1;(Po(u)||Te(u)&&u.childNodes.length===0||Te(u)&&u.getAttribute("contenteditable")==="false")&&!(s&&l);){if(a>=n.length){s=!0,a=e-1,t="backward";continue}if(a<0){l=!0,a=e+1,t="forward";continue}u=n[a],e=a,a+=t==="forward"?1:-1}return[u,e]},jo=(r,e,t)=>{var[n]=Qu(r,e,t);return n},_u=r=>{var e="";if(Zu(r)&&r.nodeValue)return r.nodeValue;if(Te(r)){for(var t of Array.from(r.childNodes))e+=_u(t);var n=getComputedStyle(r).getPropertyValue("display");(n==="block"||n==="list"||r.tagName==="BR")&&(e+=`
`)}return e},No=/data-slate-fragment="(.+?)"/m,Mo=r=>{var e=r.getData("text/html"),[,t]=e.match(No)||[];return t},Ar=r=>r.getSelection!=null?r.getSelection():document.getSelection(),Zt=(r,e,t)=>{var{target:n}=e;if(Te(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:u}=Z.getWindow(r);if(u.contains(n))return Z.hasDOMNode(r,n,{editable:!0});var a=t.find(s=>{var{addedNodes:l,removedNodes:c}=s;for(var f of l)if(f===n||f.contains(n))return!0;for(var v of c)if(v===n||v.contains(n))return!0});return!a||a===e?!1:Zt(r,a,t)},Io=()=>{for(var r=document.activeElement;(e=r)!==null&&e!==void 0&&e.shadowRoot&&(t=r.shadowRoot)!==null&&t!==void 0&&t.activeElement;){var e,t,n;r=(n=r)===null||n===void 0||(n=n.shadowRoot)===null||n===void 0?void 0:n.activeElement}return r},lu=(r,e)=>!!(r.compareDocumentPosition(e)&Ju.DOCUMENT_POSITION_PRECEDING),ko=(r,e)=>!!(r.compareDocumentPosition(e)&Ju.DOCUMENT_POSITION_FOLLOWING),Ft,bt,ea=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,fu=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),we=typeof navigator<"u"&&/Android/.test(navigator.userAgent),vr=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),rr=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Lo=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),ra=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),zo=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),$o=we&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Wo=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),qo=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Ho=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),qr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((Ft=navigator.userAgent.match(/Version\/(\d+)/))!==null&&Ft!==void 0&&Ft[1]&&parseInt((bt=navigator.userAgent.match(/Version\/(\d+)/))===null||bt===void 0?void 0:bt[1],10)<17);var Ge=(!zo||!$o)&&!Lo&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function xr(r){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(r)}function Vo(r,e){if(xr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(xr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ko(r){var e=Vo(r,"string");return xr(e)==="symbol"?e:String(e)}function ta(r,e,t){return e=Ko(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Uo=0;class Go{constructor(){ta(this,"id",void 0),this.id="".concat(Uo++)}}var dr=new WeakMap,Qt=new WeakMap,_t=new WeakMap,na=new WeakMap,Hr=new WeakMap,Mt=new WeakMap,Pr=new WeakMap,nr=new WeakMap,Jr=new WeakMap,tt=new WeakMap,It=new WeakMap,Je=new WeakMap,tr=new WeakMap,Fr=new WeakMap,kt=new WeakMap,en=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,xe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,ua=new WeakMap,hr=Symbol("placeholder"),aa=Symbol("mark-placeholder"),Z={androidPendingDiffs:r=>xe.get(r),androidScheduleFlush:r=>{var e;(e=en.get(r))===null||e===void 0||e()},blur:r=>{var e=Z.toDOMNode(r,r),t=Z.findDocumentOrShadowRoot(r);Je.set(r,!1),t.activeElement===e&&e.blur()},deselect:r=>{var{selection:e}=r,t=Z.findDocumentOrShadowRoot(r),n=Ar(t);n&&n.rangeCount>0&&n.removeAllRanges(),e&&w.deselect(r)},findDocumentOrShadowRoot:r=>{var e=Z.toDOMNode(r,r),t=e.getRootNode();return t instanceof Document||t instanceof ShadowRoot?t:e.ownerDocument},findEventRange:(r,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:t,clientY:n,target:u}=e;if(t==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=Z.toSlateNode(r,e.target),s=Z.findPath(r,a);if(H.isElement(a)&&o.isVoid(r,a)){var l=u.getBoundingClientRect(),c=r.isInline(a)?t-l.left<l.left+l.width-t:n-l.top<l.top+l.height-n,f=o.point(r,s,{edge:c?"start":"end"}),v=c?o.before(r,f):o.after(r,f);if(v){var g=o.range(r,v);return g}}var d,{document:C}=Z.getWindow(r);if(C.caretRangeFromPoint)d=C.caretRangeFromPoint(t,n);else{var p=C.caretPositionFromPoint(t,n);p&&(d=C.createRange(),d.setStart(p.offsetNode,p.offset),d.setEnd(p.offsetNode,p.offset))}if(!d)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var h=Z.toSlateRange(r,d,{exactMatch:!1,suppressThrow:!1});return h},findKey:(r,e)=>{var t=Jr.get(e);return t||(t=new Go,Jr.set(e,t)),t},findPath:(r,e)=>{for(var t=[],n=e;;){var u=_t.get(n);if(u==null){if(o.isEditor(n))return t;break}var a=Qt.get(n);if(a==null)break;t.unshift(a),n=u}throw new Error("Unable to find the path for Slate node: ".concat(pe.stringify(e)))},focus:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Je.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{Z.focus(e,{retries:t.retries-1})},10);return}var n=Z.toDOMNode(e,e),u=Z.findDocumentOrShadowRoot(e);if(u.activeElement!==n){if(e.selection&&u instanceof Document){var a=Ar(u),s=Z.toDOMRange(e,e.selection);a==null||a.removeAllRanges(),a==null||a.addRange(s)}e.selection||w.select(e,o.start(e,[])),Je.set(e,!0),n.focus({preventScroll:!0})}}},getWindow:r=>{var e=na.get(r);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:u=!1}=n,a=Z.toDOMNode(e,e),s;try{s=Te(t)?t:t.parentElement}catch(l){if(l instanceof Error&&!l.message.includes('Permission denied to access property "nodeType"'))throw l}return s?s.closest("[data-slate-editor]")===a&&(!u||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(r,e)=>Ze(e)&&Z.hasDOMNode(r,e,{editable:!0}),hasRange:(r,e)=>{var{anchor:t,focus:n}=e;return o.hasPath(r,t.path)&&o.hasPath(r,n.path)},hasSelectableTarget:(r,e)=>Z.hasEditableTarget(r,e)||Z.isTargetInsideNonReadonlyVoid(r,e),hasTarget:(r,e)=>Ze(e)&&Z.hasDOMNode(r,e),insertData:(r,e)=>{r.insertData(e)},insertFragmentData:(r,e)=>r.insertFragmentData(e),insertTextData:(r,e)=>r.insertTextData(e),isComposing:r=>!!tr.get(r),isFocused:r=>!!Je.get(r),isReadOnly:r=>!!It.get(r),isTargetInsideNonReadonlyVoid:(r,e)=>{if(It.get(r))return!1;var t=Z.hasTarget(r,e)&&Z.toSlateNode(r,e);return H.isElement(t)&&o.isVoid(r,t)},setFragmentData:(r,e,t)=>r.setFragmentData(e,t),toDOMNode:(r,e)=>{var t=tt.get(r),n=o.isEditor(e)?Hr.get(r):t==null?void 0:t.get(Z.findKey(r,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(pe.stringify(e)));return n},toDOMPoint:(r,e)=>{var[t]=o.node(r,e.path),n=Z.toDOMNode(r,t),u;o.void(r,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(a)),l=0,c=0;c<s.length;c++){var f=s[c],v=f.childNodes[0];if(!(v==null||v.textContent==null)){var{length:g}=v.textContent,d=f.getAttribute("data-slate-length"),C=d==null?g:parseInt(d,10),p=l+C,h=s[c+1];if(e.offset===p&&h!==null&&h!==void 0&&h.hasAttribute("data-slate-mark-placeholder")){var i,A=h.childNodes[0];u=[A instanceof xo?A:h,(i=h.textContent)!==null&&i!==void 0&&i.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var E=Math.min(g,Math.max(0,e.offset-l));u=[v,E];break}l=p}}if(!u)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(pe.stringify(e)));return u},toDOMRange:(r,e)=>{var{anchor:t,focus:n}=e,u=B.isBackward(e),a=Z.toDOMPoint(r,t),s=B.isCollapsed(e)?a:Z.toDOMPoint(r,n),l=Z.getWindow(r),c=l.document.createRange(),[f,v]=u?s:a,[g,d]=u?a:s,C=Te(f)?f:f.parentElement,p=!!C.getAttribute("data-slate-zero-width"),h=Te(g)?g:g.parentElement,i=!!h.getAttribute("data-slate-zero-width");return c.setStart(f,p?1:v),c.setEnd(g,i?1:d),c},toSlateNode:(r,e)=>{var t=Te(e)?e:e.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var n=t?Pr.get(t):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return n},toSlatePoint:(r,e,t)=>{var{exactMatch:n,suppressThrow:u,searchDirection:a="backward"}=t,[s,l]=n?e:To(e),c=s.parentNode,f=null,v=0;if(c){var g,d,C=Z.toDOMNode(r,r),p=c.closest('[data-slate-void="true"]'),h=p&&C.contains(p)?p:null,i=c.closest('[contenteditable="false"]'),A=i&&C.contains(i)?i:null,E=c.closest("[data-slate-leaf]"),F=null;if(E){if(f=E.closest('[data-slate-node="text"]'),f){var y=Z.getWindow(r),S=y.document.createRange();S.setStart(f,0),S.setEnd(s,l);var V=S.cloneContents(),k=[...Array.prototype.slice.call(V.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(V.querySelectorAll("[contenteditable=false]"))];k.forEach(re=>{if(we&&!n&&re.hasAttribute("data-slate-zero-width")&&re.textContent.length>0&&re.textContext!=="\uFEFF"){re.textContent.startsWith("\uFEFF")&&(re.textContent=re.textContent.slice(1));return}re.parentNode.removeChild(re)}),v=V.textContent.length,F=f}}else if(h){for(var $=h.querySelectorAll("[data-slate-leaf]"),K=0;K<$.length;K++){var z=$[K];if(Z.hasDOMNode(r,z)){E=z;break}}E?(f=E.closest('[data-slate-node="text"]'),F=E,v=F.textContent.length,F.querySelectorAll("[data-slate-zero-width]").forEach(re=>{v-=re.textContent.length})):v=1}else if(A){var M=re=>re?re.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],b=A.closest('[data-slate-node="element"]');if(a==="forward"){var O,P=[...M(b),...M(b==null?void 0:b.nextElementSibling)];E=(O=P.find(re=>ko(A,re)))!==null&&O!==void 0?O:null}else{var R,_=[...M(b==null?void 0:b.previousElementSibling),...M(b)];E=(R=_.findLast(re=>lu(A,re)))!==null&&R!==void 0?R:null}E&&(f=E.closest('[data-slate-node="text"]'),F=E,a==="forward"?v=0:(v=F.textContent.length,F.querySelectorAll("[data-slate-zero-width]").forEach(re=>{v-=re.textContent.length})))}F&&v===F.textContent.length&&we&&F.getAttribute("data-slate-zero-width")==="z"&&(g=F.textContent)!==null&&g!==void 0&&g.startsWith("\uFEFF")&&(c.hasAttribute("data-slate-zero-width")||vr&&(d=F.textContent)!==null&&d!==void 0&&d.endsWith(`

`))&&v--}if(we&&!f&&!n){var W=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(W&&Z.hasDOMNode(r,W,{editable:!0})){var ue=Z.toSlateNode(r,W),{path:ee,offset:ne}=o.start(r,Z.findPath(r,ue));return W.querySelector("[data-slate-leaf]")||(ne=l),{path:ee,offset:ne}}}if(!f){if(u)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var ie=Z.toSlateNode(r,f),ae=Z.findPath(r,ie);return{path:ae,offset:v}},toSlateRange:(r,e,t)=>{var n,{exactMatch:u,suppressThrow:a}=t,s=Nt(e)?e.anchorNode:e.startContainer,l,c,f,v,g;if(s)if(Nt(e)){if(vr&&e.rangeCount>1){f=e.focusNode;var d=e.getRangeAt(0),C=e.getRangeAt(e.rangeCount-1);if(f instanceof HTMLTableRowElement&&d.startContainer instanceof HTMLTableRowElement&&C.startContainer instanceof HTMLTableRowElement){let V=function(k){return k.childElementCount>0?V(k.children[0]):k};var p=d.startContainer,h=C.startContainer,i=V(p.children[d.startOffset]),A=V(h.children[C.startOffset]);v=0,A.childNodes.length>0?l=A.childNodes[0]:l=A,i.childNodes.length>0?f=i.childNodes[0]:f=i,A instanceof HTMLElement?c=A.innerHTML.length:c=0}else d.startContainer===f?(l=C.endContainer,c=C.endOffset,v=d.startOffset):(l=d.startContainer,c=d.endOffset,v=C.startOffset)}else l=e.anchorNode,c=e.anchorOffset,f=e.focusNode,v=e.focusOffset;ra&&Ro(l)||vr?g=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:g=e.isCollapsed}else l=e.startContainer,c=e.startOffset,f=e.endContainer,v=e.endOffset,g=e.collapsed;if(l==null||f==null||c==null||v==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));vr&&(n=f.textContent)!==null&&n!==void 0&&n.endsWith(`

`)&&v===f.textContent.length&&v--;var E=Z.toSlatePoint(r,[l,c],{exactMatch:u,suppressThrow:a});if(!E)return null;var F=lu(l,f)||l===f&&v<c,y=g?E:Z.toSlatePoint(r,[f,v],{exactMatch:u,suppressThrow:a,searchDirection:F?"forward":"backward"});if(!y)return null;var S={anchor:E,focus:y};return B.isExpanded(S)&&B.isForward(S)&&Te(f)&&o.void(r,{at:S.focus,mode:"highest"})&&(S=o.unhangRange(r,S,{voids:!0})),S}};function Yo(r,e){var{path:t,diff:n}=e;if(!o.hasPath(r,t))return!1;var u=T.get(r,t);if(!q.isText(u))return!1;if(n.start!==u.text.length||n.text.length===0)return u.text.slice(n.start,n.start+n.text.length)===n.text;var a=D.next(t);if(!o.hasPath(r,a))return!1;var s=T.get(r,a);return q.isText(s)&&s.text.startsWith(n.text)}function sa(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.reduce((u,a)=>u.slice(0,a.start)+a.text+u.slice(a.end),r)}function Xo(r,e){for(var t=Math.min(r.length,e.length),n=0;n<t;n++)if(r.charAt(n)!==e.charAt(n))return n;return t}function Jo(r,e,t){for(var n=Math.min(r.length,e.length,t),u=0;u<n;u++)if(r.charAt(r.length-u-1)!==e.charAt(e.length-u-1))return u;return n}function ia(r,e){var{start:t,end:n,text:u}=e,a=r.slice(t,n),s=Xo(a,u),l=Math.min(a.length-s,u.length-s),c=Jo(a,u,l),f={start:t+s,end:n-c,text:u.slice(s,u.length-c)};return f.start===f.end&&f.text.length===0?null:f}function Zo(r,e,t){var n=Math.min(e.start,t.start),u=Math.max(0,Math.min(e.start+e.text.length,t.end)-t.start),a=sa(r,e,t),s=Math.max(t.start+t.text.length,e.start+e.text.length+(e.start+e.text.length>t.start?t.text.length:0)-u),l=a.slice(n,s),c=Math.max(e.end,t.end-e.text.length+(e.end-e.start));return ia(r,{start:n,end:c,text:l})}function Qo(r){var{path:e,diff:t}=r;return{anchor:{path:e,offset:t.start},focus:{path:e,offset:t.end}}}function Lt(r,e){var{path:t,offset:n}=e;if(!o.hasPath(r,t))return null;var u=T.get(r,t);if(!q.isText(u))return null;var a=o.above(r,{match:l=>H.isElement(l)&&o.isBlock(r,l),at:t});if(!a)return null;for(;n>u.text.length;){var s=o.next(r,{at:t,match:q.isText});if(!s||!D.isDescendant(s[1],a[1]))return null;n-=u.text.length,u=s[0],t=s[1]}return{path:t,offset:n}}function cu(r,e){var t=Lt(r,e.anchor);if(!t)return null;if(B.isCollapsed(e))return{anchor:t,focus:t};var n=Lt(r,e.focus);return n?{anchor:t,focus:n}:null}function zt(r,e,t){var n=xe.get(r),u=n==null?void 0:n.find(v=>{var{path:g}=v;return D.equals(g,e.path)});if(!u||e.offset<=u.diff.start)return te.transform(e,t,{affinity:"backward"});var{diff:a}=u;if(e.offset<=a.start+a.text.length){var s={path:e.path,offset:a.start},l=te.transform(s,t,{affinity:"backward"});return l?{path:l.path,offset:l.offset+e.offset-a.start}:null}var c={path:e.path,offset:e.offset-a.text.length+a.end-a.start},f=te.transform(c,t,{affinity:"backward"});return f?t.type==="split_node"&&D.equals(t.path,e.path)&&c.offset<t.position&&a.start<t.position?f:{path:f.path,offset:f.offset+a.text.length-a.end+a.start}:null}function vu(r,e,t){var n=zt(r,e.anchor,t);if(!n)return null;if(B.isCollapsed(e))return{anchor:n,focus:n};var u=zt(r,e.focus,t);return u?{anchor:n,focus:u}:null}function _o(r,e){var{path:t,diff:n,id:u}=r;switch(e.type){case"insert_text":return!D.equals(e.path,t)||e.offset>=n.end?r:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:u,path:t}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:u,path:t};case"remove_text":return!D.equals(e.path,t)||e.offset>=n.end?r:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:u,path:t}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:u,path:t};case"split_node":return!D.equals(e.path,t)||e.position>=n.end?{diff:n,id:u,path:D.transform(t,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:u,path:t}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:u,path:D.transform(t,e,{affinity:"forward"})};case"merge_node":return D.equals(e.path,t)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:u,path:D.transform(t,e)}:{diff:n,id:u,path:D.transform(t,e)}}var a=D.transform(t,e);return a?{diff:n,path:a,id:u}:null}var du=(r,e)=>{var t=(e.top+e.bottom)/2;return r.top<=t&&r.bottom>=t},Du=(r,e,t)=>{var n=Z.toDOMRange(r,e).getBoundingClientRect(),u=Z.toDOMRange(r,t).getBoundingClientRect();return du(n,u)&&du(u,n)},el=(r,e)=>{var t=o.range(r,B.end(e)),n=Array.from(o.positions(r,{at:e})),u=0,a=n.length,s=Math.floor(a/2);if(Du(r,o.range(r,n[u]),t))return o.range(r,n[u],t);if(n.length<2)return o.range(r,n[n.length-1],t);for(;s!==n.length&&s!==u;)Du(r,o.range(r,n[s]),t)?a=s:u=s,s=Math.floor((u+a)/2);return o.range(r,n[a],t)};function gu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function hu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gu(Object(t),!0).forEach(function(n){ta(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var rl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:u,onChange:a,deleteBackward:s,addMark:l,removeMark:c}=n;return tt.set(n,new WeakMap),n.addMark=(f,v)=>{var g,d;(g=en.get(n))===null||g===void 0||g(),!Ie.get(n)&&(d=xe.get(n))!==null&&d!==void 0&&d.length&&Ie.set(n,null),Ve.delete(n),l(f,v)},n.removeMark=f=>{var v;!Ie.get(n)&&(v=xe.get(n))!==null&&v!==void 0&&v.length&&Ie.set(n,null),Ve.delete(n),c(f)},n.deleteBackward=f=>{if(f!=="line")return s(f);if(n.selection&&B.isCollapsed(n.selection)){var v=o.above(n,{match:p=>H.isElement(p)&&o.isBlock(n,p),at:n.selection});if(v){var[,g]=v,d=o.range(n,g,n.selection.anchor),C=el(n,d);B.isCollapsed(C)||w.delete(n,{at:C})}}},n.apply=f=>{var v=[],g=[],d=xe.get(n);if(d!=null&&d.length){var C=d.map(P=>_o(P,f)).filter(Boolean);xe.set(n,C)}var p=Xe.get(n);p&&Xe.set(n,vu(n,p,f));var h=Ye.get(n);if(h!=null&&h.at){var i=te.isPoint(h==null?void 0:h.at)?zt(n,h.at,f):vu(n,h.at,f);Ye.set(n,i?hu(hu({},h),{},{at:i}):null)}switch(f.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{v.push(...fr(n,f.path));break}case"set_selection":{var A;(A=Fr.get(n))===null||A===void 0||A.unref(),Fr.delete(n);break}case"insert_node":case"remove_node":{v.push(...fr(n,D.parent(f.path)));break}case"merge_node":{var E=D.previous(f.path);v.push(...fr(n,E));break}case"move_node":{var F=D.common(D.parent(f.path),D.parent(f.newPath));v.push(...fr(n,F));var y;D.isBefore(f.path,f.newPath)?(v.push(...fr(n,D.parent(f.path))),y=f.newPath):(v.push(...fr(n,D.parent(f.newPath))),y=f.path);var S=T.get(e,D.parent(y)),V=Z.findKey(n,S),k=o.pathRef(n,D.parent(y));g.push([k,V]);break}}switch(u(f),f.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":dr.set(n,!0)}for(var[$,K]of v){var[z]=o.node(n,$);Jr.set(z,K)}for(var[M,b]of g){if(M.current){var[O]=o.node(n,M.current);Jr.set(O,b)}M.unref()}},n.setFragmentData=f=>{var{selection:v}=n;if(v){var[g,d]=B.edges(v),C=o.void(n,{at:g.path}),p=o.void(n,{at:d.path});if(!(B.isCollapsed(v)&&!C)){var h=Z.toDOMRange(n,v),i=h.cloneContents(),A=i.childNodes[0];if(i.childNodes.forEach(z=>{z.textContent&&z.textContent.trim()!==""&&(A=z)}),p){var[E]=p,F=h.cloneRange(),y=Z.toDOMNode(n,E);F.setEndAfter(y),i=F.cloneContents()}if(C&&(A=i.querySelector("[data-slate-spacer]")),Array.from(i.querySelectorAll("[data-slate-zero-width]")).forEach(z=>{var M=z.getAttribute("data-slate-zero-width")==="n";z.textContent=M?`
`:""}),Zu(A)){var S=A.ownerDocument.createElement("span");S.style.whiteSpace="pre",S.appendChild(A),i.appendChild(S),A=S}var V=n.getFragment(),k=JSON.stringify(V),$=window.btoa(encodeURIComponent(k));A.setAttribute("data-slate-fragment",$),f.setData("application/".concat(t),$);var K=i.ownerDocument.createElement("div");return K.appendChild(i),K.setAttribute("hidden","true"),i.ownerDocument.body.appendChild(K),f.setData("text/html",K.innerHTML),f.setData("text/plain",_u(K)),i.ownerDocument.body.removeChild(K),f}}},n.insertData=f=>{n.insertFragmentData(f)||n.insertTextData(f)},n.insertFragmentData=f=>{var v=f.getData("application/".concat(t))||Mo(f);if(v){var g=decodeURIComponent(window.atob(v)),d=JSON.parse(g);return n.insertFragment(d),!0}return!1},n.insertTextData=f=>{var v=f.getData("text/plain");if(v){var g=v.split(/\r\n|\r|\n/),d=!1;for(var C of g)d&&w.splitNodes(n,{always:!0}),n.insertText(C),d=!0;return!0}return!1},n.onChange=f=>{var v=kt.get(n);v&&v(f),a(f)},n},fr=(r,e)=>{var t=[];for(var[n,u]of o.levels(r,{at:e})){var a=Z.findKey(r,n);t.push([u,a])}return t},tl=3,nl={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},ul={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},al={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},he=r=>{var e=nl[r],t=ul[r],n=al[r],u=e&&At.isHotkey(e),a=t&&At.isHotkey(t),s=n&&At.isHotkey(n);return l=>!!(u&&u(l)||fu&&a&&a(l)||!fu&&s&&s(l))},Ce={isBold:he("bold"),isCompose:he("compose"),isMoveBackward:he("moveBackward"),isMoveForward:he("moveForward"),isDeleteBackward:he("deleteBackward"),isDeleteForward:he("deleteForward"),isDeleteLineBackward:he("deleteLineBackward"),isDeleteLineForward:he("deleteLineForward"),isDeleteWordBackward:he("deleteWordBackward"),isDeleteWordForward:he("deleteWordForward"),isExtendBackward:he("extendBackward"),isExtendForward:he("extendForward"),isExtendLineBackward:he("extendLineBackward"),isExtendLineForward:he("extendLineForward"),isItalic:he("italic"),isMoveLineBackward:he("moveLineBackward"),isMoveLineForward:he("moveLineForward"),isMoveWordBackward:he("moveWordBackward"),isMoveWordForward:he("moveWordForward"),isRedo:he("redo"),isSoftBreak:he("insertSoftBreak"),isSplitBlock:he("splitBlock"),isTransposeCharacter:he("transposeCharacter"),isUndo:he("undo")};function sl(r,e){if(r==null)return{};var t={},n=Object.keys(r),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Cu(r,e){if(r==null)return{};var t=sl(r,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}var il=["anchor","focus"],ol=["anchor","focus"],ll=(r,e)=>Object.keys(r).length===Object.keys(e).length&&Object.keys(r).every(t=>e.hasOwnProperty(t)&&r[t]===e[t]),oa=(r,e)=>{var t=Cu(r,il),n=Cu(e,ol);return r[hr]===e[hr]&&ll(t,n)},fl=(r,e)=>{if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],u=e[t];if(!B.equals(n,u)||!oa(n,u))return!1}return!0},cl=(r,e)=>{if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++){var n=r[t],u=e[t];if(n.anchor.offset!==u.anchor.offset||n.focus.offset!==u.focus.offset||!oa(n,u))return!1}return!0},ur=[],vl=function(){return ur.some(function(r){return r.activeTargets.length>0})},dl=function(){return ur.some(function(r){return r.skippedTargets.length>0})},mu="ResizeObserver loop completed with undelivered notifications.",Dl=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:mu}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=mu),window.dispatchEvent(r)},Sr;(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Sr||(Sr={}));var ar=function(r){return Object.freeze(r)},gl=function(){function r(e,t){this.inlineSize=e,this.blockSize=t,ar(this)}return r}(),la=function(){function r(e,t,n,u){return this.x=e,this.y=t,this.width=n,this.height=u,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ar(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,u=e.top,a=e.right,s=e.bottom,l=e.left,c=e.width,f=e.height;return{x:t,y:n,top:u,right:a,bottom:s,left:l,width:c,height:f}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}(),rn=function(r){return r instanceof SVGElement&&"getBBox"in r},fa=function(r){if(rn(r)){var e=r.getBBox(),t=e.width,n=e.height;return!t&&!n}var u=r,a=u.offsetWidth,s=u.offsetHeight;return!(a||s||r.getClientRects().length)},pu=function(r){var e;if(r instanceof Element)return!0;var t=(e=r==null?void 0:r.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&r instanceof t.Element)},hl=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},br=typeof window<"u"?window:{},kr=new WeakMap,Bu=/auto|scroll/,Cl=/^tb|vertical/,ml=/msie|trident/i.test(br.navigator&&br.navigator.userAgent),$e=function(r){return parseFloat(r||"0")},Dr=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),new gl((t?e:r)||0,(t?r:e)||0)},Eu=ar({devicePixelContentBoxSize:Dr(),borderBoxSize:Dr(),contentBoxSize:Dr(),contentRect:new la(0,0,0,0)}),ca=function(r,e){if(e===void 0&&(e=!1),kr.has(r)&&!e)return kr.get(r);if(fa(r))return kr.set(r,Eu),Eu;var t=getComputedStyle(r),n=rn(r)&&r.ownerSVGElement&&r.getBBox(),u=!ml&&t.boxSizing==="border-box",a=Cl.test(t.writingMode||""),s=!n&&Bu.test(t.overflowY||""),l=!n&&Bu.test(t.overflowX||""),c=n?0:$e(t.paddingTop),f=n?0:$e(t.paddingRight),v=n?0:$e(t.paddingBottom),g=n?0:$e(t.paddingLeft),d=n?0:$e(t.borderTopWidth),C=n?0:$e(t.borderRightWidth),p=n?0:$e(t.borderBottomWidth),h=n?0:$e(t.borderLeftWidth),i=g+f,A=c+v,E=h+C,F=d+p,y=l?r.offsetHeight-F-r.clientHeight:0,S=s?r.offsetWidth-E-r.clientWidth:0,V=u?i+E:0,k=u?A+F:0,$=n?n.width:$e(t.width)-V-S,K=n?n.height:$e(t.height)-k-y,z=$+i+S+E,M=K+A+y+F,b=ar({devicePixelContentBoxSize:Dr(Math.round($*devicePixelRatio),Math.round(K*devicePixelRatio),a),borderBoxSize:Dr(z,M,a),contentBoxSize:Dr($,K,a),contentRect:new la(g,c,$,K)});return kr.set(r,b),b},va=function(r,e,t){var n=ca(r,t),u=n.borderBoxSize,a=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Sr.DEVICE_PIXEL_CONTENT_BOX:return s;case Sr.BORDER_BOX:return u;default:return a}},pl=function(){function r(e){var t=ca(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=ar([t.borderBoxSize]),this.contentBoxSize=ar([t.contentBoxSize]),this.devicePixelContentBoxSize=ar([t.devicePixelContentBoxSize])}return r}(),da=function(r){if(fa(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e},Bl=function(){var r=1/0,e=[];ur.forEach(function(s){if(s.activeTargets.length!==0){var l=[];s.activeTargets.forEach(function(f){var v=new pl(f.target),g=da(f.target);l.push(v),f.lastReportedSize=va(f.target,f.observedBox),g<r&&(r=g)}),e.push(function(){s.callback.call(s.observer,l,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var u=n[t];u()}return r},Au=function(r){ur.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(u){u.isActive()&&(da(u.target)>r?t.activeTargets.push(u):t.skippedTargets.push(u))})})},El=function(){var r=0;for(Au(r);vl();)r=Bl(),Au(r);return dl()&&Dl(),r>0},wt,Da=[],Al=function(){return Da.splice(0).forEach(function(r){return r()})},Fl=function(r){if(!wt){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Al()}).observe(t,n),wt=function(){t.textContent="".concat(e?e--:e++)}}Da.push(r),wt()},bl=function(r){Fl(function(){requestAnimationFrame(r)})},Vr=0,wl=function(){return!!Vr},Ol=250,yl={attributes:!0,characterData:!0,childList:!0,subtree:!0},Fu=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],bu=function(r){return r===void 0&&(r=0),Date.now()+r},Ot=!1,xl=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=Ol),!Ot){Ot=!0;var n=bu(e);bl(function(){var u=!1;try{u=El()}finally{if(Ot=!1,e=n-bu(),!wl())return;u?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,yl)};document.body?t():br.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Fu.forEach(function(t){return br.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Fu.forEach(function(t){return br.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),$t=new xl,wu=function(r){!Vr&&r>0&&$t.start(),Vr+=r,!Vr&&$t.stop()},Pl=function(r){return!rn(r)&&!hl(r)&&getComputedStyle(r).display==="inline"},Sl=function(){function r(e,t){this.target=e,this.observedBox=t||Sr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=va(this.target,this.observedBox,!0);return Pl(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}(),Tl=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}(),Lr=new WeakMap,Ou=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},zr=function(){function r(){}return r.connect=function(e,t){var n=new Tl(e,t);Lr.set(e,n)},r.observe=function(e,t,n){var u=Lr.get(e),a=u.observationTargets.length===0;Ou(u.observationTargets,t)<0&&(a&&ur.push(u),u.observationTargets.push(new Sl(t,n&&n.box)),wu(1),$t.schedule())},r.unobserve=function(e,t){var n=Lr.get(e),u=Ou(n.observationTargets,t),a=n.observationTargets.length===1;u>=0&&(a&&ur.splice(ur.indexOf(n),1),n.observationTargets.splice(u,1),wu(-1))},r.disconnect=function(e){var t=this,n=Lr.get(e);n.observationTargets.slice().forEach(function(u){return t.unobserve(e,u.target)}),n.activeTargets.splice(0,n.activeTargets.length)},r}(),Rl=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");zr.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!pu(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");zr.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!pu(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");zr.unobserve(this,e)},r.prototype.disconnect=function(){zr.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}();function jl(r,e){if(r==null)return{};var t={},n=Object.keys(r),u,a;for(a=0;a<n.length;a++)u=n[a],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Zr(r,e){if(r==null)return{};var t=jl(r,e),n,u;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(u=0;u<a.length;u++)n=a[u],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Tr(r){"@babel/helpers - typeof";return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(r)}function Nl(r,e){if(Tr(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Tr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ml(r){var e=Nl(r,"string");return Tr(e)==="symbol"?e:String(e)}function qe(r,e,t){return e=Ml(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var tn=I.createContext(null),Qe=()=>{var r=I.useContext(tn);if(!r)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return r},N=Z;function yu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function $r(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yu(Object(t),!0).forEach(function(n){qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Il=25,kl=200,Ll=function(){},zl=r=>(r==null?void 0:r.constructor.name)==="DataTransfer";function $l(r){var{editor:e,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:n}=r,u=!1,a=null,s=null,l=null,c=0,f=!1,v=()=>{var b=Xe.get(e);if(Xe.delete(e),b){var{selection:O}=e,P=cu(e,b);P&&(!O||!B.equals(P,O))&&w.select(e,P)}},g=()=>{var b=Ye.get(e);if(Ye.delete(e),!!b){if(b.at){var O=te.isPoint(b.at)?Lt(e,b.at):cu(e,b.at);if(!O)return;var P=o.range(e,O);(!e.selection||!B.equals(e.selection,P))&&w.select(e,O)}b.run()}},d=()=>{if(s&&(clearTimeout(s),s=null),l&&(clearTimeout(l),l=null),!y()&&!F()){v();return}u||(u=!0,setTimeout(()=>u=!1)),F()&&(u="action");var b=e.selection&&o.rangeRef(e,e.selection,{affinity:"forward"});Ve.set(e,e.marks),Ll("flush",Ye.get(e),xe.get(e));for(var O=y(),P;P=(R=xe.get(e))===null||R===void 0?void 0:R[0];){var R,_,W=Ie.get(e);W!==void 0&&(Ie.delete(e),e.marks=W),W&&f===!1&&(f=null);var ue=Qo(P);(!e.selection||!B.equals(e.selection,ue))&&w.select(e,ue),P.diff.text?o.insertText(e,P.diff.text):o.deleteFragment(e),xe.set(e,(_=xe.get(e))===null||_===void 0?void 0:_.filter(ie=>{var{id:ae}=ie;return ae!==P.id})),Yo(e,P)||(O=!1,Ye.delete(e),Ve.delete(e),u="action",Xe.delete(e),t.cancel(),n.cancel(),b==null||b.unref())}var ee=b==null?void 0:b.unref();if(ee&&!Xe.get(e)&&(!e.selection||!B.equals(ee,e.selection))&&w.select(e,ee),F()){g();return}O&&t(),t.flush(),n.flush(),v();var ne=Ve.get(e);Ve.delete(e),ne!==void 0&&(e.marks=ne,e.onChange())},C=b=>{a&&clearTimeout(a),a=setTimeout(()=>{tr.set(e,!1),d()},Il)},p=b=>{tr.set(e,!0),a&&(clearTimeout(a),a=null)},h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,P=Mt.get(e);if(P){if(y()||O){P.style.display="none";return}P.style.removeProperty("display")}},i=(b,O)=>{var P,R=(P=xe.get(e))!==null&&P!==void 0?P:[];xe.set(e,R);var _=T.leaf(e,b),W=R.findIndex(ne=>D.equals(ne.path,b));if(W<0){var ue=ia(_.text,O);ue&&R.push({path:b,diff:O,id:c++}),h();return}var ee=Zo(_.text,R[W].diff,O);if(!ee){R.splice(W,1),h();return}R[W]=$r($r({},R[W]),{},{diff:ee})},A=function(O){var{at:P}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f=!1,Xe.delete(e),t.cancel(),n.cancel(),F()&&d(),Ye.set(e,{at:P,run:O}),l=setTimeout(d)},E=b=>{var O;if(s&&(clearTimeout(s),s=null),!dr.get(e)){var{inputType:P}=b,R=null,_=b.dataTransfer||b.data||void 0;f!==!1&&P!=="insertText"&&P!=="insertCompositionText"&&(f=!1);var[W]=b.getTargetRanges();W&&(R=N.toSlateRange(e,W,{exactMatch:!1,suppressThrow:!0}));var ue=N.getWindow(e),ee=ue.getSelection();if(!R&&ee&&(W=ee,R=N.toSlateRange(e,ee,{exactMatch:!1,suppressThrow:!0})),R=(O=R)!==null&&O!==void 0?O:e.selection,!!R){var ne=!0;if(P.startsWith("delete")){if(B.isExpanded(R)){var[ie,ae]=B.edges(R),re=T.leaf(e,ie.path);if(re.text.length===ie.offset&&ae.offset===0){var Be=o.next(e,{at:ie.path,match:q.isText});Be&&D.equals(Be[1],ae.path)&&(R={anchor:ae,focus:ae})}}var X=P.endsWith("Backward")?"backward":"forward",[m,L]=B.edges(R),[x,j]=o.leaf(e,m.path),Q={text:"",start:m.offset,end:L.offset},U=xe.get(e),oe=U==null?void 0:U.find(ye=>D.equals(ye.path,j)),se=oe?[oe.diff,Q]:[Q],J=sa(x.text,...se);if(J.length===0&&(ne=!1),B.isExpanded(R)){if(ne&&D.equals(R.anchor.path,R.focus.path)){var fe={path:R.anchor.path,offset:m.offset},de=o.range(e,fe,fe);return k(de),i(R.anchor.path,{text:"",end:L.offset,start:m.offset})}return A(()=>o.deleteFragment(e,{direction:X}),{at:R})}}switch(P){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>o.deleteFragment(e),{at:R});case"deleteContent":case"deleteContentForward":{var{anchor:me}=R;if(ne&&B.isCollapsed(R)){var ce=T.leaf(e,me.path);if(me.offset<ce.text.length)return i(me.path,{text:"",start:me.offset,end:me.offset+1})}return A(()=>o.deleteForward(e),{at:R})}case"deleteContentBackward":{var Ee,{anchor:Fe}=R,ke=Nt(W)?W.isCollapsed:!!((Ee=W)!==null&&Ee!==void 0&&Ee.collapsed);return ne&&ke&&B.isCollapsed(R)&&Fe.offset>0?i(Fe.path,{text:"",start:Fe.offset-1,end:Fe.offset}):A(()=>o.deleteBackward(e),{at:R})}case"deleteEntireSoftLine":return A(()=>{o.deleteBackward(e,{unit:"line"}),o.deleteForward(e,{unit:"line"})},{at:R});case"deleteHardLineBackward":return A(()=>o.deleteBackward(e,{unit:"block"}),{at:R});case"deleteSoftLineBackward":return A(()=>o.deleteBackward(e,{unit:"line"}),{at:R});case"deleteHardLineForward":return A(()=>o.deleteForward(e,{unit:"block"}),{at:R});case"deleteSoftLineForward":return A(()=>o.deleteForward(e,{unit:"line"}),{at:R});case"deleteWordBackward":return A(()=>o.deleteBackward(e,{unit:"word"}),{at:R});case"deleteWordForward":return A(()=>o.deleteForward(e,{unit:"word"}),{at:R});case"insertLineBreak":return A(()=>o.insertSoftBreak(e),{at:R});case"insertParagraph":return A(()=>o.insertBreak(e),{at:R});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(zl(_))return A(()=>N.insertData(e,_),{at:R});var ve=_??"";if(Ie.get(e)&&(ve=ve.replace("\uFEFF","")),P==="insertText"&&/.*\n.*\n$/.test(ve)&&(ve=ve.slice(0,-1)),ve.includes(`
`))return A(()=>{var ye=ve.split(`
`);ye.forEach((Le,_e)=>{Le&&o.insertText(e,Le),_e!==ye.length-1&&o.insertSoftBreak(e)})},{at:R});if(D.equals(R.anchor.path,R.focus.path)){var[Re,je]=B.edges(R),le={start:Re.offset,end:je.offset,text:ve};if(ve&&f&&P==="insertCompositionText"){var De=f.start+f.text.search(/\S|$/),Ue=le.start+le.text.search(/\S|$/);Ue===De+1&&le.end===f.start+f.text.length?(le.start-=1,f=null,z()):f=!1}else P==="insertText"?f===null?f=le:f&&B.isCollapsed(R)&&f.end+f.text.length===Re.offset?f=$r($r({},f),{},{text:f.text+ve}):f=!1:f=!1;if(ne){i(Re.path,le);return}}return A(()=>o.insertText(e,ve),{at:R})}}}}},F=()=>!!Ye.get(e),y=()=>{var b;return!!((b=xe.get(e))!==null&&b!==void 0&&b.length)},S=()=>F()||y(),V=()=>u,k=b=>{Xe.set(e,b),s&&(clearTimeout(s),s=null);var{selection:O}=e;if(b){var P=!O||!D.equals(O.anchor.path,b.anchor.path),R=!O||!D.equals(O.anchor.path.slice(0,-1),b.anchor.path.slice(0,-1));(P&&f||R)&&(f=!1),(P||y())&&(s=setTimeout(d,kl))}},$=()=>{(F()||!y())&&d()},K=b=>{y()||(h(!0),setTimeout(h))},z=()=>{F()||(l=setTimeout(d))},M=b=>{if(!(y()||F())&&b.some(P=>Zt(e,P,b))){var O;(O=ua.get(e))===null||O===void 0||O()}};return{flush:d,scheduleFlush:z,hasPendingDiffs:y,hasPendingAction:F,hasPendingChanges:S,isFlushing:V,handleUserSelect:k,handleCompositionEnd:C,handleCompositionStart:p,handleDOMBeforeInput:E,handleKeyDown:K,handleDomMutations:M,handleInput:$}}function Wl(){var r=I.useRef(!1);return I.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),r.current}var Rr=qr?I.useLayoutEffect:I.useEffect;function ql(r,e,t){var[n]=I.useState(()=>new MutationObserver(e));Rr(()=>{n.takeRecords()}),I.useEffect(()=>{if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(r.current,t),()=>n.disconnect()},[n,r,t])}var Hl=["node"];function xu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Vl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xu(Object(t),!0).forEach(function(n){qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Kl={subtree:!0,childList:!0,characterData:!0},Ul=we?r=>{var{node:e}=r,t=Zr(r,Hl);if(!we)return null;var n=Qe(),u=Wl(),[a]=I.useState(()=>$l(Vl({editor:n},t)));return ql(e,a.handleDomMutations,Kl),en.set(n,a.scheduleFlush),u&&a.flush(),a}:()=>null;function Pu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Gl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pu(Object(t),!0).forEach(function(n){qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Yl=r=>{var{isLast:e,leaf:t,parent:n,text:u}=r,a=Qe(),s=N.findPath(a,u),l=D.parent(s),c=!!t[aa];return a.isVoid(n)?Y.createElement(yt,{length:T.string(n).length}):t.text===""&&n.children[n.children.length-1]===u&&!a.isInline(n)&&o.string(a,l)===""?Y.createElement(yt,{isLineBreak:!0,isMarkPlaceholder:c}):t.text===""?Y.createElement(yt,{isMarkPlaceholder:c}):e&&t.text.slice(-1)===`
`?Y.createElement(Su,{isTrailing:!0,text:t.text}):Y.createElement(Su,{text:t.text})},Su=r=>{var{text:e,isTrailing:t=!1}=r,n=I.useRef(null),u=()=>"".concat(e??"").concat(t?`
`:""),[a]=I.useState(u);return Rr(()=>{var s=u();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),Y.createElement(Xl,{ref:n},a)},Xl=I.memo(I.forwardRef((r,e)=>Y.createElement("span",{"data-slate-string":!0,ref:e},r.children))),yt=r=>{var{length:e=0,isLineBreak:t=!1,isMarkPlaceholder:n=!1}=r,u={"data-slate-zero-width":t?"n":"z","data-slate-length":e};return n&&(u["data-slate-mark-placeholder"]=!0),Y.createElement("span",Gl({},u),!(we||ea)||!t?"\uFEFF":null,t?Y.createElement("br",null):null)};function Tu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function ga(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tu(Object(t),!0).forEach(function(n){qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Jl=we?300:0;function Zl(r,e){r.current&&(r.current.disconnect(),e&&(r.current=null))}function Ru(r){r.current&&(clearTimeout(r.current),r.current=null)}var Ql=r=>{var{leaf:e,isLast:t,text:n,parent:u,renderPlaceholder:a,renderLeaf:s=E=>Y.createElement(ef,ga({},E))}=r,l=Qe(),c=I.useRef(null),f=I.useRef(null),[v,g]=I.useState(!1),d=I.useRef(null),C=I.useCallback(E=>{if(Zl(c,E==null),E==null){var F;Mt.delete(l),(F=e.onPlaceholderResize)===null||F===void 0||F.call(e,null)}else{if(Mt.set(l,E),!c.current){var y=window.ResizeObserver||Rl;c.current=new y(()=>{var S;(S=e.onPlaceholderResize)===null||S===void 0||S.call(e,E)})}c.current.observe(E),f.current=E}},[f,e,l]),p=Y.createElement(Yl,{isLast:t,leaf:e,parent:u,text:n}),h=!!e[hr];if(I.useEffect(()=>(h?d.current||(d.current=setTimeout(()=>{g(!0),d.current=null},Jl)):(Ru(d),g(!1)),()=>Ru(d)),[h,g]),h&&v){var i={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:rr?"inherit":void 0},contentEditable:!1,ref:C}};p=Y.createElement(Y.Fragment,null,a(i),p)}var A={"data-slate-leaf":!0};return s({attributes:A,children:p,leaf:e,text:n})},_l=Y.memo(Ql,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&q.equals(e.leaf,r.leaf)&&e.leaf[hr]===r.leaf[hr]),ef=r=>{var{attributes:e,children:t}=r;return Y.createElement("span",ga({},e),t)},rf=r=>{for(var{decorations:e,isLast:t,parent:n,renderPlaceholder:u,renderLeaf:a,text:s}=r,l=Qe(),c=I.useRef(null),f=q.decorations(s,e),v=N.findKey(l,s),g=[],d=0;d<f.length;d++){var C=f[d];g.push(Y.createElement(_l,{isLast:t&&d===f.length-1,key:"".concat(v.id,"-").concat(d),renderPlaceholder:u,leaf:C,text:s,parent:n,renderLeaf:a}))}var p=I.useCallback(h=>{var i=tt.get(l);h?(i==null||i.set(v,h),nr.set(s,h),Pr.set(h,s)):(i==null||i.delete(v),nr.delete(s),c.current&&Pr.delete(c.current)),c.current=h},[c,l,v,s]);return Y.createElement("span",{"data-slate-node":"text",ref:p},g)},ha=Y.memo(rf,(r,e)=>e.parent===r.parent&&e.isLast===r.isLast&&e.renderLeaf===r.renderLeaf&&e.renderPlaceholder===r.renderPlaceholder&&e.text===r.text&&cl(e.decorations,r.decorations));function ju(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function Wt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ju(Object(t),!0).forEach(function(n){qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ju(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var tf=r=>{var{decorations:e,element:t,renderElement:n=E=>Y.createElement(uf,Wt({},E)),renderPlaceholder:u,renderLeaf:a,selection:s}=r,l=Qe(),c=of(),f=l.isInline(t),v=N.findKey(l,t),g=I.useCallback(E=>{var F=tt.get(l);E?(F==null||F.set(v,E),nr.set(t,E),Pr.set(E,t)):(F==null||F.delete(v),nr.delete(t))},[l,v,t]),d=ma({decorations:e,node:t,renderElement:n,renderPlaceholder:u,renderLeaf:a,selection:s}),C={"data-slate-node":"element",ref:g};if(f&&(C["data-slate-inline"]=!0),!f&&o.hasInlines(l,t)){var p=T.string(t),h=Uu(p);h==="rtl"&&(C.dir=h)}if(o.isVoid(l,t)){C["data-slate-void"]=!0,!c&&f&&(C.contentEditable=!1);var i=f?"span":"div",[[A]]=T.texts(t);d=Y.createElement(i,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Y.createElement(ha,{renderPlaceholder:u,decorations:[],isLast:!1,parent:t,text:A})),Qt.set(A,0),_t.set(A,t)}return n({attributes:C,children:d,element:t})},nf=Y.memo(tf,(r,e)=>r.element===e.element&&r.renderElement===e.renderElement&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&fl(r.decorations,e.decorations)&&(r.selection===e.selection||!!r.selection&&!!e.selection&&B.equals(r.selection,e.selection))),uf=r=>{var{attributes:e,children:t,element:n}=r,u=Qe(),a=u.isInline(n)?"span":"div";return Y.createElement(a,Wt(Wt({},e),{},{style:{position:"relative"}}),t)},Ca=I.createContext(()=>[]),af=()=>I.useContext(Ca),sf=I.createContext(!1),ma=r=>{var{decorations:e,node:t,renderElement:n,renderPlaceholder:u,renderLeaf:a,selection:s}=r,l=af(),c=Qe();dr.set(c,!1);for(var f=N.findPath(c,t),v=[],g=H.isElement(t)&&!c.isInline(t)&&o.hasInlines(c,t),d=0;d<t.children.length;d++){var C=f.concat(d),p=t.children[d],h=N.findKey(c,p),i=o.range(c,C),A=s&&B.intersection(i,s),E=l([p,C]);for(var F of e){var y=B.intersection(F,i);y&&E.push(y)}H.isElement(p)?v.push(Y.createElement(sf.Provider,{key:"provider-".concat(h.id),value:!!A},Y.createElement(nf,{decorations:E,element:p,key:h.id,renderElement:n,renderPlaceholder:u,renderLeaf:a,selection:A}))):v.push(Y.createElement(ha,{decorations:E,key:h.id,isLast:g&&d===t.children.length-1,parent:t,renderPlaceholder:u,renderLeaf:a,text:p})),Qt.set(p,d),_t.set(p,t)}return v},pa=I.createContext(!1),of=()=>I.useContext(pa),Ba=I.createContext(null),lf=()=>{var r=I.useContext(Ba);if(!r)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=r;return e};function ff(){var r=Qe(),e=I.useRef(!1),t=I.useRef(0),n=I.useCallback(()=>{if(!e.current){e.current=!0;var u=N.getWindow(r);u.cancelAnimationFrame(t.current),t.current=u.requestAnimationFrame(()=>{e.current=!1})}},[r]);return I.useEffect(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:e,onUserInput:n}}var cf=(r,e)=>{var t=[],n=()=>{t=[]},u=s=>{if(e.current){var l=s.filter(c=>Zt(r,c,s));t.push(...l)}};function a(){t.length>0&&(t.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(l=>{s.target.insertBefore(l,s.nextSibling)}),s.addedNodes.forEach(l=>{s.target.removeChild(l)}))}),n())}return{registerMutations:u,restoreDOM:a,clear:n}},vf={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Ea extends I.Component{constructor(){super(...arguments),qe(this,"context",null),qe(this,"manager",null),qe(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(t.current,vf)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=cf(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,n,u=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(u!=null&&u.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(u)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}qe(Ea,"contextType",tn);var df=we?Ea:r=>{var{children:e}=r;return Y.createElement(Y.Fragment,null,e)},Df=I.createContext(!1),gf=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],hf=["text"];function Nu(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function We(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nu(Object(t),!0).forEach(function(n){qe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Nu(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Cf=r=>Y.createElement(Y.Fragment,null,ma(r)),xf=I.forwardRef((r,e)=>{var t=I.useCallback(m=>Y.createElement(mf,We({},m)),[]),{autoFocus:n,decorate:u=pf,onDOMBeforeInput:a,placeholder:s,readOnly:l=!1,renderElement:c,renderLeaf:f,renderPlaceholder:v=t,scrollSelectionIntoView:g=Bf,style:d={},as:C="div",disableDefaultStyles:p=!1}=r,h=Zr(r,gf),i=lf(),[A,E]=I.useState(!1),F=I.useRef(null),y=I.useRef([]),[S,V]=I.useState(),k=I.useRef(!1),{onUserInput:$,receivedUserInput:K}=ff(),[,z]=I.useReducer(m=>m+1,0);ua.set(i,z),It.set(i,l);var M=I.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);I.useEffect(()=>{F.current&&n&&F.current.focus()},[n]);var b=I.useRef(),O=I.useMemo(()=>Fo(()=>{if(dr.get(i)){O();return}var m=N.toDOMNode(i,i),L=m.getRootNode();if(!k.current&&rr&&L instanceof ShadowRoot){k.current=!0;var x=Io();x?document.execCommand("indent"):w.deselect(i),k.current=!1;return}var j=b.current;if((we||!N.isComposing(i))&&(!M.isUpdatingSelection||j!=null&&j.isFlushing())&&!M.isDraggingInternally){var Q=N.findDocumentOrShadowRoot(i),{activeElement:U}=Q,oe=N.toDOMNode(i,i),se=Ar(Q);if(U===oe?(M.latestElement=U,Je.set(i,!0)):Je.delete(i),!se)return w.deselect(i);var{anchorNode:J,focusNode:fe}=se,de=N.hasEditableTarget(i,J)||N.isTargetInsideNonReadonlyVoid(i,J),me=N.hasTarget(i,fe);if(de&&me){var ce=N.toSlateRange(i,se,{exactMatch:!1,suppressThrow:!0});ce&&(!N.isComposing(i)&&!(j!=null&&j.hasPendingChanges())&&!(j!=null&&j.isFlushing())?w.select(i,ce):j==null||j.handleUserSelect(ce))}l&&(!de||!me)&&w.deselect(i)}},100),[i,l,M]),P=I.useMemo(()=>Bo(O,0),[O]);b.current=Ul({node:F,onDOMSelectionChange:O,scheduleOnDOMSelectionChange:P}),Rr(()=>{var m,L,x;F.current&&(x=Jt(F.current))?(na.set(i,x),Hr.set(i,F.current),nr.set(i,F.current),Pr.set(F.current,i)):nr.delete(i);var{selection:j}=i,Q=N.findDocumentOrShadowRoot(i),U=Ar(Q);if(!(!U||!N.isFocused(i)||(m=b.current)!==null&&m!==void 0&&m.hasPendingAction())){var oe=de=>{var me=U.type!=="None";if(!(!j&&!me)){var ce=U.focusNode,Ee;if(vr&&U.rangeCount>1){var Fe=U.getRangeAt(0),ke=U.getRangeAt(U.rangeCount-1);Fe.startContainer===ce?Ee=ke.endContainer:Ee=Fe.startContainer}else Ee=U.anchorNode;var ve=Hr.get(i),Re=!1;if(ve.contains(Ee)&&ve.contains(ce)&&(Re=!0),me&&Re&&j&&!de){var je=N.toSlateRange(i,U,{exactMatch:!0,suppressThrow:!0});if(je&&B.equals(je,j)){var le;if(!M.hasMarkPlaceholder||(le=Ee)!==null&&le!==void 0&&(le=le.parentElement)!==null&&le!==void 0&&le.hasAttribute("data-slate-mark-placeholder"))return}}if(j&&!N.hasRange(i,j)){i.selection=N.toSlateRange(i,U,{exactMatch:!1,suppressThrow:!0});return}M.isUpdatingSelection=!0;var De=null;try{De=j&&N.toDOMRange(i,j)}catch{}return De?(N.isComposing(i)&&!we?U.collapseToEnd():B.isBackward(j)?U.setBaseAndExtent(De.endContainer,De.endOffset,De.startContainer,De.startOffset):U.setBaseAndExtent(De.startContainer,De.startOffset,De.endContainer,De.endOffset),g(i,De)):U.removeAllRanges(),De}};U.rangeCount<=1&&oe();var se=((L=b.current)===null||L===void 0?void 0:L.isFlushing())==="action";if(!we||!se){setTimeout(()=>{M.isUpdatingSelection=!1});return}var J=null,fe=requestAnimationFrame(()=>{if(se){var de=me=>{try{var ce=N.toDOMNode(i,i);ce.focus(),oe(me)}catch{}};de(),J=setTimeout(()=>{de(!0),M.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(fe),J&&clearTimeout(J)}}});var R=I.useCallback(m=>{var L=N.toDOMNode(i,i),x=L.getRootNode();if(k!=null&&k.current&&rr&&x instanceof ShadowRoot){var j=m.getTargetRanges(),Q=j[0],U=new window.Range;U.setStart(Q.startContainer,Q.startOffset),U.setEnd(Q.endContainer,Q.endOffset);var oe=N.toSlateRange(i,U,{exactMatch:!1,suppressThrow:!1});w.select(i,oe),m.preventDefault(),m.stopImmediatePropagation();return}if($(),!l&&N.hasEditableTarget(i,m.target)&&!Ef(m,a)){var se;if(b.current)return b.current.handleDOMBeforeInput(m);P.flush(),O.flush();var{selection:J}=i,{inputType:fe}=m,de=m.dataTransfer||m.data||void 0,me=fe==="insertCompositionText"||fe==="deleteCompositionText";if(me&&N.isComposing(i))return;var ce=!1;if(fe==="insertText"&&J&&B.isCollapsed(J)&&m.data&&m.data.length===1&&/[a-z ]/i.test(m.data)&&J.anchor.offset!==0&&(ce=!0,i.marks&&(ce=!1),!dr.get(i))){var Ee,Fe,{anchor:ke}=J,[ve,Re]=N.toDOMPoint(i,ke),je=(Ee=ve.parentElement)===null||Ee===void 0?void 0:Ee.closest("a"),le=N.getWindow(i);if(ce&&je&&N.hasDOMNode(i,je)){var De,Ue=le==null?void 0:le.document.createTreeWalker(je,NodeFilter.SHOW_TEXT).lastChild();Ue===ve&&((De=Ue.textContent)===null||De===void 0?void 0:De.length)===Re&&(ce=!1)}if(ce&&ve.parentElement&&(le==null||(Fe=le.getComputedStyle(ve.parentElement))===null||Fe===void 0?void 0:Fe.whiteSpace)==="pre"){var ye=o.above(i,{at:ke.path,match:lr=>H.isElement(lr)&&o.isBlock(i,lr)});ye&&T.string(ye[0]).includes("	")&&(ce=!1)}}if((!fe.startsWith("delete")||fe.startsWith("deleteBy"))&&!dr.get(i)){var[Le]=m.getTargetRanges();if(Le){var _e=N.toSlateRange(i,Le,{exactMatch:!1,suppressThrow:!1});if(!J||!B.equals(J,_e)){ce=!1;var ze=!me&&i.selection&&o.rangeRef(i,i.selection);w.select(i,_e),ze&&Fr.set(i,ze)}}}if(me)return;if(ce||m.preventDefault(),J&&B.isExpanded(J)&&fe.startsWith("delete")){var nt=fe.endsWith("Backward")?"backward":"forward";o.deleteFragment(i,{direction:nt});return}switch(fe){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{o.deleteFragment(i);break}case"deleteContent":case"deleteContentForward":{o.deleteForward(i);break}case"deleteContentBackward":{o.deleteBackward(i);break}case"deleteEntireSoftLine":{o.deleteBackward(i,{unit:"line"}),o.deleteForward(i,{unit:"line"});break}case"deleteHardLineBackward":{o.deleteBackward(i,{unit:"block"});break}case"deleteSoftLineBackward":{o.deleteBackward(i,{unit:"line"});break}case"deleteHardLineForward":{o.deleteForward(i,{unit:"block"});break}case"deleteSoftLineForward":{o.deleteForward(i,{unit:"line"});break}case"deleteWordBackward":{o.deleteBackward(i,{unit:"word"});break}case"deleteWordForward":{o.deleteForward(i,{unit:"word"});break}case"insertLineBreak":o.insertSoftBreak(i);break;case"insertParagraph":{o.insertBreak(i);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{fe==="insertFromComposition"&&N.isComposing(i)&&(E(!1),tr.set(i,!1)),(de==null?void 0:de.constructor.name)==="DataTransfer"?N.insertData(i,de):typeof de=="string"&&(ce?y.current.push(()=>o.insertText(i,de)):o.insertText(i,de));break}}var mr=(se=Fr.get(i))===null||se===void 0?void 0:se.unref();Fr.delete(i),mr&&(!i.selection||!B.equals(i.selection,mr))&&w.select(i,mr)}},[i,O,$,a,l,P]),_=I.useCallback(m=>{m==null?(O.cancel(),P.cancel(),Hr.delete(i),nr.delete(i),F.current&&Ge&&F.current.removeEventListener("beforeinput",R)):Ge&&m.addEventListener("beforeinput",R),F.current=m,typeof e=="function"?e(m):e&&(e.current=m)},[O,P,i,R,e]);Rr(()=>{var m=N.getWindow(i),L=j=>{var{target:Q}=j,U=Q instanceof HTMLElement?Q:null,oe=U==null?void 0:U.tagName;oe==="INPUT"||oe==="TEXTAREA"||P()};m.document.addEventListener("selectionchange",L);var x=()=>{M.isDraggingInternally=!1};return m.document.addEventListener("dragend",x),m.document.addEventListener("drop",x),()=>{m.document.removeEventListener("selectionchange",L),m.document.removeEventListener("dragend",x),m.document.removeEventListener("drop",x)}},[P,M]);var W=u([i,[]]),ue=s&&i.children.length===1&&Array.from(T.texts(i)).length===1&&T.string(i)===""&&!A,ee=I.useCallback(m=>{if(m&&ue){var L;V((L=m.getBoundingClientRect())===null||L===void 0?void 0:L.height)}else V(void 0)},[ue]);if(ue){var ne=o.start(i,[]);W.push({[hr]:!0,placeholder:s,onPlaceholderResize:ee,anchor:ne,focus:ne})}var{marks:ie}=i;if(M.hasMarkPlaceholder=!1,i.selection&&B.isCollapsed(i.selection)&&ie){var{anchor:ae}=i.selection,re=T.leaf(i,ae.path),Be=Zr(re,hf);if(!q.equals(re,ie,{loose:!0})){M.hasMarkPlaceholder=!0;var X=Object.fromEntries(Object.keys(Be).map(m=>[m,null]));W.push(We(We(We({[aa]:!0},X),ie),{},{anchor:ae,focus:ae}))}}return I.useEffect(()=>{setTimeout(()=>{var{selection:m}=i;if(m){var{anchor:L}=m,x=T.leaf(i,L.path);if(ie&&!q.equals(x,ie,{loose:!0})){Ie.set(i,ie);return}}Ie.delete(i)})}),Y.createElement(pa.Provider,{value:l},Y.createElement(Df.Provider,{value:A},Y.createElement(Ca.Provider,{value:u},Y.createElement(df,{node:F,receivedUserInput:K},Y.createElement(C,We(We({role:l?void 0:"textbox","aria-multiline":l?void 0:!0},h),{},{spellCheck:Ge||!qr?h.spellCheck:!1,autoCorrect:Ge||!qr?h.autoCorrect:"false",autoCapitalize:Ge||!qr?h.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!l,zindex:-1,suppressContentEditableWarning:!0,ref:_,style:We(We({},p?{}:We({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},S?{minHeight:S}:{})),d),onBeforeInput:I.useCallback(m=>{if(!Ge&&!l&&!be(m,h.onBeforeInput)&&N.hasSelectableTarget(i,m.target)&&(m.preventDefault(),!N.isComposing(i))){var L=m.data;o.insertText(i,L)}},[h.onBeforeInput,i,l]),onInput:I.useCallback(m=>{if(!be(m,h.onInput)){if(b.current){b.current.handleInput();return}for(var L of y.current)L();if(y.current=[],!N.isFocused(i)){var x=m.nativeEvent,j=i;if(x.inputType==="historyUndo"&&typeof j.undo=="function"){j.undo();return}if(x.inputType==="historyRedo"&&typeof j.redo=="function"){j.redo();return}}}},[h.onInput,i]),onBlur:I.useCallback(m=>{if(!(l||M.isUpdatingSelection||!N.hasSelectableTarget(i,m.target)||be(m,h.onBlur))){var L=N.findDocumentOrShadowRoot(i);if(M.latestElement!==L.activeElement){var{relatedTarget:x}=m,j=N.toDOMNode(i,i);if(x!==j&&!(Te(x)&&x.hasAttribute("data-slate-spacer"))){if(x!=null&&Ze(x)&&N.hasDOMNode(i,x)){var Q=N.toSlateNode(i,x);if(H.isElement(Q)&&!i.isVoid(Q))return}if(rr){var U=Ar(L);U==null||U.removeAllRanges()}Je.delete(i)}}}},[l,M.isUpdatingSelection,M.latestElement,i,h.onBlur]),onClick:I.useCallback(m=>{if(N.hasTarget(i,m.target)&&!be(m,h.onClick)&&Ze(m.target)){var L=N.toSlateNode(i,m.target),x=N.findPath(i,L);if(!o.hasPath(i,x)||T.get(i,x)!==L)return;if(m.detail===tl&&x.length>=1){var j=x;if(!(H.isElement(L)&&o.isBlock(i,L))){var Q,U=o.above(i,{match:ce=>H.isElement(ce)&&o.isBlock(i,ce),at:x});j=(Q=U==null?void 0:U[1])!==null&&Q!==void 0?Q:x.slice(0,1)}var oe=o.range(i,j);w.select(i,oe);return}if(l)return;var se=o.start(i,x),J=o.end(i,x),fe=o.void(i,{at:se}),de=o.void(i,{at:J});if(fe&&de&&D.equals(fe[1],de[1])){var me=o.range(i,se);w.select(i,me)}}},[i,h.onClick,l]),onCompositionEnd:I.useCallback(m=>{if(N.hasSelectableTarget(i,m.target)){var L;if(N.isComposing(i)&&Promise.resolve().then(()=>{E(!1),tr.set(i,!1)}),(L=b.current)===null||L===void 0||L.handleCompositionEnd(m),be(m,h.onCompositionEnd)||we)return;if(!rr&&!Wo&&!ea&&!Ho&&!qo&&m.data){var x=Ie.get(i);Ie.delete(i),x!==void 0&&(Ve.set(i,i.marks),i.marks=x),o.insertText(i,m.data);var j=Ve.get(i);Ve.delete(i),j!==void 0&&(i.marks=j)}}},[h.onCompositionEnd,i]),onCompositionUpdate:I.useCallback(m=>{N.hasSelectableTarget(i,m.target)&&!be(m,h.onCompositionUpdate)&&(N.isComposing(i)||(E(!0),tr.set(i,!0)))},[h.onCompositionUpdate,i]),onCompositionStart:I.useCallback(m=>{if(N.hasSelectableTarget(i,m.target)){var L;if((L=b.current)===null||L===void 0||L.handleCompositionStart(m),be(m,h.onCompositionStart)||we)return;E(!0);var{selection:x}=i;if(x&&B.isExpanded(x)){o.deleteFragment(i);return}}},[h.onCompositionStart,i]),onCopy:I.useCallback(m=>{N.hasSelectableTarget(i,m.target)&&!be(m,h.onCopy)&&!Mu(m)&&(m.preventDefault(),N.setFragmentData(i,m.clipboardData,"copy"))},[h.onCopy,i]),onCut:I.useCallback(m=>{if(!l&&N.hasSelectableTarget(i,m.target)&&!be(m,h.onCut)&&!Mu(m)){m.preventDefault(),N.setFragmentData(i,m.clipboardData,"cut");var{selection:L}=i;if(L)if(B.isExpanded(L))o.deleteFragment(i);else{var x=T.parent(i,L.anchor.path);o.isVoid(i,x)&&w.delete(i)}}},[l,i,h.onCut]),onDragOver:I.useCallback(m=>{if(N.hasTarget(i,m.target)&&!be(m,h.onDragOver)){var L=N.toSlateNode(i,m.target);H.isElement(L)&&o.isVoid(i,L)&&m.preventDefault()}},[h.onDragOver,i]),onDragStart:I.useCallback(m=>{if(!l&&N.hasTarget(i,m.target)&&!be(m,h.onDragStart)){var L=N.toSlateNode(i,m.target),x=N.findPath(i,L),j=H.isElement(L)&&o.isVoid(i,L)||o.void(i,{at:x,voids:!0});if(j){var Q=o.range(i,x);w.select(i,Q)}M.isDraggingInternally=!0,N.setFragmentData(i,m.dataTransfer,"drag")}},[l,i,h.onDragStart,M]),onDrop:I.useCallback(m=>{if(!l&&N.hasTarget(i,m.target)&&!be(m,h.onDrop)){m.preventDefault();var L=i.selection,x=N.findEventRange(i,m),j=m.dataTransfer;w.select(i,x),M.isDraggingInternally&&L&&!B.equals(L,x)&&!o.void(i,{at:x,voids:!0})&&w.delete(i,{at:L}),N.insertData(i,j),N.isFocused(i)||N.focus(i)}},[l,i,h.onDrop,M]),onDragEnd:I.useCallback(m=>{!l&&M.isDraggingInternally&&h.onDragEnd&&N.hasTarget(i,m.target)&&h.onDragEnd(m)},[l,M,h,i]),onFocus:I.useCallback(m=>{if(!l&&!M.isUpdatingSelection&&N.hasEditableTarget(i,m.target)&&!be(m,h.onFocus)){var L=N.toDOMNode(i,i),x=N.findDocumentOrShadowRoot(i);if(M.latestElement=x.activeElement,vr&&m.target!==L){L.focus();return}Je.set(i,!0)}},[l,M,i,h.onFocus]),onKeyDown:I.useCallback(m=>{if(!l&&N.hasEditableTarget(i,m.target)){var L;(L=b.current)===null||L===void 0||L.handleKeyDown(m);var{nativeEvent:x}=m;if(N.isComposing(i)&&x.isComposing===!1&&(tr.set(i,!1),E(!1)),be(m,h.onKeyDown)||N.isComposing(i))return;var{selection:j}=i,Q=i.children[j!==null?j.focus.path[0]:0],U=Uu(T.string(Q))==="rtl";if(Ce.isRedo(x)){m.preventDefault();var oe=i;typeof oe.redo=="function"&&oe.redo();return}if(Ce.isUndo(x)){m.preventDefault();var se=i;typeof se.undo=="function"&&se.undo();return}if(Ce.isMoveLineBackward(x)){m.preventDefault(),w.move(i,{unit:"line",reverse:!0});return}if(Ce.isMoveLineForward(x)){m.preventDefault(),w.move(i,{unit:"line"});return}if(Ce.isExtendLineBackward(x)){m.preventDefault(),w.move(i,{unit:"line",edge:"focus",reverse:!0});return}if(Ce.isExtendLineForward(x)){m.preventDefault(),w.move(i,{unit:"line",edge:"focus"});return}if(Ce.isMoveBackward(x)){m.preventDefault(),j&&B.isCollapsed(j)?w.move(i,{reverse:!U}):w.collapse(i,{edge:U?"end":"start"});return}if(Ce.isMoveForward(x)){m.preventDefault(),j&&B.isCollapsed(j)?w.move(i,{reverse:U}):w.collapse(i,{edge:U?"start":"end"});return}if(Ce.isMoveWordBackward(x)){m.preventDefault(),j&&B.isExpanded(j)&&w.collapse(i,{edge:"focus"}),w.move(i,{unit:"word",reverse:!U});return}if(Ce.isMoveWordForward(x)){m.preventDefault(),j&&B.isExpanded(j)&&w.collapse(i,{edge:"focus"}),w.move(i,{unit:"word",reverse:U});return}if(Ge){if((ra||rr)&&j&&(Ce.isDeleteBackward(x)||Ce.isDeleteForward(x))&&B.isCollapsed(j)){var J=T.parent(i,j.anchor.path);if(H.isElement(J)&&o.isVoid(i,J)&&(o.isInline(i,J)||o.isBlock(i,J))){m.preventDefault(),o.deleteBackward(i,{unit:"block"});return}}}else{if(Ce.isBold(x)||Ce.isItalic(x)||Ce.isTransposeCharacter(x)){m.preventDefault();return}if(Ce.isSoftBreak(x)){m.preventDefault(),o.insertSoftBreak(i);return}if(Ce.isSplitBlock(x)){m.preventDefault(),o.insertBreak(i);return}if(Ce.isDeleteBackward(x)){m.preventDefault(),j&&B.isExpanded(j)?o.deleteFragment(i,{direction:"backward"}):o.deleteBackward(i);return}if(Ce.isDeleteForward(x)){m.preventDefault(),j&&B.isExpanded(j)?o.deleteFragment(i,{direction:"forward"}):o.deleteForward(i);return}if(Ce.isDeleteLineBackward(x)){m.preventDefault(),j&&B.isExpanded(j)?o.deleteFragment(i,{direction:"backward"}):o.deleteBackward(i,{unit:"line"});return}if(Ce.isDeleteLineForward(x)){m.preventDefault(),j&&B.isExpanded(j)?o.deleteFragment(i,{direction:"forward"}):o.deleteForward(i,{unit:"line"});return}if(Ce.isDeleteWordBackward(x)){m.preventDefault(),j&&B.isExpanded(j)?o.deleteFragment(i,{direction:"backward"}):o.deleteBackward(i,{unit:"word"});return}if(Ce.isDeleteWordForward(x)){m.preventDefault(),j&&B.isExpanded(j)?o.deleteFragment(i,{direction:"forward"}):o.deleteForward(i,{unit:"word"});return}}}},[l,i,h.onKeyDown]),onPaste:I.useCallback(m=>{!l&&N.hasEditableTarget(i,m.target)&&!be(m,h.onPaste)&&(!Ge||So(m.nativeEvent)||rr)&&(m.preventDefault(),N.insertData(i,m.clipboardData))},[l,i,h.onPaste])}),Y.createElement(Cf,{decorations:W,node:i,renderElement:c,renderPlaceholder:v,renderLeaf:f,selection:i.selection}))))))}),mf=r=>{var{attributes:e,children:t}=r;return Y.createElement("span",We({},e),t,we&&Y.createElement("br",null))},pf=()=>[],Bf=(r,e)=>{if(e.getBoundingClientRect&&(!r.selection||r.selection&&B.isCollapsed(r.selection))){var t=e.startContainer.parentElement;t.getBoundingClientRect=e.getBoundingClientRect.bind(e),Oo(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},be=(r,e)=>{if(!e)return!1;var t=e(r);return t??(r.isDefaultPrevented()||r.isPropagationStopped())},Mu=r=>Ze(r.target)&&(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement),Ef=(r,e)=>{if(!e)return!1;var t=e(r);return t??r.defaultPrevented},Af=I.createContext(!1),Ff=I.createContext({});function bf(r){var e=I.useRef([]).current,t=I.useRef({editor:r}).current,n=I.useCallback(a=>{t.editor=a,e.forEach(s=>s(a))},[e,t]),u=I.useMemo(()=>({getSlate:()=>t.editor,addEventListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1)})}),[e,t]);return{selectorContext:u,onChange:n}}var Aa=parseInt(Y.version.split(".")[0],10),wf=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Pf=r=>{var{editor:e,children:t,onChange:n,onSelectionChange:u,onValueChange:a,initialValue:s}=r,l=Zr(r,wf),[c,f]=Y.useState(()=>{if(!T.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(pe.stringify(s)));if(!o.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(pe.stringify(e)));return e.children=s,Object.assign(e,l),{v:0,editor:e}}),{selectorContext:v,onChange:g}=bf(e),d=I.useCallback(h=>{var i;switch(n&&n(e.children),h==null||(i=h.operation)===null||i===void 0?void 0:i.type){case"set_selection":u==null||u(e.selection);break;default:a==null||a(e.children)}f(A=>({v:A.v+1,editor:e})),g(e)},[e,g,n,u,a]);I.useEffect(()=>(kt.set(e,d),()=>{kt.set(e,()=>{})}),[e,d]);var[C,p]=I.useState(N.isFocused(e));return I.useEffect(()=>{p(N.isFocused(e))},[e]),Rr(()=>{var h=()=>p(N.isFocused(e));return Aa>=17?(document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",h)}):(document.addEventListener("focus",h,!0),document.addEventListener("blur",h,!0),()=>{document.removeEventListener("focus",h,!0),document.removeEventListener("blur",h,!0)})},[]),Y.createElement(Ff.Provider,{value:v},Y.createElement(Ba.Provider,{value:c},Y.createElement(tn.Provider,{value:c.editor},Y.createElement(Af.Provider,{value:C},t))))},Sf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e;n=rl(n,t);var{onChange:u}=n;return n.onChange=a=>{var s=Aa<18?Pa.unstable_batchedUpdates:l=>l();s(()=>{u(a)})},n};export{xf as E,Pf as S,w as T,o as a,yf as c,Sf as w};
