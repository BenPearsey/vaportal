import{K as $,r as x,j as e,L as k,$ as f,S as o,t as g}from"./app-DUSEAaDk.js";import{A as E}from"./app-layout-admin-bPDzceOK.js";import{d as M,B as R}from"./badge-Dp8nKuAQ.js";import{C as B,a as H,b as I,c as Y}from"./card-DLziDOQe.js";import{T as z,a as P,b as w,c as p,d as U,e as r}from"./table-DFxtelq1.js";import{B as l}from"./app-logo-icon-niQwcySJ.js";import{I as q}from"./index-CsbLVuVn.js";import{D as F,a as K,b as O,c as Q}from"./dialog-h4m6KRJP.js";import{D as b,a as N,b as v,c as j,C as V}from"./use-mobile-navigation-xAdiOegP.js";import{F as G}from"./filter-DnKLZ143.js";import{C as J,a as W}from"./chevron-up-Dflxa-R7.js";import{E as X,C as Z}from"./ellipsis-CcmptPFd.js";import{E as ee}from"./eye-Dzot2m_d.js";import{T as se}from"./trash-2-D2cVRMBt.js";import"./sonner-BAI07Ub3.js";import"./briefcase-business-D4N79Uzy.js";import"./users-Dz1g4iLP.js";import"./user-plus-BCs7l9Mm.js";import"./index-DDuQ3gsv.js";const ae=[{title:"Home",href:"/admin/dashboard"},{title:"Contacts",href:"/admin/contacts"}],te={Admin:"bg-amber-600 text-white",Agent:"bg-sky-600 text-white",Client:"bg-emerald-600 text-white",User:"bg-violet-600 text-white"},ne={name:"Name",email:"Email",company:"Company",phone:"Phone",created:"Created"};function ye(){const{contacts:t,sortCol:c,sortDir:d}=$().props,y=t.data??[],[u,D]=x.useState(""),[m,T]=x.useState("All"),[h,i]=x.useState(null),A=y.filter(s=>{const a=u.toLowerCase(),n=`${s.firstname} ${s.lastname}`.toLowerCase().includes(a)||(s.email??"").toLowerCase().includes(a)||(s.phone??"").toLowerCase().includes(a)||(s.company??"").toLowerCase().includes(a),_=s.roles;return n&&(m==="All"||_.includes(m))}),S=s=>{const a=s===c&&d==="asc"?"desc":"asc";o.visit(`/admin/contacts?sort=${s}&dir=${a}`)},C=s=>o.visit(`/admin/contacts?page=${s}&sort=${c}&dir=${d}`),L=()=>{h&&(o.delete(route("admin.contacts.destroy",h),{},{onSuccess:()=>{g.success("Contact deleted"),o.reload({only:["contacts"]})},onError:()=>g.error("Delete failed")}),i(null))};return e.jsxs(E,{breadcrumbs:ae,children:[e.jsx(k,{title:"Contacts"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx(q,{placeholder:"Search name, email, phone, company",value:u,onChange:s=>D(s.target.value),className:"w-full md:w-1/3"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"})," ",m]})}),e.jsx(v,{children:["All","Standalone","Admin","Agent","Client","User"].map(s=>e.jsx(j,{onClick:()=>T(s),children:s},s))})]}),e.jsx(f,{href:route("admin.contacts.create"),children:e.jsx(l,{children:"Add Contact"})})]})]}),e.jsxs(B,{children:[e.jsx(H,{children:e.jsx(I,{children:"Contacts"})}),e.jsxs(Y,{children:[e.jsxs(z,{children:[e.jsx(P,{children:e.jsxs(w,{children:[["name","email","company","phone","created"].map(s=>e.jsxs(p,{onClick:()=>S(s),className:"cursor-pointer select-none whitespace-nowrap",children:[ne[s],c===s&&(d==="asc"?e.jsx(J,{className:"inline h-4 w-4 ml-1"}):e.jsx(W,{className:"inline h-4 w-4 ml-1"}))]},s)),e.jsx(p,{children:"Role(s)"}),e.jsx(p,{className:"text-right w-16",children:"Actions"})]})}),e.jsx(U,{children:A.map(s=>{const a=s.roles.filter(n=>n!=="Standalone");return e.jsxs(w,{children:[e.jsxs(r,{children:[s.firstname," ",s.lastname]}),e.jsx(r,{children:s.email||"—"}),e.jsx(r,{children:s.company||"—"}),e.jsx(r,{children:s.phone||"—"}),e.jsx(r,{children:s.created_at?M(s.created_at).format("MMM D YYYY"):"—"}),e.jsx(r,{className:"space-x-1",children:a.length?a.map(n=>e.jsx(R,{className:te[n],children:n},n)):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"})}),e.jsx(r,{className:"text-right",children:e.jsxs(b,{children:[e.jsx(N,{asChild:!0,children:e.jsx(l,{size:"icon",variant:"ghost",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs(v,{align:"end",children:[e.jsx(j,{asChild:!0,children:e.jsxs(f,{href:route("admin.contacts.hub",s.id),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"})," View details"]})}),e.jsxs(j,{onClick:()=>i(s.id),className:"text-red-600 focus:bg-red-50",children:[e.jsx(se,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})})]},s.id)})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",t.current_page," of ",t.last_page]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"icon",variant:"outline",disabled:t.current_page===1,onClick:()=>C(t.current_page-1),children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(l,{size:"icon",variant:"outline",disabled:t.current_page===t.last_page,onClick:()=>C(t.current_page+1),children:e.jsx(V,{className:"h-4 w-4"})})]})]})]})]})]}),e.jsx(F,{open:h!==null,onOpenChange:()=>i(null),children:e.jsxs(K,{children:[e.jsx(O,{children:e.jsx(Q,{children:"Delete contact?"})}),e.jsx("p",{className:"py-2 text-sm",children:"This can’t be undone."}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(l,{variant:"secondary",onClick:()=>i(null),children:"Cancel"}),e.jsx(l,{variant:"destructive",onClick:L,children:"Delete"})]})]})})]})}export{ye as default};
